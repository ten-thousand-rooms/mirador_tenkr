{"version":3,"sources":["webpack:///webpack/bootstrap ac1f474d4ed08c33b831","webpack:///./src/js/util/logger.js","webpack:///./src/js/import.js","webpack:///./src/js/state-store.js","webpack:///./src/js/mirador-proxy/mirador-proxy-manager.js","webpack:///./src/js/app.js","webpack:///./src/js/mirador-proxy/window-proxy.js","webpack:///./src/js/page-controller.js","webpack:///./src/js/session.js","webpack:///./src/js/util/util.js","webpack:///./src/js/annotation-data/annotation-source.js","webpack:///./src/js/util/fatal-error.js","webpack:///./src/js/widgets/modal-alert.js","webpack:///./src/js/annotation-data/annotation-cache.js","webpack:///./src/js/annotation-data/yale-endpoint.js","webpack:///./src/js/widgets/annotation-editor.js","webpack:///./src/js/widgets/annotation-window/dom-helper.js","webpack:///./src/js/widgets/layer-selector.js","webpack:///./src/js/widgets/selector.js","webpack:///./src/js/export.js","webpack:///./~/babel-polyfill/dist/polyfill.js","webpack:///./src/js/annotation-data/annotation-cache-in-memory.js","webpack:///./src/js/annotation-data/annotation-cache-indexeddb.js","webpack:///./src/js/annotation-data/annotation-source-fb.js","webpack:///./src/js/annotation-data/annotation-toc-cache.js","webpack:///./src/js/annotation-data/firebase-proxy.js","webpack:///./src/js/config/config-fetcher.js","webpack:///./src/js/config/locales-default.js","webpack:///./src/js/config/locales.js","webpack:///./src/js/config/mirador-config-builder.js","webpack:///./src/js/extension/annotation-table-of-contents.js","webpack:///./src/js/extension/dialog-builder.js","webpack:///./src/js/extension/ext-global.js","webpack:///./src/js/extension/ext-hud.js","webpack:///./src/js/extension/ext-image-view.js","webpack:///./src/js/extension/ext-manifest.js","webpack:///./src/js/extension/ext-osd-region-draw-tool.js","webpack:///./src/js/extension/main.js","webpack:///./src/js/layout/grid.js","webpack:///./src/js/layout/layout-config-parser.js","webpack:///./src/js/mirador-proxy/mirador-proxy.js","webpack:///./src/js/mirador-proxy/workspace-proxy.js","webpack:///./src/js/mirador-wrapper.js","webpack:///./src/js/util/annotation-explorer.js","webpack:///./src/js/util/jquery-tiny-pubsub-trace.js","webpack:///./src/js/widgets/annotation-window/annotation-list-widget.js","webpack:///./src/js/widgets/annotation-window/annotation-nav.js","webpack:///./src/js/widgets/annotation-window/annotation-window.js","webpack:///./src/js/widgets/annotation-window/renderer/annotation-page-renderer.js","webpack:///./src/js/widgets/annotation-window/renderer/annotation-renderer.js","webpack:///./src/js/widgets/annotation-window/renderer/annotation-toc-renderer.js","webpack:///./src/js/widgets/annotation-window/scroll-helper.js","webpack:///./src/js/widgets/error-dialog.js","webpack:///./src/js/widgets/menu-tag-selector.js","webpack:///../joosugi/dist/joosugi.js","webpack:///../joosugi-semantic-ui/dist/joosugi-semantic-ui.js","webpack:///./src/css/main.less","webpack:///./~/process/browser.js","webpack:///(webpack)/buildin/global.js"],"names":["getLogger","instance","Logger","logLevel","DEBUG","INFO","WARNING","ERROR","_logLevel","args","error","warn","info","log","require","Anno","joosugi","AnnotationWrapper","AnnotationExplorer","AnnotationExplorerDialog","joosugiUI","AnnotationToc","annoUtil","annotationUtil","getStateStore","logger","registeredKeys","Set","StateStore","_settings","_state","_localStorageAvailable","storageAvailable","settings","value","keys","key","undefined","_checkKey","localStorage","getItem","setItem","getString","setString","debug","JSON","parse","stringValue","stringify","has","type","storage","window","x","removeItem","e","_instance","MiradorProxyManager","_miradorProxiesMap","miradorId","mirador","miradorProxy","Object","values","windowId","getWindowById","windowProxies","concat","getWindowProxies","windowProxy","getWindowProxyById","getCurrentCanvasId","_miradorProxies","eventName","callback","subscribe","getMiradorProxyManager","destroyOld","Mirador","annotationExplorer","annotationSource","App","_setupLogger","initHandlebars","initState","_preConfigureTinyMce","buildPath","_setupAnnotationTocCache","grid","ui","rootElementId","_pageController","init","state","Handlebars","registerHelper","i18nKey","i18next","t","explorer","getAnnotationExplorer","getLayers","layers","setTransient","location","hash","setLogLevel","setLogger","miradorBuildPath","tinymce","base","setup","tocSpec","getSetting","_annotationTocCache","dataSource","getAnnotationSource","annoStoreUrl","prefix","getApp","WindowProxy","id","manifest","canvasID","canvases","getCanvases","canvasId","matches","filter","canvas","options","setCurrentCanvasID","focusModules","ImageView","endpoint","annotationsList","drawTool","getDrawTool","svgOverlay","imageView","getImageView","annotationsLayer","sidePanel","klass","getSidePanel","element","find","getPageController","PageController","jQuery","extend","miradorOptions","genUUID","defaultSettings","DEFAULT_SETTINGS","isEditor","_miradorWrapper","_createMirador","_miradorProxy","getMiradorProxy","_miradorId","getId","_tocSpec","getAnnotationTocCache","_annotationExplorer","_bindEvents","miradorWrapper","getConfig","addMiradorWindow","msg","annoId","defaultLayer","getAnnotations","annotations","annotation","anno","layerId","_getAnnotationByTagsAndLayer","tags","derivedAnnotation","warning","targetWindow","getAnnotationWindowByLayer","addAnnotationWindow","imageWindowId","annotationId","catch","reason","annoWindow","getToc","toc","tocNode","getNodeFromTags","annos","findAllAnnotationsForTocNode","getAnnotationToc","parser","layerIds","tocTags","windowsConfig","getWindowsConfig","publish","_urlOptionsProcessed","handler","_zoomToAnnotation","unsubscribe","_createAnnotationWindows","sourceAnnotation","allAnnotations","annoMap","findTransitiveTargetAnnotations","targets","target","full","imageWindowProxy","getAnnotationsList","_findCanvasAnnotationsFromTargets","length","zoomToAnnotation","panToAnnotation","updateHighlights","_this","resize","event","params","shouldIgnoreEvent","unmarkEventToBeIgnored","_processUrlOptions","tocPanel","getSidePanelTabContentElement","annoTocMenu","data","_showAnnotation","scrollToTags","hasTargetOnCanvas","_annotationToBeFocused","setCurrentCanvasId","evnet","Promise","resolve","reject","setTimeout","annotationWindows","getAnnotationWindows","annoWin","ignoreEvent","zoomToTags","serverSettings","loggedIn","Cookies","get","isMobileOrTablet","a","test","substr","navigator","userAgent","vendor","opera","getValues","object","each","push","waitUntil","testFunc","execFunc","ms","count","directionClasses","setTextDirectionClass","jQueryElem","newClass","includes","addClass","removeClass","AnnotationSource","_prefix","_layers","_getRemoteLayers","_updateLayerIndex","projectId","url","ajax","dataType","contentType","success","textStatus","jqXHR","errorThrown","status","getTransient","map","forEach","layer","cache","show","getAnnotationsPerCanvas","_getRemoteAnnotations","setAnnotationsPerCanvas","_attachEndpoint","hide","encodeURIComponent","item","layer_id","_toMiradorAnnotation","oaAnnotation","_toBackendAnnotation","request","invalidateAllCanvases","tocCache","invalidate","replace","annoIds","canvas_id","annotation_ids","on","selector","targetedBy","Array","fatalError","console","rootElem","template","arg","append","document","body","empty","compile","join","getModalAlert","ModalAlert","dimmer","addDimmer","panel","addPanel","appendTo","attr","text","getAnnotationCache","AnnotationCache","_dbCache","_memCache","_valid","_inMemoryCache","isValid","deleteDb","invalidateCanvasId","_explorer","_instances","getEndpoint","YaleEndpoint","dfd","uri","errorPane","then","successCallback","errorCallback","userAuthorize","_create","createAnnotation","_update","promise","updateAnnotation","index","_deleteAnnotation","deleteAnnotation","grep","_updateOrder","updateAnnotationListOrder","action","prop","parent","AnnotationEditor","miradorDriven","targetAnnotation","saveCallback","cancelCallback","_mode","mode","_$anno","_textDirectionClass","_getTextDirectionClass","_useVerticalRL","miradorProxyManager","getEndPoint","tagsStr","reload","prepend","header","title","textArea","layerSelectorContainer","layerSelector","lastLayer","val","bodyText","initTinyMce","bindEvents","plugins","menubar","toolbar","fontsize_formats","statusbar","toolbar_items_size","default_link_target","past_as_text","height","theme_advanced_resizing","theme_advanced_statusbar_location","editor","getDoc","style","fontSize","execCommand","addButton","tooltip","icon","onselect","remove","getEditor","isDirty","_loadedAnnotation","tagText","trim","resourceText","getContent","motivation","resource","split","$anno","content","setContent","getBody","setAttribute","oaAnno","chars","create","destroy","update","alert","click","preventDefault","stopPropagation","validate","save","iframeId","tinyMCE","DOM","parseInt","getStyle","setStyle","bodyStyle","DomHelper","_root","windowTemplate","_header","_findOne","_placeHolder","_layerSelectorContainer","_tocTagSelector","_orderConfirm","_saveOrderButton","_cancelOrderButton","_toggleDirectionButton","_addToggleDirectionButton","_createWindowButton","_addCreateWindowButton","_listContainer","getListContainer","toArray","root","found","elem","hasClass","getAllAnnotationCells","cell","$cell","rowReverse","button","changeCallback","initialLayerId","appState","hiddenLayers","_isLoaded","layerIndexMap","layerIndex","colorClass","addItem","label","setColorClass","skipNotify","retVal","dropdown","direction","onChange","_skipNotify","itemsConfig","_setItems","children","menu","addMenuItem","css","itemTemplate","dd","_oldClass","YaleMirador","_cache","annosPerCanvas","_queues","_maxCanvases","_logState","queue","shift","splice","indexOf","AnnotationCacheIndexeddb","_dbName","indexedDB","_expiresInMS","_db","Dexie","version","stores","open","delete","where","equals","first","row","jsonData","layersJson","_emptyTable","add","coll","and","rec","nowMS","Date","valueOf","timestamp","table","put","_deleteAnnotationsPerCanvas","name","transaction","cursor","AnnotationSourceFb","fbSettings","extension","firebase","fbProxy","fbKeyMap","ref","database","once","snapshot","fbDfd","getAnnosByCanvasId","done","annoInfos","annoInfo","_getAnnotationInOA","fbKey","_getAnnotationInEndpoint","canvasIds","getTargetCanvasIds","addAnno","_getTargetCanvasId","deleteAnnoFromListExcludeCanvasLayer","addAnnoToList","deleteAnnoFromList","combinedId","query","orderByChild","equalTo","exists","prevChildKey","annotationIds","targetAnno","findFinalTargetAnnotation","within","orderWeight","AnnotationTocCache","assign","createToc","FirebaseProxy","config","apiKey","authDomain","databaseURL","databaseUrl","storageBuket","initializeApp","Deferred","fbAnnos","fbKeys","listsRef","listObjs","listObj","annoObj","annoRef","matched","inArray","childSnapshot","childRef","childKey","childData","getConfigFetcher","ConfigFetcher","tocTagsStr","layerIdsStr","apiUrl","roomId","manifestUri","baseUrl","en","nextCanvas","previousCanvas","showBottomPanel","hideBottomPanel","ko","Locales","overrides","i18nOverrides","entries","lang","MiradorConfigBuilder","_options","_manifestUri","_canvasId","i18nPath","imagesPath","logosPath","mainMenuSettings","windowObjects","windowObject","autoHideControls","annotationEndpoint","endPointConfig","annotationBodyEditor","module","i18nAdditions","getLocalesConfig","windowSettings","displayLayout","sidePanelOptions","annotationTocTabAvailable","tocTabAvailable","canvasControls","annotationCreation","annotationState","hoverColor","hoverWidthFactor","drawingToolsSettings","loadedManifest","bottomPanelVisible","endpointUrl","AnnotationTableOfContents","structures","manifestVersion","previousSelectedElements","selectedElements","previousOpenElements","openElements","hoveredElement","selectContext","tocData","active","eventEmitter","emptyTemplate","topGen","generator","i","max","itemElem","_createItem","_selectedElem","mousemove","mouseenter","_unselect","targetElem","_select","scrollTo","spec","tag","descriptions","canvasMap","_savedScrollTop","scrollTop","focus","$","DialogBuilder","container","prototype","confirm","message","result","dialog","opts","yes","buttons","no","html","yesLabel","noLabel","modal","onApprove","onDeny","yaleExt","getCombinedBounds","shapes","bounds","shape","unite","strokeBounds","updateTooltipStyles","styles","color","backgroundColor","border","truncate","maxLen","slice","Hud","qtipExtra","jsonLd","qtip","position","my","at","classes","tip","toggleBottomPanelQtip","_bottomPanelQtipInitialized","adjust","method","y","enableAnnotationLayer","currentZoom","shapeBounds","zoomFactor","viewport","osd","getZoom","getShapesForAnnotation","shapeWH","imageToViewportCoordinates","width","viewportBounds","getBounds","widthRatio","heightRatio","Math","isNaN","zoomBy","p","OpenSeadragon","Point","shapeXY","shapeLeft","shapeRight","shapeTop","shapeBottom","viewportHeight","getHomeBounds","visibleLeft","visibleRight","visibleTop","visibleBottom","padding","panX","panY","panBy","_listenForActions","listenForActions","call","hud","annoState","current","displayOn","copyrightedImageServiceUrl","Manifest","processCopyright","getReplacementDimensions","sequences","sequence","processSequence","maxWidth","maxHeight","side","min","processCanvas","images","image","processImage","service","String","OsdRegionDrawTool","annotationsToShapesMap","out_shapes","saveStrokeColor","_ym_defaultStrokeColor","strokeColor","saveStrokeWidth","_ym_defaultStrokeWidth","strokeWidth","getDefaultStrokeWidth","highlightShape","bringToFront","deHighlightShape","sendToBack","osdViewer","forceRedraw","updateShapesVisibility","opacity","setting","defaultWidth","set","_annotationWindows","initLayout","hasHeaders","showPopoutIcon","selectionEnabled","dimensions","minItemWidth","minItemHeight","isClosable","_layout","GoldenLayout","registerComponent","componentState","miradorElem","getElement","annotationWindowElem","outerHTML","getMiradorProxies","componentName","_resizeWindows","updateSize","itemConfig","contentItems","addChild","windows","windowConfig","annoExplorer","canvasWindowId","_pickLayer","initialTocTags","getCurrentLayerId","addAnnotationWindows","windowIds","numAnnoWindows","_setWidth","itemId","percentWidth","getItemsById","allLayers","candidateLayer","candidateLayerId","useThisLayer","usedLayerId","proxyMgr","LayoutConfigParser","_findAnnotation","getTagsFromAnnotationId","candidates","MiradorProxy","_mirador","_workspaceProxy","_id","_ignoredEvents","viewer","workspace","getWorkspaceProxy","from","arguments","apply","WorkspaceProxy","numWindows","MiradorWrapper","_miradorConfig","_buildMiradorConfig","_addToMiradorProxy","builder","buildConfig","addMirador","annotationEditor","loadAnnotation","canvasAnnotations","getSvgOverlay","removeMouseTool","annoSource","defaultCanvasId","onSelect","setMouseTool","openAnnotationSelector","trace","excludePatterns","scaffoldMap","exclude","str","match","logging","scaffoldHandler","eventId","scaffold","unscaffold","AnnotationListWidget","_annoWin","annotationWindow","_annoPageRenderer","annotationPageRenderer","_annoExplorer","_canvases","_isEditor","_continuousPages","continuousPages","_dom","getDomHelper","_rootElem","_minContentRelativeHeight","_maxContentRelativeHeight","_layerId","_nav","_setupNavigation","_loading","_createPageElements","_scrollHelper","listWidget","listNavigator","groupHeaderHeight","_unbindEvents","nav","pageNum","getPage","setPage","_onNavSetPage","getPageNumForCanvas","goToPage","goToPageByCanvas","targetPage","scrollToAnnotation","clearAnnotationHighlights","highlightAnnotation","getCanvas","oldCanvasId","newCanvasId","isLoaded","_unloadAllPages","_loadPage","loadPreviousPage","loadNextPage","scrollToPage","getImageWindowProxy","nextPage","getActiveRange","endPage","getNumPages","scrollDown","startPage","scrollUp","minHeight","numPages","scrollHeight","annoElem","setPageByCanvasId","annotationWindowId","getImageWindowId","offset","top","flag","$annoElem","highlightAnnotationElem","pageRenderer","pageElem","createPageElement","canvasLabel","setPageElement","currentPage","_activatePageForward","_activatePageBackward","getPageElement","unload","_getAnnotationsForPage","_getTocForPage","load","render","annotationToc","getPageElements","unloadAll","rootElemHeight","_currentPageNum","siblings","findTocSiblings","sibling","next","size","select","nextPageElem","prev","prevPage","prevPageElem","last","yOffset","scrollToElem","bindScrollEvent","keydown","_focusNextAnnotation","_focusPrevAnnotation","unbindScrollEvent","off","AnnotationNav","_pageNum","_numPages","_activeRange","_pageStateList","_createPageStateList","loaded","_addToActiveRange","_unloadPageItem","_removeFromActiveRange","range","endtPage","pages","AnnotationWindow","_imageWindowId","_appendTo","_listWidget","annotationListWidget","_initialLayerId","_initialTocTags","_annotationId","_imageWindow","getOrderConfirm","_jQuerySubscribed","_miradorSubscribed","_setDirty","_flexDirection","annotationList","_processDataParams","initLayerSelector","placeHolder","getPlaceHolder","_setupAnnotationListWidget","highlightAnnotations","goToAnnotation","goToPageByTags","duration","expiration","findAnnotationFromListById","annosToShow","matchHierarchy","fullTagsTargets","getManifest","constinousPages","_unsubscribeAll","getNav","menuTagSelector","getTocTagSelector","initialTags","_setCurrentLayerId","getLayerSelectorContainer","updateList","getRoot","toggleClass","updateDirection","_currentLayerId","_dirty","getCurrentCanvas","layersPromise","tocPromise","all","_isDirty","targetAnnoID","targetLink","infoTemplate","hasOne","onComplete","transition","animation","_reorderedPageElem","annoElems","getCreateWindowButton","getToggleDirectionButton","_toggleDirection","getSaveOrderButton","_saveAnnotationsOrder","getCancelOrderButton","_subscribe","_shouldIgnoreEvent","hasOpenEditor","clearHighlights","siblingElems","getTocSiblingElems","targeting","findTransitiveTargetingAnnotations","findAnnoElemByAnnoId","targeted","context","saved","handlers","AnnotationPageRenderer","_annoRenderer","annotationRenderer","pageTemplate","pageHeader","_renderToc","_renderDefault","createAnnoElem","renderer","AnnotationRenderer","hideTags","tagsHtml","getTagsHtml","annoHtml","annotationTemplate","orderable","contentElem","menuBar","ddElem","bindAnnotationItemEvents","getAnnoListNav","imageWindow","dialogElement","getWindowId","reloadIfDirty","annoWind","draggable","dialogClass","dom","normalView","fadeDown","after","fadeUp","showSaveOrderConfirmation","before","AnnotationTocRenderer","walk","node","level","isRoot","isDummy","appendHeader","appendAnnotations","appendUnattachedAnnotations","nodeHasAnnotationsToShow","headerElem","createHeaderElem","numUnassigned","unassigned","headerHtml","headerTemplate","childNodes","childNode","ScrollHelper","_groupHeaderHeight","_continousPages","getRootElement","pageHeaderElem","onAfter","targetTags","targetHeaderElem","_getNextAnnoElem","currentElem","isAnnotationCell","yOffsetIn","_calcOffset","minOffset","getAnnotationElems","delta","diff","scroll","currentPos","contentHeight","getErrorDialog","ErrorDialog","onHidden","messageMap","MSG_TRY_LATER","authz_create","authz_update","authz_delete","errorId","MenuTagSelector","depth","buildMenu","setItems","firstValue","parentItem","currentDepth","sort","b","weight","subMenu"],"mappings":"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AAG;AACJ;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,8BAA8B;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,8BAA8B;AACjC;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,WAAW,eAAe;AAC/B;AACA,KAAK;AACL;AACA;AACA,CAAC,EAAE,8BAA8B;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,eAAe;AACxB;AACA;AACA;AACA,sCAAsC;AACtC;AACA,8BAA8B;AAC9B,6BAA6B;AAC7B,+BAA+B;AAC/B,mCAAmC;AACnC,SAAS,+BAA+B;AACxC;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,4CAA4C;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,sCAAsC;AAC7C;AACA;AACA;AACA;AACA,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;;AAEA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,SAAS;AACnC;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB,EAAE;;AAE7C;AACA;AACA;AACA;AACA,GAAG,UAAU;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kBAAkB;AACrB,iBAAiB;;AAEjB;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,6DAA6D,OAAO;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,CAAC,EAAE,8FAA8F;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,0BAA0B;AAC1B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC,EAAE,4DAA4D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO,kCAAkC,gCAAgC,aAAa;AACtF,6BAA6B,mCAAmC,aAAa;AAC7E;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,2DAA2D;AAC3D;AACA,gDAAgD,iBAAiB,EAAE;AACnE;AACA,0DAA0D,aAAa,EAAE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,0B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC,EAAE,8FAA8F;AACjG,6BAA6B;AAC7B,qCAAqC;AACrC,CAAC,GAAG;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,MAAM;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA,iCAAiC,QAAQ,gBAAgB,UAAU,GAAG;AACtE,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,uBAAuB;AAC5G,mEAAmE;AACnE,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;AACA,CAAC,EAAE,wCAAwC;AAC3C;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK,UAAU;AACf,GAAG;AACH;AACA,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,8BAA8B,qCAAqC;AACnE;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA,CAAC,EAAE,0CAA0C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,MAAM;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,iBAAiB,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA,gEAAgE,gBAAgB;AAChF;AACA;AACA,GAAG,2CAA2C,gCAAgC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kDAAkD;AACrD;AACA;AACA;AACA,uCAAuC;AACvC,CAAC,GAAG;AACJ,uBAAuB;AACvB;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC,EAAE,wBAAwB;AAC3B;AACA,CAAC,EAAE,QAAQ;AACX;AACA,yDAAyD,gBAAgB,UAAU,GAAG;AACtF,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,MAAM;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,oEAAoE,aAAa,EAAE;;AAEnF;AACA,qDAAqD,0BAA0B;AAC/E;AACA;AACA,CAAC,EAAE,0CAA0C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,aAAa;;AAEzC;AACA;AACA;AACA;AACA;AACA,wCAAwC,oCAAoC;AAC5E,4CAA4C,oCAAoC;AAChF,KAAK,2BAA2B,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC,EAAE,kFAAkF;AACrF;AACA;;AAEA;AACA;AACA,+BAA+B,qBAAqB;AACpD,+BAA+B,SAAS,EAAE;AAC1C,CAAC,UAAU;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,SAAS,mBAAmB;AACvD,+BAA+B,aAAa;AAC5C;AACA,GAAG,UAAU;AACb;AACA;AACA,CAAC,EAAE,UAAU;AACb;AACA,UAAU;AACV;AACA,CAAC,GAAG;AACJ;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kBAAkB;AACrB;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,0CAA0C;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,gBAAgB,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,oCAAoC;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,oBAAoB,EAAE;AAC7D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,UAAU,EAAE;AAC9C,mBAAmB,sCAAsC;AACzD,CAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,CAAC,EAAE,kDAAkD;AACrD;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,CAAC,EAAE,8CAA8C;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC,EAAE,gCAAgC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,8BAA8B;AACjC;AACA;AACA;AACA;AACA,4CAA4C,aAAa;AACzD;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,UAAU;AACb;AACA;AACA,CAAC,EAAE,4DAA4D;AAC/D;AACA;AACA;AACA,kBAAkB;;AAElB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB,cAAc;AACd,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,mDAAmD,OAAO,EAAE;AAC5D;AACA,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,8BAA8B;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,4BAA4B;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,4BAA4B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA;AACA;AACA;AACA,CAAC,EAAE,sBAAsB;AACzB;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD,CAAC,EAAE,0CAA0C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,OAAO,UAAU,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA;AACA,CAAC,EAAE,8BAA8B;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,aAAa;AACjC,GAAG;AACH;AACA,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA;;AAEA;AACA,kEAAkE,+BAA+B;AACjG;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA,mDAAmD;AACnD;AACA,uCAAuC;AACvC;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,sBAAsB;AACzB;;AAEA;AACA;AACA,wCAAwC;AACxC,GAAG;AACH;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kBAAkB;AACrB,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,4BAA4B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAM;AACb;AACA;AACA,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,gDAAgD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,4BAA4B;AAC5B,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,gBAAgB,0BAA0B,GAAG;AAC9D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gCAAgC;AACxF;AACA,OAAO;AACP;AACA;AACA,4EAA4E,YAAY;AACxF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uDAAuD,6CAA6C,EAAE;;AAEtG;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,iDAAiD;AACjD;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,mCAAmC;AACnC;AACA,KAAK;AACL,sEAAsE;AACtE;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,4DAA4D;AAC5D;AACA,KAAK;AACL,sEAAsE;AACtE;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,sBAAsB,sBAAsB,EAAE,EAAE;AAChD;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,+BAA+B,aAAa;AAC5C;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,aAAa;AACrC,OAAO;AACP;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA,uDAAuD,UAAU;;AAEjE;;AAEA,4FAA4F,wBAAwB;;AAEpH;AACA;AACA,KAAK,UAAU,cAAc;;AAE7B;AACA;AACA,KAAK;AACL;AACA,KAAK,WAAW,gCAAgC;;AAEhD;AACA;AACA;AACA,CAAC,kCAAkC;AACnC,CAAC,EAAE,wUAAwU;AAC3U;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO,WAAW;AAClB;AACA;AACA,OAAO,UAAU;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,WAAW;AAClB;AACA;AACA;AACA,OAAO,WAAW;AAClB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,gBAAgB,uBAAuB,GAAG;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAW;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA,qBAAqB;AACrB,GAAG;AACH,yBAAyB;AACzB,GAAG;AACH;AACA;AACA;AACA;AACA,gDAAgD,iBAAiB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kHAAkH;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;AACA;AACA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,sBAAsB;AAChF,gFAAgF,sBAAsB;AACtG;AACA,CAAC,EAAE,0CAA0C;AAC7C;AACA,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA,4CAA4C;;AAE5C,8BAA8B,4BAA4B,gBAAgB,GAAG;;AAE7E,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA,6BAA6B,uBAAuB;;AAEpD;AACA,CAAC,EAAE,oBAAoB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;;AAEA,6BAA6B,iBAAiB;;AAE9C;AACA,CAAC,EAAE,oBAAoB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,gBAAgB,EAAE;AACxD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,gBAAgB,EAAE;AACxD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D,kBAAkB,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gCAAgC;AACpF;AACA;AACA,KAAK;AACL;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,CAAC,EAAE,8EAA8E;AACjF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;;AAEA,6BAA6B,qBAAqB;AAClD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA,CAAC,EAAE,wCAAwC;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,WAAW;AACpB;AACA;AACA,CAAC;AACD,CAAC,EAAE,8CAA8C;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,oDAAoD;AACvD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wCAAwC;AAC3C;AACA,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA,4BAA4B,gBAAgB,6BAA6B,GAAG;AAC5E,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;;AAEA;AACA,wEAAwE,wBAAwB,UAAU,GAAG;AAC7G,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,oCAAoC;AACvC;AACA;;AAEA;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA,gCAAgC,kBAAkB;AAClD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gCAAgC;AACnC;AACA;;AAEA;AACA;AACA,wBAAwB,mEAAmE;AAC3F,CAAC;AACD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yEAAyE,aAAa;AACtF,CAAC,EAAE,QAAQ;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;;AAEA,iEAAiE,cAAc;AAC/E,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;;AAEA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA,4BAA4B,mBAAmB;AAC/C,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA,4BAA4B,kBAAkB;AAC9C,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,KAAK;AACL;AACA,uCAAuC,cAAc,OAAO;AAC5D,uCAAuC,cAAc,OAAO;AAC5D;AACA;AACA,mEAAmE,OAAO;AAC1E;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0BAA0B,EAAE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,4GAA4G;AAC/G;AACA;;AAEA,8BAA8B,0BAA0B;AACxD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA,8BAA8B,uBAAuB;AACrD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA,8BAA8B,mCAAmC;AACjE,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA,8BAA8B,oCAAoC;AAClE,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA,+EAA+E,wBAAwB;AACvG,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA,2EAA2E,oBAAoB;AAC/F,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,CAAC;AACD,CAAC,EAAE,0CAA0C;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA,sBAAsB;AACtB,CAAC;AACD;AACA;AACA,kG;AACA;AACA,CAAC;AACD,CAAC,EAAE,sBAAsB;AACzB;AACA;;AAEA,0CAA0C,oBAAoB;AAC9D,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA,8BAA8B,oBAAoB;AAClD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA,yDAAyD,8BAA8B;AACvF,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA,yDAAyD,8BAA8B;AACvF,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,0BAA0B;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA,8BAA8B,gBAAgB;AAC9C,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA,8BAA8B,gCAAgC;AAC9D,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,0BAA0B;AAC7B;AACA;AACA;AACA,8DAA8D,wBAAwB;AACtF,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA,0DAA0D,oBAAoB;AAC9E,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,4CAA4C,oBAAoB;AAC/G;AACA;AACA,GAAG,UAAU;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,gCAAgC;AACnD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,qCAAqC;AACpD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,uBAAuB,KAAK;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gJAAgJ;AACnJ;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,qBAAqB;AACrB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,oCAAoC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA,kCAAkC;AAClC,CAAC;AACD;AACA,yBAAyB;AACzB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,4DAA4D;AAC/D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,MAAM,SAAS,OAAO,SAAS;AAC/D,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wCAAwC;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,GAAG;AACH,UAAU;AACV,CAAC;;AAED;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,SAAS;AACxC,CAAC,EAAE,8CAA8C;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,cAAc;AACjB;AACA;;AAEA,+BAA+B,qBAAqB;AACpD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,cAAc;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,SAAS;AACxC,CAAC,EAAE,8DAA8D;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kBAAkB,EAAE;AAC1C,wBAAwB,gBAAgB;AACxC,KAAK;AACL;AACA,mCAAmC,iBAAiB;AACpD;AACA;AACA;AACA;;AAEA;AACA,CAAC,EAAE,0FAA0F;AAC7F;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,2BAA2B;AACjD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0BAA0B,wBAAwB,wBAAwB,YAAY,EAAE;AACxF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD;AACA;AACA,GAAG;AACH;AACA,CAAC,EAAE,gDAAgD;AACnD;AACA;;AAEA;AACA;AACA,wBAAwB,mEAAmE;AAC3F,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,wBAAwB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,UAAU;AACV,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,CAAC,EAAE,4BAA4B;AAC/B;;AAEA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kCAAkC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,oBAAoB,uBAAuB,SAAS,IAAI;AACxD,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA,KAAK;AACL;AACA,sBAAsB,iCAAiC;AACvD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,8BAA8B;AAC5F;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,gBAAgB;;AAE1E;AACA;AACA;AACA,oBAAoB,oBAAoB;;AAExC,0CAA0C,oBAAoB;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,wBAAwB,eAAe,EAAE;AACzC,wBAAwB,gBAAgB;AACxC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK,QAAQ,iCAAiC;AAClG,CAAC;AACD;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,0PAA0P;AAC7P;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6EAA6E,0BAA0B;;AAEvG;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;AACD;AACA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA,CAAC,EAAE,8FAA8F;AACjG;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,4BAA4B;AAC/B;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,CAAC,EAAE,wDAAwD;AAC3D;AACA;;AAEA;AACA;AACA,4BAA4B,mEAAmE;AAC/F,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gCAAgC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA,uCAAuC,2BAA2B;AAClE,CAAC,EAAE,gBAAgB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,6DAA6D;AACvG;AACA,CAAC;AACD,CAAC,EAAE,gDAAgD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,6DAA6D;AACvG;AACA,CAAC;AACD,CAAC,EAAE,gDAAgD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,0CAA0C;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,CAAC,EAAE,4DAA4D;AAC/D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,CAAC,EAAE,4DAA4D;AAC/D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,4BAA4B;AACpG;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA,uCAAuC;AACvC,sCAAsC,yBAAyB;AAC/D,CAAC;;AAED;AACA;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,wBAAwB,aAAa;AACrC,KAAK;AACL,GAAG;AACH;AACA,0DAA0D,OAAO;AACjE;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,wBAAwB,aAAa;AACrC,KAAK;AACL;AACA,CAAC;;AAED,mDAAmD,aAAa,EAAE;;AAElE,oBAAoB,wBAAwB;;AAE5C;AACA,CAAC,EAAE,4FAA4F;AAC/F;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA,EAAE;AACF,CAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA,EAAE;AACF,CAAC,EAAE,wCAAwC;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA,EAAE;AACF,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA,EAAE;AACF,CAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA,EAAE;AACF,CAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA,EAAE;AACF,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA,EAAE;AACF,CAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC,EAAE,oBAAoB;AACvB;AACA;;AAEA,uCAAuC,2BAA2B;AAClE,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kDAAkD;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,UAAU;AACb;AACA,CAAC,EAAE,UAAU;AACb;AACA,CAAC,EAAE,UAAU;AACb;AACA;;AAEA,8BAA8B,oBAAoB;AAClD,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wGAAwG,OAAO;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,oDAAoD;AACvD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;AACD,CAAC,EAAE,gCAAgC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,8tDAA8tD;AACjuD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AA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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,8DAA8D,+DAA+D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,MAAM;AACvB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iEAAiE,gEAAgE;AACjI;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;;AAEA,WAAW,2BAA2B,0BAA0B,gCAAgC,4BAA4B,EAAE;;AAE9H;AACA;AACA,GAAG;;AAEH;AACA,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA,0GAA0G,gEAAgE;AAC1K;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,mEAAmE,mEAAmE;AACtI;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sEAAsE,mEAAmE;AACzI;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wGAAwG,mEAAmE;AAC3K;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yFAAyF,mEAAmE;AAC5J;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,kCAAkC,iCAAiC,eAAe,eAAe,gBAAgB,oBAAoB,MAAM,0CAA0C,+BAA+B,aAAa,qBAAqB,mCAAmC,EAAE,EAAE,cAAc,WAAW,UAAU,EAAE,UAAU,MAAM,yCAAyC,EAAE,UAAU,kBAAkB,EAAE,EAAE,aAAa,EAAE,2BAA2B,0BAA0B,YAAY,EAAE,2CAA2C,8BAA8B,EAAE,OAAO,6EAA6E,EAAE,GAAG,EAAE;;AAErpB,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,cAAc;AACd;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK,eAAe;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iEAAiE,gEAAgE;AACjI;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,4BAA4B;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;;AAEA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8DAA8D,mEAAmE;AACjI;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,4EAA4E,mEAAmE;AAC/I;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wFAAwF,mEAAmE;AAC3J;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA,qEAAqE,mEAAmE;AACxI;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP,qBAAqB,uBAAuB;AAC5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qEAAqE,mEAAmE;AACxI;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,gBAAgB,QAAQ;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8DAA8D,mEAAmE;AACjI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4EAA4E,mEAAmE;AAC/I;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;;AAEA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mEAAmE,gEAAgE;AACnI;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qEAAqE,mEAAmE;AACxI;AACA;AACA;AACA;;AAEA;AACA,6GAA6G,mEAAmE;AAChL;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;AAEA,OAAO;AACP;;AAEA;AACA,yB;;;;;;ACp4CA;;;AAGA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,cAAc;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,8DAA8D,+DAA+D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;;AAEA;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,6BAA6B;;AAE7B;AACA,0CAA0C,UAAU;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,OAAO;AACP;AACA;AACA,wCAAwC;AACxC,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;;AAEnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB;AACvB,GAAG;AACH,4BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,qBAAqB;AACrB;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,QAAQ;AAChC;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA,4BAA4B;;AAE5B,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;AACA,4BAA4B;;AAE5B,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA,iBAAiB;;AAEjB;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,gCAAgC,qBAAqB,qCAAqC,gDAAgD,0BAA0B,MAAM,0BAA0B,wBAAwB,EAAE,gBAAgB,eAAe,QAAQ,EAAE,iBAAiB,gBAAgB,EAAE,OAAO,sDAAsD,qBAAqB,EAAE,kBAAkB,oBAAoB,EAAE,EAAE,EAAE,EAAE,qBAAqB,EAAE,EAAE,GAAG;;AAExc,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;;AAEA;;AAEA;AACA,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,sCAAsC;AACtC;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;;AAGA;;AAEA,4DAA4D,OAAO;;AAEnE,2DAA2D,OAAO;;AAElE,sDAAsD,UAAU;;AAEhE,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,kFAAkF,gEAAgE;AAClJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qEAAqE,mEAAmE;AACxI;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,oFAAoF,mEAAmE;AACvJ;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;;AAGA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,eAAe;AACf;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,wEAAwE,gEAAgE;AACxI;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,oFAAoF,mEAAmE;AACvJ;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,oFAAoF,mEAAmE;AACvJ;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,sEAAsE,oBAAoB;;AAE1F;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,0FAA0F,mEAAmE;AAC7J;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+DAA+D,mEAAmE;AAClI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;;AAGA;;AAEA,sDAAsD,OAAO;;AAE7D,OAAO;AACP;AACA;;AAEA;AACA;;;AAGA;AACA,wDAAwD,gBAAgB,GAAG,0CAA0C,gBAAgB,GAAG,gDAAgD,iBAAiB,GAAG,gDAAgD,iBAAiB,uBAAuB,GAAG,gDAAgD,6BAA6B,GAAG,uCAAuC,iBAAiB,2BAA2B,uBAAuB,gBAAgB,GAAG,wDAAwD,kBAAkB,uBAAuB,GAAG,uBAAuB,iBAAiB,uBAAuB,2BAA2B,uBAAuB,iBAAiB,uBAAuB,GAAG,qCAAqC,0BAA0B,2BAA2B,GAAG,6BAA6B,qBAAqB,GAAG;;AAEt4B;;;AAGA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;AAGA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA,OAAO;AACP;;AAEA;AACA,2B;;;;;;AC1xGA,yC;;;;;;ACAA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C","file":"yale-mirador.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/public/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 58);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ac1f474d4ed08c33b831","export default function getLogger() {\n  if (!instance) {\n    instance = new Logger();\n  }\n  return instance;\n}\n\nlet instance = null;\n\nclass Logger {\n  constructor(logLevel) {\n    this.DEBUG = 0;\n    this.INFO = 1;\n    this.WARNING = 2;\n    this.ERROR = 3;\n\n    this._logLevel = logLevel || this.INFO;\n  }\n\n  setLogLevel(logLevel) {\n    this._logLevel = logLevel;\n  }\n\n  error(...args) {\n    console.error('ERROR', ...args);\n  }\n\n  warning(...args) {\n    if (this._logLevel <= this.WARNING) {\n      console.warn('WARNING', ...args);\n    }\n  }\n\n  info(...args) {\n    if (this._logLevel <= this.INFO) {\n      console.info('INFO', ...args);\n    }\n  }\n\n  debug(...args) {\n    if (this._logLevel <= this.DEBUG) {\n      console.log('DEBUG', ...args);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util/logger.js","require('exports-loader?joosugi!../../node_modules/joosugi/dist/joosugi.js');\nrequire('exports-loader?joosugiUI!../../node_modules/joosugi-semantic-ui/dist/joosugi-semantic-ui.js');\n\nconst Anno = joosugi.AnnotationWrapper;\nconst AnnotationExplorer = joosugi.AnnotationExplorer;\nconst AnnotationExplorerDialog = joosugiUI.AnnotationExplorerDialog;\nconst AnnotationToc = joosugi.AnnotationToc;\nconst annoUtil = joosugi.annotationUtil;\n\nexport {\n  Anno,\n  AnnotationExplorer,\n  AnnotationExplorerDialog,\n  AnnotationToc,\n  annoUtil\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/import.js","import getLogger from './util/logger';\n\nconst logger = getLogger();\n\nconst registeredKeys = new Set([\n  'annotationLayers',\n  'lastSelectedLayer',\n  'layerIndexMap'\n]);\n\n/**\n * Holds states for the app, which will optionally persist if local storgae is\n * available.\n * The distinction of setString, setObject, setBoolean was necessary\n * because we have to assume only the \"string\" type is supported\n * currently for local storage on all browsers.\n */\nexport class StateStore {\n  constructor() {\n    this._settings = {};\n    this._state = {};\n    this._localStorageAvailable = storageAvailable('localStorage');\n  }\n\n  init(settings) {\n    this._settings = settings;\n  }\n\n  getSetting(...keys) {\n    let value = this._settings;\n\n    for (let key of keys) {\n      value = value[key];\n      if (value === undefined) {\n        return undefined;\n      }\n    }\n    return value;\n  }\n\n  // For values that are not persisted\n  getTransient(key) {\n    this._checkKey(key);\n    return this._settings[key];\n  }\n\n  // For values that are not persisted\n  setTransient(key, value) {\n    //logger.debug('StateStore#setTransient', key, value);\n    this._checkKey(key);\n    this._settings[key] = value;\n  }\n\n  getString(key) {\n    //logger.debug('StateStore#getString', key);\n    this._checkKey(key);\n    let value = this._settings[key];\n    if (!value) {\n      value = this._localStorageAvailable ? localStorage.getItem(key) : null;\n      this._settings[key] = value;\n    }\n    return value;\n  }\n\n  setString(key, value) {\n    //logger.debug('StateStore#setString', key, value, this._localStorageAvailable);\n    this._checkKey(key);\n    this._settings[key] = value;\n    if (this._localStorageAvailable) {\n      localStorage.setItem(key, value);\n    }\n  }\n\n  getBoolean(key) {\n    return this.getString(key) === 'true';\n  }\n\n  setBoolean(key, value) {\n    this.setString(key, value ? 'true' : 'false');\n  }\n\n  getObject(key) {\n    logger.debug('StateStore#getObject', key);\n    this._checkKey(key);\n    const value = this.getString(key);\n    return value ? JSON.parse(value) : null;\n  }\n\n  setObject(key, value) {\n    logger.debug('StateStore#setObject', key, value);\n    this._checkKey(key);\n    const stringValue = JSON.stringify(value);\n    this.setString(key, stringValue);\n  }\n\n  _checkKey(key) {\n    if (!registeredKeys.has(key)) {\n      throw 'ERROR Invalid key for StateStore ' + key;\n    }\n  }\n}\n\n/**\n * param {string} type \"localStorage\" or \"sessionStorage\"\n */\nfunction storageAvailable(type) {\n  try {\n    const storage = window[type],\n      x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nlet _instance = null;\n\nexport default function getStateStore() {\n  if (!_instance) {\n    _instance = new StateStore();\n  }\n  return _instance;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/state-store.js","import getLogger from '../util/logger';\nimport MiradorProxy from './mirador-proxy';\nimport WindowProxy from './window-proxy';\n\nconst logger = getLogger();\n\nclass MiradorProxyManager {\n  constructor() {\n    // Mirador instance doesn't have an ID. The ID here is conferred by\n    // the MiradorProxyManager.\n    this._miradorProxiesMap = {}; // Mirador instances { id: miradorInstance }\n  }\n\n  addMirador(miradorId, mirador) {\n    //logger.debug('MiradorProxyManager#addMirador', mirador);\n    let miradorProxy = this._miradorProxiesMap[miradorId];\n    if (miradorProxy) {\n      throw 'MiradorProxyManager#addMirador duplicate ID ' + miradorId;\n    } else {\n      miradorProxy = new MiradorProxy(mirador, miradorId);\n      this._miradorProxiesMap[miradorId] = miradorProxy;\n    }\n    return miradorProxy;\n  }\n\n  getMiradorProxies() {\n    return Object.values(this._miradorProxiesMap);\n  }\n\n  getMiradorProxy(miradorId) {\n    //logger.debug('MiradorProxyManager#getMiradorProxy miradorId:', miradorId, 'proxies:', this._miradorProxiesMap);\n    return this._miradorProxiesMap[miradorId] || null;\n  }\n\n  getMiradorProxyByWindowId(windowId) {\n    for (let miradorProxy of Object.values(this._miradorProxiesMap)) {\n      let window = miradorProxy.getWindowById(windowId);\n      if (window) {\n        return miradorProxy;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @returns {WindowProxy[]} a list of window proxies for all windows in all Mirador instances\n   */\n  getAllWindowProxies() {\n    let windowProxies = [];\n\n    for (let miradorProxy of Object.values(this._miradorProxiesMap)) {\n      windowProxies = windowProxies.concat(miradorProxy.getWindowProxies());\n    }\n    return windowProxies;\n  }\n\n  getWindowProxyById(windowId) {\n    //logger.debug('MiradorProxyManager#getWindowProxyById windowId:', windowId);\n    const window = this.getWindowById(windowId);\n    return window ? new WindowProxy(window) : null;\n  }\n\n  getWindowById(windowId) {\n    //logger.debug('MiradorProxyManager#getWindowById windowId:', windowId);\n    let window = null;\n\n    for (let miradorProxy of Object.values(this._miradorProxiesMap)) {\n      window = miradorProxy.getWindowById(windowId);\n      if (window) {\n        return window;\n      }\n    }\n    return null;\n  }\n\n  getCurrentCanvasIdByWindowId(windowId) {\n    const windowProxy = this.getWindowProxyById(windowId);\n    if (windowProxy) {\n      return windowProxy.getCurrentCanvasId();\n    } else {\n      return null;\n    }\n  }\n\n  // XXX This works because only one Mirador window is assumed.\n  // It should be refactored later.\n  anyId() {\n    return Object.keys(this._miradorProxies)[0];\n  }\n\n  // Subscribe to the same event from all Mirador instances\n  subscribe(eventName, callback) {\n    //logger.debug('MiradorProxyManager#subscribe ', eventName, callback);\n    for (let miradorProxy of Object.values(this._miradorProxiesMap)) {\n      miradorProxy.subscribe(eventName, callback);\n    }\n  }\n}\n\nlet instance = null;\n\nfunction getMiradorProxyManager(destroyOld) {\n  if (!instance || destroyOld) {\n    instance = new MiradorProxyManager();\n  }\n  return instance;\n};\n\nexport default getMiradorProxyManager;\n\nMirador.getMiradorProxyManager = getMiradorProxyManager; // to be called from Mirador core.\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/mirador-proxy/mirador-proxy-manager.js","require('../css/main.less');\n\nimport './extension/main';\nimport {AnnotationExplorer, annoUtil} from './import';\nimport AnnotationSource from './annotation-data/annotation-source';\nimport AnnotationTocCache from './annotation-data/annotation-toc-cache';\nimport fatalError from './util/fatal-error';\nimport getAnnotationCache from './annotation-data/annotation-cache';\nimport getConfigFetcher from './config/config-fetcher';\nimport getLogger from './util/logger';\nimport getPageController from './page-controller';\nimport getStateStore from './state-store';\nimport Grid from './layout/grid';\nimport './util/jquery-tiny-pubsub-trace'; // import this only for debugging!\n\nconst logger = getLogger();\nlet instance = null;\nlet annotationExplorer = null;\nlet annotationSource = null;\n\n\nexport class App {\n  constructor() {\n    this._setupLogger();\n    this._state = getStateStore();\n    this.initHandlebars();\n  }\n\n  async init(settings) {\n    logger.debug('App#init settings:', settings);\n    await this.initState(settings);\n    await getAnnotationCache(); // wait for annotation cache to be set up\n    this._preConfigureTinyMce(settings.mirador.buildPath + '/');\n    this._setupAnnotationTocCache();\n    const grid = new Grid(settings.ui.rootElementId);\n\n    this._pageController = getPageController();\n    this._pageController.init({\n      grid: grid,\n      settings: settings,\n      state: this._state\n    });\n\n    return this;\n  }\n\n  initHandlebars() {\n    Handlebars.registerHelper('t', function(i18nKey) {\n      return i18next.t(i18nKey);\n    });\n  }\n\n  async initState(settings) {\n    logger.debug('App#initState settings:', settings);\n    const state = this._state;\n    state.init(settings);\n\n    const explorer = this.getAnnotationExplorer();\n    const layers = await explorer.getLayers();\n    state.setTransient('annotationLayers', layers);\n  }\n\n  _setupLogger() {\n    if (window.location.hash === '#debug') {\n      logger.setLogLevel(logger.DEBUG);\n    } else {\n      logger.setLogLevel(logger.INFO);\n    }\n    annoUtil.setLogger(logger);\n  }\n\n  _preConfigureTinyMce(miradorBuildPath) {\n    logger.debug('App#preConfigureTinyMce buildPath:', miradorBuildPath);\n    tinymce.base = miradorBuildPath + '/';\n    tinymce.setup();\n  }\n\n  _setupAnnotationTocCache() {\n    const tocSpec = this._state.getSetting('annotations', 'tocSpec');\n    if (tocSpec) {\n      this._annotationTocCache = new AnnotationTocCache({\n        tocSpec: tocSpec,\n        annotationExplorer: this.getAnnotationExplorer()\n      });\n    } else {\n      this._annotationTocCache = null;\n    }\n  }\n\n  getAnnotationExplorer() {\n    if (!annotationExplorer) {\n      annotationExplorer = new AnnotationExplorer({\n        dataSource: this.getAnnotationSource(),\n        logger: logger\n      });\n    }\n    return annotationExplorer;\n  }\n\n  getAnnotationSource() {\n    if (!annotationSource) {\n      const annoStoreUrl = this._state.getSetting('annotations', 'store');\n      annotationSource = new AnnotationSource({\n        prefix: annoStoreUrl,\n        state: this._state\n      });\n    }\n    return annotationSource;\n  }\n\n  getAnnotationTocCache() {\n    return this._annotationTocCache;\n  }\n}\n\nexport const getApp = () => {\n  if (!instance) {\n    instance = new App();\n  }\n  return instance;\n};\n\nexport default getApp;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/app.js","import getLogger from '../util/logger';\n\nconst logger = getLogger();\n\nexport default class WindowProxy {\n  constructor(window) {\n    //logger.debug('WindowProxy#constructor window:', window);\n    this.window = window;\n  }\n\n  /**\n   * ID of the window\n   */\n  getWindowId() {\n    return this.window.id;\n  }\n\n  getManifest() {\n    return this.window.manifest;\n  }\n\n  getCurrentCanvasId() {\n    return this.window.canvasID;\n  }\n\n  getCurrentCanvas() {\n    const canvases = this.getCanvases();\n    const canvasId = this.getCurrentCanvasId();\n    const matches = canvases.filter(canvas => canvas['@id'] === canvasId);\n    return matches[0];\n  }\n\n  setCurrentCanvasId(canvasId, options) {\n    //logger.debug('WindowProxy#setCurrentCanvasId canvasId:', canvasId, 'options', options);\n    this.window.setCurrentCanvasID(canvasId, options);\n  }\n\n  getImageView() {\n    return this.window.focusModules.ImageView;\n  }\n\n  /**\n   * Annotation endpoint\n   */\n  getEndPoint() {\n    return this.window.endpoint;\n  }\n\n  getCanvases() {\n    return this.window.manifest.getCanvases();\n  }\n\n  getAnnotationsList() {\n    return this.window.annotationsList;\n  }\n\n  getSvgOverlay() {\n    const drawTool = this.getDrawTool();\n    return drawTool ? drawTool.svgOverlay : null;\n  }\n\n  getDrawTool() {\n    const imageView = this.getImageView();\n    return imageView ? imageView.annotationsLayer.drawTool : null;\n  }\n\n  getSidePanel() {\n    return this.window.sidePanel;\n  }\n\n  /**\n   * @param {*} klass CSS class for the root element of sidebar content (child of .tabContentArea)\n   */\n  getSidePanelTabContentElement(klass) {\n    return this.getSidePanel().element.find('.tabContentArea > .' + klass);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/mirador-proxy/window-proxy.js","import {Anno, annoUtil} from './import';\nimport getApp from './app';\nimport getLogger from './util/logger';\nimport getMiradorProxyManager from './mirador-proxy/mirador-proxy-manager';\nimport LayoutConfigParser from './layout/layout-config-parser';\nimport MiradorWrapper from './mirador-wrapper';\nimport session from './session';\n\nexport default function getPageController() {\n  if (!instance) {\n    instance = new PageController();\n  }\n  return instance;\n};\n\nlet instance = null;\nlet logger = getLogger();\n\n/**\n * Code for the HTML page that hosts Mirador instance(s)\n * The page contains Mirador and  surrounding components, e.g., annoatation windows.\n */\nclass PageController {\n  init(options) {\n    this.options = jQuery.extend({\n      grid: null,\n      settings: null, // settings retrieved from remote API\n      state: null\n    }, options);\n    logger.debug('PageController#constructor options:', options);\n\n    const miradorOptions = jQuery.extend(this.options.settings, {\n      miradorId: Mirador.genUUID(),\n      defaultSettings: Mirador.DEFAULT_SETTINGS,\n      isEditor: session.isEditor()\n    });\n\n    this._miradorWrapper = this._createMirador(miradorOptions);\n    this._miradorProxy = this._miradorWrapper.getMiradorProxy();\n    this._miradorId = this._miradorProxy.getId();\n\n    this._tocSpec = this.options.state.getSetting('annotations', 'tocSpec');\n    this._annotationTocCache = getApp().getAnnotationTocCache();\n    this._annotationExplorer = getApp().getAnnotationExplorer();\n\n    this._bindEvents(miradorOptions);\n  }\n\n  // TODO: make it per Mirador instance\n  getConfig() {\n    return this.miradorWrapper.getConfig();\n  }\n\n  _createMirador(miradorOptions) {\n    try {\n      // Should create a container in the grid first before instantiating Mirador\n      this.options.grid.addMiradorWindow(miradorOptions.miradorId);\n      return new MiradorWrapper({\n        grid: this.options.grid,\n        miradorOptions: miradorOptions\n      });\n    } catch(e) {\n      const msg = 'PageController#_createMirador ' + e;\n      logger.error(msg);\n      throw msg;\n    }\n  }\n\n  /**\n   * Show annotation in annotation window\n   */\n  async _showAnnotation(windowId, annoId) {\n    logger.debug('PageController#showAnnotation windowId:', windowId, 'annoId:' + annoId,\n      'defaultLayer:', this._tocSpec ? this._tocSpec.defaultLayer : null);\n    const grid = this.options.grid;\n    const windowProxy = this._miradorProxy.getWindowProxyById(windowId);\n    const canvasId = windowProxy.getCurrentCanvasId();\n    const annotations = await this._annotationExplorer.getAnnotations({ canvasId: canvasId });\n\n    let annotation = annotations.filter(anno => anno['@id'] === annoId)[0];\n    let layerId = annotation.layerId;\n\n    if (this._tocSpec && this._tocSpec.defaultLayer) {\n      const derivedAnnotation = await this._getAnnotationByTagsAndLayer(Anno(annotation).tags,\n        this._tocSpec.defaultLayer, canvasId);\n      layerId = this._tocSpec.defaultLayer;\n\n      if (derivedAnnotation) {\n        annotation = derivedAnnotation;\n      } else {\n        logger.warning('PageController#_showAnnotation no annotation found for layer', layerId);\n      }\n    }\n\n    const targetWindow = grid.getAnnotationWindowByLayer(layerId);\n\n    if (targetWindow) {\n      //await targetWindow.goToAnnotation(annotation['@id'], canvasId); //XXX dealt with by annotation window\n    } else {\n      if (annotation) {\n        const annoWindow =  await grid.addAnnotationWindow({\n          miradorId: this._miradorId,\n          imageWindowId: windowId,\n          layerId: layerId,\n          annotationId: annotation['@id']\n        }).catch(reason => {\n          logger.error('PageController#_showAnnotation addAnnotationWindow failed <- ' + reason);\n        });\n      } else {\n        logger.error('PageController#_showAnnotation annotation not found in annotation window, annoId: ' + annotation['@id']);\n      }\n    }\n  }\n\n  async _getAnnotationByTagsAndLayer(tags, layerId, canvasId) {\n    const toc = await this._annotationTocCache.getToc(canvasId);\n    const tocNode = toc.getNodeFromTags(tags);\n\n    if (!tocNode) {\n      logger.warning('PageController#_getAnnotationByTagsAndLayer tocNode not found for tags', tags);\n      return null;\n    }\n\n    let annos = annoUtil.findAllAnnotationsForTocNode(tocNode)\n    .filter(anno => {\n      return anno.layerId === layerId;\n    });\n    return annos[0];\n  }\n\n /**\n   * Optionally create annotations windows after checking parameters.\n   * It will examine the parameters and determine how many annotations\n   * to create and how to configure them.\n   */\n  _createAnnotationWindows(imageWindowId, options) {\n    const toc = getApp().getAnnotationExplorer().getAnnotationToc();\n    const parser = new LayoutConfigParser({\n      miradorId: options.miradorId,\n      imageWindowId: imageWindowId,\n      layerIds: options.layerIds,\n      toc: toc,\n      tocTags: options.tocTags,\n      annotationId: options.annotationId\n    });\n    const windowsConfig = parser.getWindowsConfig();\n    logger.debug('PageController#_createAnnotationWindows windowsConfig:', windowsConfig);\n    if (windowsConfig) {\n      this._miradorProxy.publish('YM_DISPLAY_ON');\n      jQuery.publish('YM_ADD_WINDOWS', windowsConfig);\n    }\n  }\n\n  _processUrlOptions(imageWindowId, options) {\n    logger.debug('PageController#_processUrlOptions imageWindowId:', imageWindowId, 'options:', options, '_urlOptionsProcessed:', this._urlOptionsProcessed);\n    if (this._urlOptionsProcessed) { // run this function only once\n      return;\n    } else {\n      this._urlOptionsProcessed = true;\n\n      if (this.options.state.getSetting('mirador', 'annotationsOverlay', 'showByDefault') ||\n        options.annotationId)\n      {\n        this._miradorProxy.publish('YM_DISPLAY_ON');\n      }\n\n      if (options.annotationId) {\n        const handler = event => {\n          logger.debug('PageController#_processUrlOptions annotationsRendered');\n          this._zoomToAnnotation(options.annotationId, imageWindowId);\n          this._miradorProxy.unsubscribe('annotationsRendered.' + imageWindowId, handler);\n        }\n        this._miradorProxy.subscribe('annotationsRendered.' + imageWindowId, handler);\n      }\n      this._createAnnotationWindows(imageWindowId, options);\n    }\n  }\n\n  _findCanvasAnnotationsFromTargets(sourceAnnotation, allAnnotations, canvasId) {\n    logger.debug('PageController#_findCanvasAnnotationsFromTargets sourceAnnotation:', sourceAnnotation, 'allAnnotations:', allAnnotations, 'canvasId:', canvasId);\n    const annoMap = {};\n    for (let anno of allAnnotations) {\n      annoMap[anno['@id']] = anno;\n    }\n    return annoUtil.findTransitiveTargetAnnotations(sourceAnnotation, annoMap)\n    .filter(anno => {\n      for (let target of Anno(anno).targets) {\n        if (target.full === canvasId) {\n          return true;\n        }\n      }\n    });\n  }\n\n  _zoomToAnnotation(annotationId, imageWindowId) {\n    const imageWindowProxy = this._miradorProxy.getWindowProxyById(imageWindowId);\n    const imageView = imageWindowProxy.getImageView();\n    const canvasId = imageWindowProxy.getCurrentCanvasId();\n    const allAnnotations = imageWindowProxy.getAnnotationsList();\n    let annos = allAnnotations.filter(anno => anno['@id'] === annotationId);\n    annos = this._findCanvasAnnotationsFromTargets(annos[0], allAnnotations, canvasId);\n\n    if (annos.length > 0) {\n      if (annos.length > 1) {\n        logger.error('PageController#_zoomToAnnotation', annos.length, 'duplicate annos:', annos, 'imageWindowId:', imageWindowId);\n      }\n      logger.debug('PageController#_zoomToAnnotation canvas annos:', annos);\n      imageView.zoomToAnnotation(annos[0]);\n      imageView.panToAnnotation(annos[0]);\n      imageView.annotationsLayer.drawTool.updateHighlights(annos[0]);\n    } else {\n      logger.error('PageController#_zoomToAnnotation annotation not found: annotationId:', annotationId, 'imageWindowId:', imageWindowId);\n    }\n  }\n\n  _bindEvents(options) {\n    logger.debug('PageController#_bindEvents options:', options);\n    const _this = this;\n\n    jQuery(window).resize(function() {\n      _this.options.grid.resize();\n    });\n\n    this._miradorProxy.subscribe('ANNOTATIONS_LIST_UPDATED', (event, params) => {\n      logger.debug('PageController:SUB:ANNOTATIONS_LIST_UPDATED params:', params);\n\n      if (this._miradorProxy.shouldIgnoreEvent('ANNOTATIONS_LIST_UPDATED')) {\n        this._miradorProxy.unmarkEventToBeIgnored('ANNOTATIONS_LIST_UPDATED');\n        return;\n      }\n      this._processUrlOptions(params.windowId, options);\n    });\n\n    this._miradorProxy.subscribe('YM_IMAGE_WINDOW_TOOLTIP_ANNO_CLICKED', async (event, windowId, annoId) => {\n      logger.debug('PageController:SUB:YM_IMAGE_WINDOW_TOOLTIP_ANNO_CLICKED windowId: ' + windowId  + ', annoId: ' + annoId);\n      const windowProxy = this._miradorProxy.getWindowProxyById(windowId);\n      const canvasId = windowProxy.getCurrentCanvasId();\n      const tocPanel = windowProxy.getSidePanelTabContentElement('ym-annotation-toc');\n      const annoTocMenu = tocPanel.data('AnnotationTableOfContent');\n\n      this._showAnnotation(windowId, annoId);\n\n      if (annoTocMenu) {\n        const toc = await this._annotationTocCache.getToc(canvasId);\n        const annotation = toc.annotations.filter(anno => anno['@id'] === annoId)[0];\n\n        if (annotation) {\n          annoTocMenu.scrollToTags(annotation.tocTags);\n        }\n      }\n    });\n\n    jQuery.subscribe('ANNOWIN_ANNOTATION_FOCUSED', (event, params) => {\n      logger.debug('PageController has received event ANNOWIN_ANNOTATION_FOCUSED with options', params);\n      const windowProxy = this._miradorProxy.getWindowProxyById(params.imageWindowId);\n      const canvasId = windowProxy.getCurrentCanvasId();\n      const imageView = windowProxy.getImageView();\n      const annotations = windowProxy.getAnnotationsList();\n      const annoMap = {};\n\n      if (params.canvasId === windowProxy.getCurrentCanvasId()) { // the clicked annotation belong to the current canvas\n        for (let anno of annotations) {\n          annoMap[anno['@id']] = anno;\n        }\n        let anno = params.annotation;\n\n        if (!annoUtil.hasTargetOnCanvas(anno)) {\n          let annos = this._findCanvasAnnotationsFromTargets(anno, annotations, canvasId)\n          anno = annos[0];\n        }\n        if (anno) {\n          imageView.zoomToAnnotation(anno);\n          imageView.panToAnnotation(anno);\n          imageView.annotationsLayer.drawTool.updateHighlights(anno);\n        } else {\n          logger.error('PageController:SUB:ANNOWIN_ANNOTATION_FOCUSED annotation not found', params.annotation);\n        }\n      } else { // need to load the canvas that the annotation is targeting\n        imageView._annotationToBeFocused = params.annotation;\n        windowProxy.setCurrentCanvasId(params.canvasId);\n      }\n    });\n\n    jQuery.subscribe('YM_ANNOTATION_TOC_TAGS_SELECTED', async (evnet, windowId, canvasId, tags) => {\n      logger.debug('PageController:SUB:YM_ANNOTATION_TOC_TAGS_SELECTED imageWindow:', windowId, 'canvasId:', canvasId, 'tags:', tags);\n      const grid = this.options.grid;\n      const layerId = this._tocSpec.defaultLayer;\n      let annoWindow = grid.getAnnotationWindowByLayer(layerId);\n\n      try {\n        this._miradorProxy.publish('YM_DISPLAY_ON');\n        // Give some time for displayOn to run\n        await new Promise((resolve, reject) => {\n          setTimeout(() => {\n            resolve();\n          }, 0);\n        });\n      } catch(e) {\n        logger.error('PageController#SUB:YM_ANNOTATION_TOC_TAGS_SELECTED failed to enable annotation layer');\n      }\n\n      const annotationWindows = this.options.grid.getAnnotationWindows();\n      for (let annoWin of Object.values(annotationWindows)) {\n        annoWin.ignoreEvent('ANNOTATIONS_LIST_UPDATED', 35000);\n      }\n\n      await this._miradorWrapper.zoomToTags(windowId, canvasId, tags).catch(reason => {\n        logger.error('PageController:SUB:YM_ANNOTATION_TOC_TAGS_SELECTED zoomToTags failed:', reason);\n      });\n\n      if (!annoWindow) {\n        annoWindow =  await grid.addAnnotationWindow({\n          miradorId: this._miradorId,\n          imageWindowId: windowId,\n          layerId: layerId,\n          tocTags: tags\n        }).catch(reason => {\n          logger.error('PageController#_showAnnotation addAnnotationWindow failed <- ' + reason);\n        });\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page-controller.js","export default {\n  serverSettings: null,\n\n  /**\n   * Returns true if the user is logged in via CAS.\n   */\n  loggedIn: function() {\n    return Cookies.get('loggedIn') == 'true';\n  },\n\n  isEditor: function() {\n    return Cookies.get('isEditor') == 'true';\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/session.js","import getLogger from './logger';\n\nexport default {\n  // Return true if the device is mobile or a tablet.\n  isMobileOrTablet: function() {\n    return (function(a) {\n      if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) {\n        return true;\n      } else {\n        return false;\n      }\n    })(navigator.userAgent||navigator.vendor||window.opera);\n  },\n\n  getValues: function(object) {\n    var values = [];\n    jQuery.each(object, function(key, value) {\n      values.push(value);\n    });\n    return values;\n  },\n\n  waitUntil: function(testFunc, execFunc, ms, count) {\n    const _this = this;\n    if (ms === undefined) {\n      ms = 100;\n    }\n    if (count === undefined) {\n      count = 1;\n    }\n    if (count > 5) {\n      this.logger.debug('util.waitUntil max try num exceeded: giving up');\n      this.logger.debug('testFunc: ' + testFunc);\n      this.logger.debug('execFunc: ' + execFunc);\n      return;\n    }\n    if (testFunc()) {\n      execFunc();\n    } else {\n      this.logger.debug('util.waitUntil trial ' + count + ' failed. Retrying in ' + (ms*2) + ' ms.');\n      setTimeout(function() {\n        _this.waitUntil(testFunc, execFunc, ms * 2, count + 1);\n      }, ms);\n    }\n  },\n\n  directionClasses: [\n    'horizontal-lr',\n    'horizontal-rl',\n    'vertical-lr',\n    'vertical-rl'\n  ],\n\n  setTextDirectionClass: function(jQueryElem, newClass) {\n    if (!this.directionClasses.includes(newClass)) {\n      getLogger().debug('util.setTextDriectionClass no class provided, using horizontal-lr');\n      newClass = 'horizontal-lr';\n    }\n    for (let klass of this.directionClasses) {\n      if (klass === newClass) {\n        jQueryElem.addClass(klass);\n      } else {\n        jQueryElem.removeClass(klass);\n      }\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util/util.js","import {Anno} from '../import';\nimport getAnnotationCache from './annotation-cache';\nimport getApp from '../app';\nimport {getEndpoint} from './yale-endpoint';\nimport getLogger from '../util/logger';\nimport getModalAlert from '../widgets/modal-alert';\nimport getPageController from '../page-controller';\nimport getStateStore from '../state-store';\n\nconst logger = getLogger();\n\n// Implements inteface between Joosugi annotation explorer and the annotation server\nexport default class AnnotationSource {\n  constructor(options) {\n    this._prefix = options.prefix;\n    this._state = options.state;\n\n    /*\n    this.options = jQuery.extend({\n      prefix: null,\n      state: getStateStore()\n    }, options);\n    */\n    this._layers = null;\n  }\n\n  async getLayers() {\n    logger.debug('AnnotationSource#getLayers');\n    let layers = null;\n\n    if (this._layers) {\n      logger.debug('AnnotationSource#getLayers hit cache', this._layers);\n      layers = this._layers;\n    } else {\n      layers = await this._getRemoteLayers();\n      this._updateLayerIndex(layers);\n    }\n\n    return layers;\n  }\n\n  _getRemoteLayers() {\n    return new Promise((resolve, reject) => {\n      const projectId = this._state.getSetting('auth', 'groupId');\n      let url = this._prefix + '/layers';\n\n      //if (projectId && !disableAuthz) {\n      if (projectId) {\n        url += '?group_id=' + projectId;\n      }\n      logger.debug('AnnotationSource#_getRemoteLayers url:', url);\n\n      jQuery.ajax({\n        url: url,\n        type: 'GET',\n        dataType: 'json',\n        contentType: 'application/json; charset=utf-8',\n        success: (data, textStatus, jqXHR) => {\n          logger.debug('AnnotationSource#getLayers layers: ', data);\n          this._layers = data;\n          resolve(data);\n        },\n        error: (jqXHR, textStatus, errorThrown) => {\n          const msg = 'AnnotationSource#getLayers error status code: ' +\n            jqXHR.status + ', textStatus: ' + textStatus +\n            ', errorThrown: ' + errorThrown + ', URL: ' + url;\n          logger.error(msg);\n          reject(msg);\n        }\n      });\n    });\n  }\n\n  _updateLayerIndex(layers) {\n    logger.debug('AnnotationSource#_updateLayerIndex');\n\n    if (!this._state.getTransient('layerIndexMap')) {\n      const map = {};\n      let count = 0;\n      layers.forEach((layer) => {\n        map[layer['@id']] = count;\n        ++count;\n      });\n      this._state.setTransient('layerIndexMap', count > 0 ? map : null);\n    }\n    return layers;\n  }\n\n  /**\n   * Options: {\n   *   canvasId: <string>, // required,\n   *   layerId: <string> // optional\n   * }\n   *\n   * @param {object} options\n   */\n  async getAnnotations(options) {\n    const canvasId = options.canvasId;\n    const layerId = options.layerId;\n    const cache = await getAnnotationCache();\n    let annotations = null;\n\n    await getModalAlert().show('Retrieving annotations...');\n\n    if (cache) {\n      annotations = await cache.getAnnotationsPerCanvas(canvasId);\n      logger.debug('AnnotationSource#getAnnotations from cache:', annotations);\n    }\n\n    if (!annotations) {\n      annotations = await this._getRemoteAnnotations(canvasId);\n\n      if (cache) {\n        await cache.setAnnotationsPerCanvas(canvasId, annotations);\n      }\n    }\n    this._attachEndpoint(annotations);\n\n    if (layerId) {\n      annotations = annotations.filter((anno) => anno.layerId === layerId);\n    }\n\n    getModalAlert().hide();\n\n    return annotations;\n  }\n\n  _attachEndpoint(annotations) {\n    logger.debug('AnnotationSource#_attachEndpoint annotations:', annotations);\n    const endpoint = getEndpoint();\n\n    for (let anno of annotations) {\n      anno.endpoint = endpoint;\n    }\n  }\n\n  _detachEndpoint(annotations) {\n    logger.debug('AnnotationSource#_detachEndpoint annotations:', annotations);\n    for (let anno of annotations) {\n      delete anno.endpoint;\n    }\n  }\n\n  _getRemoteAnnotations(canvasId) {\n    logger.debug('AnnotationSource#_getRemoteAnnotations canvas: ' + canvasId);\n    return new Promise((resolve, reject) => {\n      const url = this._prefix + '/getAnnotationsViaList?canvas_id=' + encodeURIComponent(canvasId);\n      logger.debug('AnnotationSource#_getRemoteAnnotations url: ', url);\n      const annotations = [];\n\n      jQuery.ajax({\n        url: url,\n        type: 'GET',\n        dataType: 'json',\n        contentType: 'application/json; charset=utf-8',\n        success: (data, textStatus, jqXHR) => {\n          logger.debug('AnnotationSource#_getRemoteAnnotations data: ', data);\n          try {\n            const annotations = [];\n\n            for (let item of data) {\n              let annotation = item.annotation;\n              annotation.layerId = item.layer_id;\n              annotations.push(this._toMiradorAnnotation(annotation));\n            }\n            resolve(annotations);\n          } catch(e) {\n            logger.error('AnnotationSource#_getRemoteAnnotations error parsing data for canvas', canvasId,\n              'data:', data, 'error:', e);\n            resolve([]);\n          }\n        },\n        error: (jqXHR, textStatus, errorThrown) => {\n          const msg = 'AnnotationSource#getAnnotations failed to get annotations from ' + url;\n          reject(msg);\n        }\n      });\n    });\n  }\n\n  async createAnnotation(oaAnnotation) {\n    logger.debug('AnnotationSource#createAnnotation oaAnnotation:', oaAnnotation);\n    const cache = await getAnnotationCache();\n    const layerId = oaAnnotation.layerId;\n\n    const annotation = this._toBackendAnnotation(oaAnnotation);\n\n    const url = this._prefix + '/annotations';\n    const request = {\n      layer_id: layerId,\n      annotation: annotation\n    };\n\n    logger.debug('AnnotationSource#createAnnotation payload:', request);\n\n    return new Promise((resolve, reject) => {\n      jQuery.ajax({\n        url: url,\n        type: 'POST',\n        dataType: 'json',\n        data: JSON.stringify(request),\n        contentType: 'application/json; charset=utf-8',\n        success: async data => {\n          logger.debug('AnnotationSource#createAnnotation creation successful on the annotation server:', data);\n          const annotation = data;\n          const oaAnnotation = this._toMiradorAnnotation(annotation);\n          oaAnnotation.layerId = layerId;\n          oaAnnotation.endpoint = getEndpoint();\n          if (cache) {\n            await cache.invalidateAllCanvases();\n          }\n          const tocCache = getApp().getAnnotationTocCache();\n          if (tocCache) {\n            tocCache.invalidate();\n          }\n          resolve(oaAnnotation);\n        },\n        error: (jqXHR, textStatus, errorThrown) => {\n          const msg = 'Failed to create annotation: ' + textStatus + ' ' + jqXHR.status + ' ' + errorThrown;\n          logger.error(msg);\n          reject(msg);\n        }\n      });\n    });\n  }\n\n  async updateAnnotation(oaAnnotation) {\n    const cache = await getAnnotationCache();\n    const annotation = this._toBackendAnnotation(oaAnnotation);\n    const url = this._prefix + '/annotations';\n    const data = {\n      layer_id: [oaAnnotation.layerId],\n      annotation: annotation\n    };\n\n    logger.debug('AnnotationSource#updateAnnotation payload:', data);\n\n    return new Promise((resolve, reject) => {\n      jQuery.ajax({\n        url: url,\n        type: 'PUT',\n        dataType: 'json',\n        contentType: 'application/json; charset=utf-8',\n        data: JSON.stringify(data),\n        success: async (data, textStatus, jqXHR) => {\n            logger.debug('AnnotationSource#updateAnnotation successful', data);\n            const annotation = this._toMiradorAnnotation(data);\n            annotation.layerId = oaAnnotation.layerId;\n            annotation.endpoint = getEndpoint();\n\n            if (cache) {\n              await cache.invalidateAllCanvases();\n            }\n\n            const tocCache = getApp().getAnnotationTocCache();\n\n            if (tocCache) {\n              tocCache.invalidate();\n            }\n\n            resolve(annotation);\n        },\n        error: (jqXHR, textStatus, errorThrown) => {\n          const msg = 'Failed to update annotation: ' + textStatus + ' ' + jqXHR.status + ' ' + errorThrown;\n          reject(msg);\n        }\n      });\n    });\n  }\n\n  async deleteAnnotation(annotationId) {\n    logger.debug('AnnotationSource#deleteAnnotations annotationId:', annotationId);\n    const cache = await getAnnotationCache();\n    const url = this._prefix + '/' + annotationId.replace(/^https?:\\/\\/.*?(\\/.*)$/, '$1');\n    //const url = annotationId;\n\n    return new Promise((resolve, reject) => {\n      jQuery.ajax({\n        url: url,\n        type: 'DELETE',\n        dataType: 'json',\n        contentType: 'application/json; charset=utf-8',\n        success: async (data, textStatus, jqXHR) => {\n          logger.debug('AnnotationSource#deleteAnnotation success data:', data);\n          if (cache) {\n            await cache.invalidateAllCanvases();\n          }\n          const tocCache = getApp().getAnnotationTocCache();\n          if (tocCache) {\n            tocCache.invalidate();\n          }\n          resolve();\n        },\n        error: (jqXHR, textStatus, errorThrown) => {\n          const msg = 'AnnotationSource#deleteAnnotation failed for annotationId: ' + annotationId;\n          reject(msg);\n        }\n      });\n    });\n  }\n\n  async updateAnnotationListOrder(canvasId, layerId, annoIds) {\n    const cache = await getAnnotationCache();\n    const url = this._prefix + '/resequenceList';\n    const data = {\n      canvas_id: canvasId,\n      layer_id: layerId,\n      annotation_ids: annoIds\n    };\n\n    return new Promise((resolve, reject) => {\n      jQuery.ajax({\n        url: url,\n        type: 'PUT',\n        dataType: 'json',\n        contentType: 'application/json; charset=utf-8',\n        data: JSON.stringify(data),\n        success: async (data, textStatus, jqXHR) => {\n          logger.debug('AnnotationSource#updateAnnotationListOrder successful', data);\n          if (cache) {\n            await cache.invalidateAllCanvases();\n          }\n          const tocCache = getApp().getAnnotationTocCache();\n          if (tocCache) {\n            tocCache.invalidate();\n          }\n          resolve(data);\n        },\n        error: (jqXHR, textStatus, errorThrown) => {\n          const msg = 'AnnotationSource#updateAnnotation failed: ' + textStatus + ' ' + jqXHR.status + ' ' + errorThrown;\n          logger.error(msg);\n          reject(msg);\n        }\n      });\n    });\n  }\n\n  // Convert annotation to have format required by Mirador\n  _toMiradorAnnotation(annotation) {\n    const anno = jQuery.extend(true, {}, annotation);\n    let target = anno.on;\n\n    if (target && target.selector && target.selector['@type'] === 'oa:Choice') { // if the new (dual) mirador strategy format\n      target = [target];\n    }\n\n    anno.on = target;\n\n    return anno;\n  }\n\n  // Convert annotation to correct format to be saved in backend\n  _toBackendAnnotation(annotation) {\n    delete annotation.endpoint;\n    delete annotation.target;\n    delete annotation.targetedBy;\n\n    const anno = jQuery.extend(true, {}, annotation);\n    let target = anno.on;\n\n    // XXX temporary fix until the annotation server supports multiple targets\n    if (target instanceof Array) {\n      if (target.length !== 1) {\n        logger.error('AnnotationSource#__toBackendAnnotation unexpected target length', target.length);\n      }\n      target = target[0];\n    }\n\n    anno.target = target;\n\n    return anno;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/annotation-source.js","// Show messages for an irrecoverable error after wiping out everything\nexport default function fatalError(error, ...args) {\n  console.log('ERROR:', error);\n  const rootElem = jQuery(template());\n  if (error === 'FATAL') {\n    throw error;\n  } else {\n    args.push(error);\n    for (let arg of args) {\n      rootElem.append(jQuery('<p>' + arg + '</p>'));\n    }\n    jQuery(document.body).empty().append(rootElem);\n    throw 'FATAL';\n  }\n}\n\nconst template = Handlebars.compile([\n  '<div class=\"fatal_error\">',\n  '  <div class=\"header\">Error</div>',\n  '</div>',\n].join(''));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util/fatal-error.js","export default function getModalAlert() {\n  if (!instance) {\n    instance = new ModalAlert();\n  }\n  return instance;\n};\n\nclass ModalAlert {\n  constructor() {\n    this.dimmer = this.addDimmer();\n    this.panel = this.addPanel();\n  }\n\n  addDimmer() {\n    return jQuery('<div/>')\n      .addClass('ym-dimmer')\n      .appendTo(jQuery('body'));\n  }\n\n  addPanel() {\n    return jQuery('<div/>')\n      .attr('id', 'ym-modal-alert')\n      .addClass('ym-message-panel')\n      .appendTo(jQuery('body'));\n  }\n\n  show(text) {\n    this.dimmer.show();\n    this.panel.text(text);\n    this.panel.show();\n    return new Promise((resolve, reject) => {\n      // Somehow the panel fails to show itself most of the times if we don't add some wait here\n      // TODO: identify the cause\n      setTimeout(() => {\n        resolve();\n      }, 50);\n    });\n  }\n\n  hide() {\n    this.panel.hide();\n    this.dimmer.hide();\n  }\n}\n\nlet instance = null;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/modal-alert.js","import {Anno, annoUtil} from '../import';\nimport AnnotationCacheIndexeddb from './annotation-cache-indexeddb';\nimport AnnotationCacheInMemory from './annotation-cache-in-memory';\nimport getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\n\nconst logger = getLogger();\n\nexport default function getAnnotationCache() {\n  if (!instance) {\n    instance = new AnnotationCache();\n    return instance.init();\n  } else {\n    return Promise.resolve(instance);\n  }\n};\n\nlet instance = null;\n\nclass AnnotationCache {\n  constructor() {\n    this._dbCache = new AnnotationCacheIndexeddb();\n    this._memCache = new AnnotationCacheInMemory();\n    this._valid = false;\n    this._inMemoryCache = {};\n  }\n\n  async init() {\n    if (this._dbCache.isValid()) {\n      await this._dbCache.deleteDb();\n      await this._dbCache.init();\n    }\n    return this;\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  async getAnnotationsPerCanvas(canvasId) {\n    logger.debug('AnnotationCache#getAnnotationsPerCanvas', canvasId);\n    let annotations = this._memCache.getAnnotationsPerCanvas(canvasId);\n\n    if (annotations !== null) {\n      logger.debug('mem cache hit', canvasId, annotations);\n      return Promise.resolve(annotations);\n    } else if (this._dbCache.isValid()) {\n      annotations = await this._dbCache.getAnnotationsPerCanvas(canvasId);\n      if (annotations !== null) {\n        logger.debug('db cache hit', canvasId, annotations);\n        this._memCache.setAnnotationsPerCanvas(canvasId, annotations);\n      }\n      return Promise.resolve(annotations);\n    } else {\n      return Promise.resolve(null);\n    }\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  setAnnotationsPerCanvas(canvasId, data) {\n    logger.debug('AnnotationCache#setAnnotationsPerCanvas canvas:', canvasId, 'data:', data);\n    this._memCache.setAnnotationsPerCanvas(canvasId, data);\n    if (this._dbCache.isValid()) {\n      return this._dbCache.setAnnotationsPerCanvas(canvasId, data);\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  invalidateAllCanvases() {\n    logger.debug('AnnotationCache#invalidateAllCanvases');\n    this._memCache.invalidateAllCanvases();\n    if (this._dbCache.isValid()) {\n      return this._dbCache.invalidateAllCanvases();\n    }\n  }\n\n  invalidateCanvasId(canvasId) {\n    logger.debug('AnnotationCache#invalidateCanvasId canvasId:', canvasId);\n    this._memCache.invalidateCanvasId(canvasId);\n    if (this._dbCache.isValid()) {\n      return this._dbCache.invalidateCanvasId(canvasId);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/annotation-cache.js","import AnnotationSource from './annotation-source';\nimport getApp from '../app';\nimport getErrorDialog from '../widgets/error-dialog';\nimport getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\nimport getPageController from '../page-controller';\nimport session from '../session';\nimport util from '../util/util';\n\nconst logger = getLogger();\nlet _explorer = null;\nlet _instances = [];\n\nfunction getEndpoint() {\n  logger.debug('getEndpoint _instances:', _instances.length, _instances);\n  return _instances[0];\n}\n\nclass YaleEndpoint {\n  constructor(options) {\n    jQuery.extend(this, {\n      annotationsList: [],\n      prefix: null,\n      dfd: null\n    }, options);\n    this._explorer = getApp().getAnnotationExplorer();\n    _instances.push(this);\n  }\n\n  search(options) {\n    logger.debug('YaleEndpoint#search options:', options);\n    const canvasId = options.uri;\n    const errorPane = getErrorDialog();\n\n    this._explorer.getAnnotations({ canvasId: canvasId })\n    .catch(reason => {\n      const msg = 'ERROR YaleEndpoint#search getAnnotations - ' + reason;\n      throw(msg);\n    })\n    .then(annotations => {\n      logger.debug('YaleEndpoint#search annotations:', annotations);\n      this.annotationsList = annotations;\n      try {\n        this.dfd.resolve(true);\n      } catch(e) {\n        logger.error('YaleEndpoint#search dfd.resolve failed - ', e);\n      }\n    })\n    .catch(function(reason) {\n      logger.error('YaleEndpoint#search failed - ', reason);\n      errorPane.show('annotations');\n    });\n  }\n\n  create(oaAnnotation, successCallback, errorCallback) {\n    const _this = this;\n\n    if (this.userAuthorize('create', oaAnnotation)) {\n      this._create(oaAnnotation)\n      .catch((reason) => {\n        const msg = 'YaleEndpoint#create _create failed - ' + reason;\n        throw msg;\n      })\n      .then((anno) => {\n        logger.debug('YaleEndpoint#create successful with anno: ', anno);\n        if (typeof successCallback === 'function') {\n          successCallback(anno);\n        }\n      })\n      .catch((reason) => {\n        logger.error('ERROR YaleEndpoint#create successCallback failed');\n        errorCallback();\n      });\n    } else {\n      getErrorDialog().show('authz_create');\n      if (typeof errorCallback === 'function') {\n        errorCallback();\n      }\n    }\n  }\n\n  _create(oaAnnotation) {\n    logger.debug('YaleEndpoint#_create oaAnnotation:', oaAnnotation);\n    const _this = this;\n\n    return this._explorer.createAnnotation(oaAnnotation)\n    .catch((reason) => {\n      const msg = 'YaleEndpoint#_create createAnnotation failed - ' + reason;\n      throw(msg);\n    })\n    .then((anno) => {\n      _this.annotationsList.push(anno);\n      return anno;\n    });\n  }\n\n  update(oaAnnotation, successCallback, errorCallback) {\n    const _this = this;\n    const annotationId = oaAnnotation['@id'];\n\n    if (this.userAuthorize('update', oaAnnotation)) {\n      this._update(oaAnnotation)\n      .catch((reason) => {\n        const msg = 'ERROR YaleEndpoint#update _update failed - ' + reason;\n        logger.error(msg);\n        errorCallback();\n      })\n      .then((anno) => {\n        if (typeof successCallback === 'function') {\n          successCallback(anno);\n        }\n      });\n    } else {\n      getErrorDialog().show('authz_update');\n      if (typeof errorCallback === 'function') {\n        errorCallback();\n      }\n    }\n  }\n\n  _update(oaAnnotation) {\n    logger.debug('YaleEndpoint#_update oaAnnotation:', oaAnnotation);\n    const _this = this;\n    const annotationId = oaAnnotation['@id'];\n\n    const promise = Promise.resolve().then(() => {\n      return this._explorer.updateAnnotation(oaAnnotation);\n    })\n    .catch((reason) => {\n      const msg = 'ERROR YaleEndpoint#_update updateAnnotation - ' + reason;\n      throw(msg);\n    })\n    .then((anno) => {\n      jQuery.each(_this.annotationsList, function(index, value) {\n        if (value['@id'] === annotationId) {\n          _this.annotationsList[index] = anno;\n          return false;\n        }\n      });\n      return anno;\n    });\n    return promise;\n  }\n\n  deleteAnnotation(annotationId, successCallback, errorCallback) {\n    logger.debug('YaleEndpoint#deleteAnnotation annotationId: ' + annotationId);\n    const _this = this;\n\n    if (this.userAuthorize('delete', null)) {\n      this._deleteAnnotation(annotationId)\n      .then(() => {\n        if (typeof successCallback === 'function') {\n          successCallback();\n        }\n      })\n      .catch(reason => {\n        logger.error('YaleEndpoint#deleteAnnotation _deleteAnnotation failed:', reason);\n        errorCallback();\n      });\n    } else {\n       logger.info('YaleEndpoint#delete user not authorized');\n       getErrorDialog().show('authz_update');\n       if (typeof errorCallback === 'function') {\n         errorCallback();\n       }\n    }\n  }\n\n  _deleteAnnotation(annotationId) {\n    logger.debug('YaleEndpoint#_deleteAnnotation annotationId:', annotationId);\n    const _this = this;\n\n    const promise = this._explorer.deleteAnnotation(annotationId)\n    .catch((reason) => {\n      const msg = 'ERROR YaleEndpoint#_deleteAnnotation explorer.deleteAnnotation - ' + reason;\n      throw(msg);\n    })\n    .then((anno) => {\n      _this.annotationsList = jQuery.grep(_this.annotationsList,\n        (value, index) => value['@id'] !== annotationId);\n      return anno;\n    });\n    return promise;\n  }\n\n  async getLayers() {\n    logger.debug('YaleEndpoint#getLayers');\n    return this._explorer.getLayers();\n  }\n\n  updateOrder(canvasId, layerId, annoIds, successCallback, errorCallback) {\n    logger.debug('YaleEndpoint#updateOrder canvasId:', canvasId, 'layerId:', layerId, 'annoIds:', annoIds);\n    const _this = this;\n\n    if (this.userAuthorize('update', null)) {\n      this._updateOrder(canvasId, layerId, annoIds)\n      .catch((reason) => {\n        const msg = 'YaleEndpoint#updateOrder _upadteOrder failed: ' + reason;\n        throw msg;\n      })\n      .then(() => {\n        if (typeof successCallback === 'function') {\n          successCallback();\n        }\n      })\n      .catch((reason) => {\n        logger.error('YaleEndpoint#updateOrder', reason);\n        errorCallback();\n      });\n    } else {\n       logger.info('YaleEndpoint#updateOrder user not authorized');\n       getErrorDialog().show('authz_update');\n       if (typeof errorCallback === 'function') {\n         errorCallback();\n       }\n    }\n  }\n\n  _updateOrder(canvasId, layerId, annoIds) {\n    return this._explorer.updateAnnotationListOrder(canvasId, layerId, annoIds);\n  }\n\n  userAuthorize (action, annotation) {\n    if (action === 'create' || action === 'update' || action === 'delete') {\n      return session.isEditor();\n    } else {\n      return true;\n    }\n  }\n\n  set(prop, value, options) {\n    logger.debug('YaleEndpoint#set prop:', prop, ', value:', value, ', options:', options);\n    if (options) {\n      this[options.parent][prop] = value;\n    } else {\n      this[prop] = value;\n    }\n  }\n}\n\nexport {YaleEndpoint, getEndpoint};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/yale-endpoint.js","import {Anno, annoUtil} from '../import';\nimport getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\nimport getPageController from '../page-controller';\nimport getStateStore from '../state-store';\nimport LayerSelector from './layer-selector';\nimport util from '../util/util';\n\nconst logger = getLogger();\n\nexport default class AnnotationEditor {\n  constructor(options) {\n    logger.debug('AnnotationEditor#constructor options:', options);\n    jQuery.extend(this, {\n      windowId: null,\n      miradorDriven: false, // true if created and managed by Mirador core.\n      annotation: null,\n      id: null,\n      parent: null,\n      endpoint: null,\n      targetAnnotation: null, // target annotation (annotation annotated by this annotation)\n      saveCallback: null,\n      cancelCallback: null\n    }, options);\n\n    this._mode = options.mode; // \"create\", \"update\", or \"merge\"\n    this._$anno = this.annotation ? Anno(this.annotation) : null;\n\n    this._textDirectionClass = this._getTextDirectionClass(this._$anno);\n    logger.debug('AnnotationEditor#constructor _useVerticalRL:', this._useVerticalRL);\n\n    this.init();\n    this.hide();\n  }\n\n  init() {\n    this.miradorProxyManager = getMiradorProxyManager();\n    this.endpoint = this.endpoint || this.miradorProxyManager.getWindowProxyById(this.windowId).getEndPoint();\n    this.id = this.id || Mirador.genUUID();\n\n    var tagsStr = this.annotation ? this._$anno.tags.join(' ') : '';\n    this.element = jQuery(template({\n      miradorDriven: this.miradorDriven,\n      tags: tagsStr\n    })).attr('id', this.id);\n\n    if (!this.miradorDriven) {\n      this.reload(this.parent);\n    }\n  }\n\n  async reload(parent) {\n    logger.debug('AnnotationEditor#reload parent:', parent);\n\n    parent.prepend(this.element);\n    const header = this.element.find('.header');\n    const title = header.find('.title');\n    this.textArea = this.element.find('textarea');\n    this.layerSelectorContainer = this.element.find('.layer_select');\n    this.layerSelector = new LayerSelector({\n      parent: this.layerSelectorContainer\n    });\n\n    const layers = await this.endpoint.getLayers();\n\n    this.layerSelector.init(layers).then(() => {\n      if (this._mode === 'create') {\n        title.text('Create Annotation');\n        const lastLayer = getStateStore().getString('lastSelectedLayer');\n        this.layerSelector.val(lastLayer);\n      } else { // update\n        title.text('');\n        if (this.annotation) {\n          this.textArea.val(this._$anno.bodyText);\n          if (this.annotation.layerId) {\n            this.layerSelector.val(this.annotation.layerId);\n          }\n        }\n      }\n      this.initTinyMce();\n      this.bindEvents();\n    }).catch(function(reason) {\n      logger.error('ERROR AnnotationEditor#reload layerSelector.init failed - ' + reason);\n    });\n  }\n\n  initTinyMce() {\n    const _this = this;\n    tinymce.init({\n      selector: '#' + this.id + ' textarea',\n      //plugins: 'link paste',\n      plugins: 'link paste image',\n      menubar: false,\n      toolbar: 'bold italic fontsizeselect | bullist numlist | link image | undo redo | removeformat | TB_RL',\n      fontsize_formats: '10px 12px 14px 18px 24px',\n      statusbar: false,\n      toolbar_items_size: 'small',\n      default_link_target: '_blank',\n      past_as_text: true, // from paste plugin\n      resize: true,\n      height: '140',\n      theme_advanced_resizing: true,\n      theme_advanced_statusbar_location: 'bottom',\n      setup: function(editor) {\n        editor.on('init', function(e) {\n          this.getDoc().body.style.fontSize = '12px';\n          tinymce.execCommand('mceFocus', false, e.target.id);\n        });\n        editor.on('focus', function(e) {\n          logger.debug('TinyMCE on focus e:', e);\n        });\n        editor.addButton('TB_RL', {\n          type: 'listbox',\n          tooltip: 'Set text direction',\n          icon: false,\n          onselect: function(event) {\n            _this._textDirectionClass = this.value();\n          },\n          values: [\n            { text: 'Horizontal LR', value: 'horizontal-lr' },\n            { text: 'Horizontal RL', value: 'horizontal-rl' },\n            { text: 'Vertical LR', value: 'vertical-lr' },\n            { text: 'Vertical RL', value: 'vertical-rl' },\n          ],\n          value: _this._textDirectionClass // initial value\n        });\n      }\n    });\n  }\n\n  // Called by Mirador core\n  show(selector) {\n    logger.debug('AnnotationEditor#show', selector);\n    if (selector) {\n      this.reload(jQuery(selector));\n    }\n    this.element.show();\n  }\n\n  hide() {\n    this.element.hide();\n  }\n\n  destroy() {\n    this.element.remove();\n  }\n\n  // Called by Mirador core\n  isDirty() {\n    return this.getEditor().isDirty();\n  }\n\n  // Get tinymce editor\n  getEditor() {\n    return tinymce.get(this.textArea.attr('id'));\n  }\n\n  // Called by Mirador core - XXX seong\n  getMode() {\n    return this._mode;\n  }\n\n  getLoadedAnnotation() {\n    return this._loadedAnnotation;\n  }\n\n  // Called by Mirador core\n  createAnnotation(targetAnnotation) {\n    var tagText = this.element.find('.tags_editor').val().trim();\n    var resourceText = this.getEditor().getContent();\n    var tags = [];\n    var motivation = [];\n    var resource = [];\n\n    if (tagText) {\n      tags = tagText.split(/\\s+/);\n    }\n\n    if (tags && tags.length > 0) {\n      motivation.push(\"oa:tagging\");\n      jQuery.each(tags, function(index, value) {\n        resource.push({\n          \"@type\": \"oa:Tag\",\n          \"chars\": value\n        });\n      });\n    }\n    motivation.push(\"oa:commenting\");\n    resource.push({\n      \"@type\": \"dctypes:Text\",\n      \"format\": \"text/html\",\n      \"chars\": resourceText,\n      \"style\": this._textDirectionClass\n    });\n\n    var layerId = this.layerSelector.val();\n    var annotation = {\n      '@context': 'http://iiif.io/api/presentation/2/context.json',\n      '@type': 'oa:Annotation',\n      motivation: motivation,\n      resource: resource,\n      layerId: layerId\n    };\n    if (targetAnnotation) {\n      annotation.on = {\n        '@type': 'oa:Annotation',\n        full: targetAnnotation['@id']\n      };\n    }\n    logger.debug('AnnotationEditor#createAnnotation anno:', annotation);\n    return annotation;\n  }\n\n  loadAnnotation(annotation) {\n    this._mode = 'merge';\n    this._loadedAnnotation = annotation;\n    const $anno = Anno(annotation);\n\n    // Reload the editor with the contents of the annotation\n    const content = $anno.bodyText;\n    this.layerSelector.val($anno.layerId);\n    this.getEditor().setContent(content);\n\n    const tags = $anno.tags;\n    if (tags.length > 0) {\n      this.element.find('.tags_editor').val(tags.join(' '));\n    }\n\n    // Prevent user from editing the merged content\n    this.getEditor().getBody().setAttribute('contenteditable', false);\n  }\n\n  // Called by Mirador core\n  updateAnnotation(oaAnno) {\n    logger.debug('AnnotationEditor#updateAnnotation oaAnno:', oaAnno);\n    var tagText = this.element.find('.tags_editor').val().trim();\n    var resourceText = this.getEditor().getContent();\n    var tags = [];\n\n    if (tagText) {\n      tags = tagText.split(/\\s+/);\n    }\n\n    var motivation = [],\n      resource = [];\n\n    //remove all tag-related content in annotation\n    oaAnno.motivation = jQuery.grep(oaAnno.motivation, function(value) {\n      return value !== 'oa:tagging';\n    });\n    oaAnno.resource = jQuery.grep(oaAnno.resource, function(value) {\n      return value['@type'] !== 'oa:Tag';\n    });\n\n    //re-add tagging if we have them\n    if (tags.length > 0) {\n      oaAnno.motivation.push('oa:tagging');\n      jQuery.each(tags, function(index, value) {\n        oaAnno.resource.push({\n          '@type': 'oa:Tag',\n          chars: value\n        });\n      });\n    }\n    for (let value of oaAnno.resource) {\n      if (value['@type'] === 'dctypes:Text') {\n        value.chars = resourceText;\n        value.style = this._textDirectionClass;\n      }\n    }\n    const layerId = this.layerSelector.val();\n    oaAnno.layerId = layerId;\n    return oaAnno;\n  }\n\n  save() {\n    var _this = this;\n    var annotation = null;\n\n    if (this._mode == 'create') {\n      annotation = this.createAnnotation(this.targetAnnotation);\n      this.endpoint.create(annotation, function(data) {\n        var annotation = data;\n        if (typeof _this.saveCallback === 'function') {\n          _this.saveCallback(annotation);\n        }\n        _this.destroy();\n      }, function() {\n        logger.error('AnnotationEditor#save endpoint.create failed for', annotation);\n      });\n    } else {\n      annotation = this.updateAnnotation(this.annotation);\n      console.log('TTT UUU anno:', annotation);\n      this.endpoint.update(annotation, function(data) {\n        if (typeof _this.saveCallback === 'function') {\n          var annotation = data;\n          var content = _this.getEditor().getContent().trim();\n          _this.saveCallback(annotation, content);\n        }\n        _this.destroy();\n      }, function() {\n        logger.error('AnnotationEditor#save endpoint.update failed for', annotation);\n      });\n    }\n  }\n\n  validate () {\n    logger.debug('AnnotationEditor#validate target anno:', this.targetAnnotation);\n    let msg = '';\n\n    if (this._mode === 'create') {\n      if (!this.targetAnnotation) {\n        msg += 'Target annotation is missing.\\n';\n      }\n    }\n    if (!this.layerSelector.val()) {\n      msg += 'Layer is not selected.\\n';\n    }\n    if (this.getEditor().getContent().trim() === '') {\n      msg += 'Please enter content.\\n';\n    }\n    if (msg === '') {\n      return true;\n    } else {\n      alert(msg);\n      return false;\n    }\n  }\n\n  bindEvents() {\n    this.element.find('.ym_save').click(event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (this.validate()) {\n        this.save();\n      }\n    });\n\n    this.element.find('.ym_cancel').click(event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.destroy();\n      if (typeof this.cancelCallback === 'function') {\n        this.cancelCallback();\n      }\n    });\n\n    this.element.find('.ym_vertical_inc').click(event => {\n      var iframeId = this.getEditor().id + '_ifr';\n      var element = tinyMCE.DOM.get(iframeId);\n      var height = parseInt(tinyMCE.DOM.getStyle(element, 'height'), 10);\n      tinyMCE.DOM.setStyle(element, 'height', (height + 75) + 'px');\n    });\n\n    this.element.find('.ym_vertical_dec').click(event => {\n      var iframeId = this.getEditor().id + '_ifr';\n      var element = tinyMCE.DOM.get(iframeId);\n      var height = parseInt(tinyMCE.DOM.getStyle(element, 'height'), 10);\n      tinyMCE.DOM.setStyle(element, 'height', (height - 75) + 'px');\n    });\n  }\n\n  /**\n   * Get class name ($anno.bodyStyle) for text directions to save\n   * with the annotation\n   * @param {AnnotationWrapper} $anno\n   */\n  _getTextDirectionClass($anno) {\n    let klass = '';\n    if ($anno) {\n      klass = $anno.bodyStyle;\n      logger.debug('AnnotationEditor#_getTextDirectionClass class from anno:', klass);\n      if (util.directionClasses.includes(klass)) {\n        return klass;\n      }\n    }\n    klass = getStateStore().getString('textDirection');\n    logger.debug('AnnotationEditor#_getTextDirectionClass default from state:', klass);\n    if (util.directionClasses.includes(klass)) {\n        return klass;\n    }\n    return 'horizontal-lr';\n  }\n}\n\nconst template = Handlebars.compile([\n  '<div class=\"ym_anno_editor\">',\n  '  <div class=\"header\">',\n  '    <span class=\"layer_select\"></span>',\n  '  </div>',\n  '  <textarea></textarea>',\n  '  <input class=\"tags_editor\" placeholder=\"{{t \"addTagsHere\"}}…\" {{#if tags}}value=\"{{tags}}\"{{/if}}/>',\n  '  {{#unless miradorDriven}}',\n  '    <div class=\"bottom_row\">',\n  '        <button class=\"ym_save\">Save</button>',\n  '        <button class=\"ym_cancel\">Cancel</button>',\n  '      <div class=\"ym_float_right\">',\n  '        <i class=\"large caret up icon ym_vertical_dec\"></i>',\n  '        <i class=\"large caret down icon ym_vertical_inc\"></i>',\n  '      </div>',\n  '    </div>',\n  '  {{/unless}}',\n  '</div>'\n].join(''));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-editor.js","import getLogger from '../../util/logger';\n\nconst logger = getLogger();\n\nexport default class DomHelper {\n  constructor(appendTo) {\n    this._root = jQuery(windowTemplate({}));\n    appendTo.append(this._root);\n\n    this._header = this._findOne(this._root, '.header');\n    this._placeHolder = this._findOne(this._root, '.placeholder');\n    this._layerSelectorContainer = this._findOne(this._root, '.layer-selector-container');\n    this._tocTagSelector = this._findOne(this._root, '.toc-tag-selector-container');\n    this._orderConfirm = this._findOne(this._root, '.order-confirm');\n    this._saveOrderButton = this._findOne(this._orderConfirm, '.ym_button.save');\n    this._cancelOrderButton = this._findOne(this._orderConfirm, '.ym_button.cancel');\n    this._toggleDirectionButton = this._addToggleDirectionButton();\n    this._createWindowButton = this._addCreateWindowButton();\n    this._listContainer = this._findOne(this._root, '.list-container');\n\n    this._orderConfirm.hide();\n  }\n\n  getRoot() {\n    return this._root;\n  }\n\n  getHeader() {\n    return this._header;\n  }\n\n  getPlaceHolder() {\n    return this._placeHolder;\n  }\n\n  getLayerSelectorContainer() {\n    return this._layerSelectorContainer;\n  }\n\n  getTocTagSelector() {\n    return this._tocTagSelector;\n  }\n\n  getOrderConfirm() {\n    return this._orderConfirm;\n  }\n\n  getSaveOrderButton() {\n    return this._saveOrderButton;\n  }\n\n  getCancelOrderButton() {\n    return this._cancelOrderButton;\n  }\n\n  getCreateWindowButton() {\n    return this._createWindowButton;\n  }\n\n  getToggleDirectionButton() {\n    return this._toggleDirectionButton;\n  }\n\n  getListContainer() {\n    return this._listContainer;\n  }\n\n  getAllAnnotationCells() {\n    return this.getListContainer().find('.annowin_anno').toArray();\n  }\n\n  _findOne(root, selector) {\n    const found = root.find(selector);\n    return found.length > 0 ? jQuery(found[0]) : null;\n  }\n\n  findAnnoListElem(rootElem) {\n    return rootElem.find('.annowin_list');\n  }\n\n  /**\n   * Return true if the element is an annotation cell, as opposed to a header\n   */\n  isAnnotationCell(elem) {\n    return elem.hasClass('annowin_anno');\n  }\n\n  findAnnoElemByAnnoId(annoId) {\n    for (let cell of this.getAllAnnotationCells()) {\n      let $cell = jQuery(elem);\n      if ($cell.data('annotationId') === annoId) {\n        return $cell;\n      }\n    }\n    return null;\n  }\n\n  updateDirection() {\n    const rowReverse = this._root.hasClass('row-reverse');\n    logger.debug('DomHelper#updateDirection rowReverse:', rowReverse);\n\n    if (rowReverse) {\n      this._root.find('.fa-arrows-h').hide();\n      this._root.find('.fa-arrows-v').show();\n      this._root.find('.order-down').attr('class', 'order-down caret left icon');\n      this._root.find('.order-up').attr('class', 'order-up caret right icon');\n    } else {\n      this._root.find('.fa-arrows-h').show();\n      this._root.find('.fa-arrows-v').hide();\n      this._root.find('.order-down').attr('class', 'order-down caret down icon');\n      this._root.find('.order-up').attr('class', 'order-up caret up icon');\n    }\n  }\n\n  _addCreateWindowButton() {\n    const parent = this._root.find('.annowin_layer_row .right');\n    const button = jQuery('<div/>')\n      .addClass('ym_create_window_button')\n      .append(jQuery('<i class=\"fa fa-plus fa-lg fa-fw\"></i>'));\n\n    parent.append(button);\n    return button;\n  }\n\n  _addToggleDirectionButton() {\n    const parent = this._root.find('.annowin_layer_row .right');\n    const button = jQuery('<div/>')\n      .addClass('ym_toggle_direction_button')\n      .append(jQuery('<i class=\"fa fa-arrows-h fa-lg fa-fw\"></i>'))\n      .append(jQuery('<i class=\"fa fa-arrows-v fa-lg fa-fw\"></i>'));\n\n    parent.append(button);\n    button.find('.fa-arrows-v').hide();\n    return button;\n  }\n}\n\nconst windowTemplate = Handlebars.compile([\n  '<div class=\"ym_annotation_window\">',\n  '  <div class=\"header\">',\n  '    <div class=\"annowin_layer_row\">',\n  '      <span class=\"layer-selector-container\"></span>',\n  '      <div class=\"right\"></div>',\n  '    </div>',\n  '    <div class=\"annowin_menu_tag_row\">',\n  '      <span class=\"toc-tag-selector-container\"></span>',\n  '    </div>',\n  '  <div class=\"order-confirm\">',\n  '    <span class=\"ui small orange button ym_button save\">Save new order</span>',\n  '    <span class=\"ui small orange button ym_button cancel\">Cancel</span>',\n  '  </div>',\n  '  </div>',\n  '  <div class=\"placeholder\"></div>',\n  '  <div class=\"list-container\" tabindex=\"-1\">',\n  '  </div>',\n  '</div>'\n].join(''));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/dom-helper.js","import getLogger from '../util/logger';\nimport getStateStore from '../state-store';\nimport Selector from './selector';\nimport session from '../session';\n\nexport default class {\n  /**\n   * init() should be called separately after instantiation\n   * because it returns a Promise.\n   */\n  constructor(options) {\n    jQuery.extend(this, {\n      selector: null,\n      parent: null,\n      changeCallback: null,\n      initialLayerId: null\n    }, options);\n    this.logger = getLogger();\n    this.appState = getStateStore();\n  }\n\n  /**\n   * @returns {Promise}\n   */\n  init(layers) {\n    this.logger.debug('LayerSelector#init layers:', layers, 'initialLayerId:', this.initialLayerId);\n    const isEditor = session.isEditor();\n    const hiddenLayers = this.appState.getSetting('ui', 'annotationWindow', 'hiddenLayers') || [];\n\n    if (!isEditor && hiddenLayers.length > 0) {\n      layers = layers.filter(layer => !hiddenLayers.includes(layer['@id']));\n    }\n\n    this._isLoaded = false;\n    this.selector = new Selector({\n      appendTo: this.parent\n    });\n    this.bindEvents();\n    return this.reload(layers);\n  }\n\n  /**\n   * @returns {Promise}\n   */\n  reload(layers) {\n    this.logger.debug('LayerSelector#reload');\n    const _this = this;\n    const layerIndexMap = this.appState.getTransient('layerIndexMap');\n    if (!layerIndexMap) {\n      this.logger.error('LayerSelector#reload cannot retrieve layerIndexMap');\n    }\n    this.selector.empty();\n\n    for (let layer of layers) {\n      let layerId = layer['@id'];\n      let layerIndex = layerIndexMap ? layerIndexMap[layerId] : 0;\n      let colorClass = typeof layerIndex === 'number' ? 'layer_' + layerIndex % 10 : undefined;\n\n      _this.selector.addItem({\n        label: layer.label,\n        value: layerId,\n        colorClass: colorClass\n      });\n    }\n    return new Promise(function(resolve, reject) {\n      if (layers.length > 0) {\n        const layerId = _this.initialLayerId || layers[0]['@id'];\n        const layerIndex = layerIndexMap ? layerIndexMap[layerId] : 0;\n        _this.selector.val(layerId, true);\n        _this.selector.setColorClass('layer_' + layerIndex % 10);\n        _this._isLoaded = true;\n      }\n      resolve(_this);\n    });\n  }\n\n  val(value, skipNotify) {\n    this.logger.debug('LayerSelector#val', value, skipNotify);\n    const retVal = this.selector.val(value, skipNotify);\n    if (value !== undefined) {\n      this.logger.debug('val:', value);\n      getStateStore().setString('lastSelectedLayer', value);\n    }\n    return retVal;\n  }\n\n  isLoaded() {\n    return this._isLoaded;\n  }\n\n  bindEvents() {\n    var _this = this;\n    this.selector.changeCallback = function(layerId, text) {\n      _this.logger.debug('LayerSelector#bindEvents changeCallback');\n      const layerIndexMap = _this.appState.getTransient('layerIndexMap');\n      const layerIndex = layerIndexMap ? layerIndexMap[layerId] : 0;\n\n      _this.selector.setColorClass('layer_' + layerIndex % 10);\n      getStateStore().setString('lastSelectedLayer', layerId);\n      if (typeof _this.changeCallback === 'function') {\n        _this.changeCallback(layerId, text);\n      }\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/layer-selector.js","import getLogger from '../util/logger';\n\nconst logger = getLogger();\n\nexport default class {\n  /**\n   * A selector dropdown implemented with Semantic UI.\n   */\n  constructor(options) {\n    jQuery.extend(this, {\n      appendTo: null,\n      changeCallback: null\n    }, options);\n\n    this.init();\n  }\n\n  init() {\n    const _this = this;\n    this.element = jQuery(template());\n    this.appendTo.append(this.element);\n    this.element.dropdown({\n      direction: 'downward',\n      onChange: (value, text) => {\n        logger.debug('Selector#init onChange ', value, text, _this._skipNotify);\n        if (typeof _this.changeCallback === 'function' && !_this._skipNotify) {\n          _this.changeCallback(value, text);\n        }\n        _this._skipNotify = false;\n      },\n      action: (text, value) => {\n        _this.element.dropdown('set selected', value);\n        _this.element.dropdown('hide');\n      }\n    });\n    this.values = [];\n  }\n\n  setItems(itemsConfig) {\n    logger.debug('Selector#setItems itemsConfig:', itemsConfig);\n    const root = this.element.find('.menu');\n    root.empty();\n    this._setItems(itemsConfig, root);\n  }\n\n  _setItems(itemsConfig, parent) {\n    const _this = this;\n    jQuery.each(itemsConfig, (index, value) => {\n      if (value.children.length > 0) {\n        _this.addItem({\n          label: value.label,\n          value: value.value,\n          parent: parent\n        });\n        const menu = _this.addMenuItem(value.label, value.value, parent);\n        _this._setItems(value.children, menu);\n      } else {\n        _this.addItem({\n          label: value.label,\n          value: value.value,\n          parent: parent\n        });\n      }\n    });\n  }\n\n  addMenuItem(label, value, parent) {\n    const item = jQuery('<div/>')\n      .addClass('item')\n      .attr('data-text', label)\n      .attr('data-value', value)\n      .text(label);\n    const menu = jQuery('<div/>')\n      .addClass('menu')\n      .css('overflow', 'hidden');\n    item.append(jQuery('<i class=\"dropdown icon\"></i>'));\n    item.append(menu);\n    parent.append(item);\n    return menu;\n  }\n\n  addItem(options) {\n    //logger.debug('Selector#addItem options:', options);\n    const item = jQuery(itemTemplate({\n      label: options.label,\n      colorClass: options.colorClass\n    }))\n    .attr('data-text', options.label)\n    .attr('data-value', options.value);\n\n    const parent = options.parent || this.element.find('.menu');\n    parent.append(item);\n    this.values.push(options.value);\n  }\n\n  empty() {\n    this.element.find('.menu').empty();\n  }\n\n  val(value, skipNotify) {\n    logger.debug('Selector#val', value, skipNotify);\n    const dd = this.element;\n    this._skipNotify = skipNotify || false;\n    dd.dropdown('refresh');\n\n    if (value === undefined) { // get value\n      return dd.dropdown('get value');\n    } else { // set value\n      if (dd.dropdown('get item', value)) {\n        dd.dropdown('set selected', value);\n        return value;\n      } else {\n        dd.dropdown('set selected', this.values[0]);\n        return this.values[0];\n      }\n    }\n  }\n\n  setColorClass(newClass) {\n    if (this._oldClass) {\n      this.element.removeClass(this._oldClass);\n    }\n    this.element.addClass(newClass);\n    this._oldClass = newClass;\n  }\n\n  destroy() {\n    this.element.remove();\n  }\n}\n\nconst template = Handlebars.compile([\n  '<div class=\"basic tiny ui button ym_button dropdown\">',\n  '  <input name=\"selection\" type=\"hidden\" />',\n  '  <div class=\"default text\"></div>',\n  '  <i class=\"ym dropdown icon\"></i>',\n  '  <div class=\"menu\">',\n  '  </div>',\n  '</div>'\n].join(''));\n\nconst itemTemplate = Handlebars.compile([\n  '<div class=\"item\">',\n  '  {{#if colorClass}}',\n  '    <span class=\"icon_span\"><i class=\"circle icon {{colorClass}}\"></i></span>',\n  '  {{/if}}',\n  '  <span class=\"label\">{{label}}</span>',\n  '</div>'\n].join(''));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/selector.js","// Expose global variables to ES5\n\nimport getApp from './app';\nimport fatalError from './util/fatal-error';\n\nwindow.YaleMirador = {\n  getApp: getApp,\n  fatalError: fatalError\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/export.js","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n\"use strict\";\n\n_dereq_(295);\n\n_dereq_(296);\n\n_dereq_(2);\n\nif (global._babelPolyfill) {\n  throw new Error(\"only one instance of babel-polyfill is allowed\");\n}\nglobal._babelPolyfill = true;\n\nvar DEFINE_PROPERTY = \"defineProperty\";\nfunction define(O, key, value) {\n  O[key] || Object[DEFINE_PROPERTY](O, key, {\n    writable: true,\n    configurable: true,\n    value: value\n  });\n}\n\ndefine(String.prototype, \"padLeft\", \"\".padStart);\ndefine(String.prototype, \"padRight\", \"\".padEnd);\n\n\"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill\".split(\",\").forEach(function (key) {\n  [][key] && define(Array, key, Function.call.bind([][key]));\n});\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"2\":2,\"295\":295,\"296\":296}],2:[function(_dereq_,module,exports){\n_dereq_(119);\nmodule.exports = _dereq_(23).RegExp.escape;\n},{\"119\":119,\"23\":23}],3:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],4:[function(_dereq_,module,exports){\nvar cof = _dereq_(18);\nmodule.exports = function(it, msg){\n  if(typeof it != 'number' && cof(it) != 'Number')throw TypeError(msg);\n  return +it;\n};\n},{\"18\":18}],5:[function(_dereq_,module,exports){\n// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = _dereq_(117)('unscopables')\n  , ArrayProto  = Array.prototype;\nif(ArrayProto[UNSCOPABLES] == undefined)_dereq_(40)(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function(key){\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n},{\"117\":117,\"40\":40}],6:[function(_dereq_,module,exports){\nmodule.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n},{}],7:[function(_dereq_,module,exports){\nvar isObject = _dereq_(49);\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"49\":49}],8:[function(_dereq_,module,exports){\n// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = _dereq_(109)\n  , toIndex  = _dereq_(105)\n  , toLength = _dereq_(108);\n\nmodule.exports = [].copyWithin || function copyWithin(target/*= 0*/, start/*= 0, end = @length*/){\n  var O     = toObject(this)\n    , len   = toLength(O.length)\n    , to    = toIndex(target, len)\n    , from  = toIndex(start, len)\n    , end   = arguments.length > 2 ? arguments[2] : undefined\n    , count = Math.min((end === undefined ? len : toIndex(end, len)) - from, len - to)\n    , inc   = 1;\n  if(from < to && to < from + count){\n    inc  = -1;\n    from += count - 1;\n    to   += count - 1;\n  }\n  while(count-- > 0){\n    if(from in O)O[to] = O[from];\n    else delete O[to];\n    to   += inc;\n    from += inc;\n  } return O;\n};\n},{\"105\":105,\"108\":108,\"109\":109}],9:[function(_dereq_,module,exports){\n// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = _dereq_(109)\n  , toIndex  = _dereq_(105)\n  , toLength = _dereq_(108);\nmodule.exports = function fill(value /*, start = 0, end = @length */){\n  var O      = toObject(this)\n    , length = toLength(O.length)\n    , aLen   = arguments.length\n    , index  = toIndex(aLen > 1 ? arguments[1] : undefined, length)\n    , end    = aLen > 2 ? arguments[2] : undefined\n    , endPos = end === undefined ? length : toIndex(end, length);\n  while(endPos > index)O[index++] = value;\n  return O;\n};\n},{\"105\":105,\"108\":108,\"109\":109}],10:[function(_dereq_,module,exports){\nvar forOf = _dereq_(37);\n\nmodule.exports = function(iter, ITERATOR){\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n},{\"37\":37}],11:[function(_dereq_,module,exports){\n// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = _dereq_(107)\n  , toLength  = _dereq_(108)\n  , toIndex   = _dereq_(105);\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n},{\"105\":105,\"107\":107,\"108\":108}],12:[function(_dereq_,module,exports){\n// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = _dereq_(25)\n  , IObject  = _dereq_(45)\n  , toObject = _dereq_(109)\n  , toLength = _dereq_(108)\n  , asc      = _dereq_(15);\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n},{\"108\":108,\"109\":109,\"15\":15,\"25\":25,\"45\":45}],13:[function(_dereq_,module,exports){\nvar aFunction = _dereq_(3)\n  , toObject  = _dereq_(109)\n  , IObject   = _dereq_(45)\n  , toLength  = _dereq_(108);\n\nmodule.exports = function(that, callbackfn, aLen, memo, isRight){\n  aFunction(callbackfn);\n  var O      = toObject(that)\n    , self   = IObject(O)\n    , length = toLength(O.length)\n    , index  = isRight ? length - 1 : 0\n    , i      = isRight ? -1 : 1;\n  if(aLen < 2)for(;;){\n    if(index in self){\n      memo = self[index];\n      index += i;\n      break;\n    }\n    index += i;\n    if(isRight ? index < 0 : length <= index){\n      throw TypeError('Reduce of empty array with no initial value');\n    }\n  }\n  for(;isRight ? index >= 0 : length > index; index += i)if(index in self){\n    memo = callbackfn(memo, self[index], index, O);\n  }\n  return memo;\n};\n},{\"108\":108,\"109\":109,\"3\":3,\"45\":45}],14:[function(_dereq_,module,exports){\nvar isObject = _dereq_(49)\n  , isArray  = _dereq_(47)\n  , SPECIES  = _dereq_(117)('species');\n\nmodule.exports = function(original){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n},{\"117\":117,\"47\":47,\"49\":49}],15:[function(_dereq_,module,exports){\n// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = _dereq_(14);\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};\n},{\"14\":14}],16:[function(_dereq_,module,exports){\n'use strict';\nvar aFunction  = _dereq_(3)\n  , isObject   = _dereq_(49)\n  , invoke     = _dereq_(44)\n  , arraySlice = [].slice\n  , factories  = {};\n\nvar construct = function(F, len, args){\n  if(!(len in factories)){\n    for(var n = [], i = 0; i < len; i++)n[i] = 'a[' + i + ']';\n    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n  } return factories[len](F, args);\n};\n\nmodule.exports = Function.bind || function bind(that /*, args... */){\n  var fn       = aFunction(this)\n    , partArgs = arraySlice.call(arguments, 1);\n  var bound = function(/* args... */){\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n  };\n  if(isObject(fn.prototype))bound.prototype = fn.prototype;\n  return bound;\n};\n},{\"3\":3,\"44\":44,\"49\":49}],17:[function(_dereq_,module,exports){\n// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = _dereq_(18)\n  , TAG = _dereq_(117)('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n},{\"117\":117,\"18\":18}],18:[function(_dereq_,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],19:[function(_dereq_,module,exports){\n'use strict';\nvar dP          = _dereq_(67).f\n  , create      = _dereq_(66)\n  , redefineAll = _dereq_(86)\n  , ctx         = _dereq_(25)\n  , anInstance  = _dereq_(6)\n  , defined     = _dereq_(27)\n  , forOf       = _dereq_(37)\n  , $iterDefine = _dereq_(53)\n  , step        = _dereq_(55)\n  , setSpecies  = _dereq_(91)\n  , DESCRIPTORS = _dereq_(28)\n  , fastKey     = _dereq_(62).fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n},{\"25\":25,\"27\":27,\"28\":28,\"37\":37,\"53\":53,\"55\":55,\"6\":6,\"62\":62,\"66\":66,\"67\":67,\"86\":86,\"91\":91}],20:[function(_dereq_,module,exports){\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = _dereq_(17)\n  , from    = _dereq_(10);\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n},{\"10\":10,\"17\":17}],21:[function(_dereq_,module,exports){\n'use strict';\nvar redefineAll       = _dereq_(86)\n  , getWeak           = _dereq_(62).getWeak\n  , anObject          = _dereq_(7)\n  , isObject          = _dereq_(49)\n  , anInstance        = _dereq_(6)\n  , forOf             = _dereq_(37)\n  , createArrayMethod = _dereq_(12)\n  , $has              = _dereq_(39)\n  , arrayFind         = createArrayMethod(5)\n  , arrayFindIndex    = createArrayMethod(6)\n  , id                = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function(that){\n  return that._l || (that._l = new UncaughtFrozenStore);\n};\nvar UncaughtFrozenStore = function(){\n  this.a = [];\n};\nvar findUncaughtFrozen = function(store, key){\n  return arrayFind(store.a, function(it){\n    return it[0] === key;\n  });\n};\nUncaughtFrozenStore.prototype = {\n  get: function(key){\n    var entry = findUncaughtFrozen(this, key);\n    if(entry)return entry[1];\n  },\n  has: function(key){\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function(key, value){\n    var entry = findUncaughtFrozen(this, key);\n    if(entry)entry[1] = value;\n    else this.a.push([key, value]);\n  },\n  'delete': function(key){\n    var index = arrayFindIndex(this.a, function(it){\n      return it[0] === key;\n    });\n    if(~index)this.a.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = id++;      // collection id\n      that._l = undefined; // leak store for uncaught frozen objects\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function(key){\n        if(!isObject(key))return false;\n        var data = getWeak(key);\n        if(data === true)return uncaughtFrozenStore(this)['delete'](key);\n        return data && $has(data, this._i) && delete data[this._i];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key){\n        if(!isObject(key))return false;\n        var data = getWeak(key);\n        if(data === true)return uncaughtFrozenStore(this).has(key);\n        return data && $has(data, this._i);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var data = getWeak(anObject(key), true);\n    if(data === true)uncaughtFrozenStore(that).set(key, value);\n    else data[that._i] = value;\n    return that;\n  },\n  ufstore: uncaughtFrozenStore\n};\n},{\"12\":12,\"37\":37,\"39\":39,\"49\":49,\"6\":6,\"62\":62,\"7\":7,\"86\":86}],22:[function(_dereq_,module,exports){\n'use strict';\nvar global            = _dereq_(38)\n  , $export           = _dereq_(32)\n  , redefine          = _dereq_(87)\n  , redefineAll       = _dereq_(86)\n  , meta              = _dereq_(62)\n  , forOf             = _dereq_(37)\n  , anInstance        = _dereq_(6)\n  , isObject          = _dereq_(49)\n  , fails             = _dereq_(34)\n  , $iterDetect       = _dereq_(54)\n  , setToStringTag    = _dereq_(92)\n  , inheritIfRequired = _dereq_(43);\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  var fixMethod = function(KEY){\n    var fn = proto[KEY];\n    redefine(proto, KEY,\n      KEY == 'delete' ? function(a){\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a){\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a){\n        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'add' ? function add(a){ fn.call(this, a === 0 ? 0 : a); return this; }\n        : function set(a, b){ fn.call(this, a === 0 ? 0 : a, b); return this; }\n    );\n  };\n  if(typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    var instance             = new C\n      // early implementations not supports chaining\n      , HASNT_CHAINING       = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance\n      // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n      , THROWS_ON_PRIMITIVES = fails(function(){ instance.has(1); })\n      // most early implementations doesn't supports iterables, most modern - not close it correctly\n      , ACCEPT_ITERABLES     = $iterDetect(function(iter){ new C(iter); }) // eslint-disable-line no-new\n      // for early implementations -0 and +0 not the same\n      , BUGGY_ZERO = !IS_WEAK && fails(function(){\n        // V8 ~ Chromium 42- fails only with 5+ elements\n        var $instance = new C()\n          , index     = 5;\n        while(index--)$instance[ADDER](index, index);\n        return !$instance.has(-0);\n      });\n    if(!ACCEPT_ITERABLES){ \n      C = wrapper(function(target, iterable){\n        anInstance(target, C, NAME);\n        var that = inheritIfRequired(new Base, target, C);\n        if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n        return that;\n      });\n      C.prototype = proto;\n      proto.constructor = C;\n    }\n    if(THROWS_ON_PRIMITIVES || BUGGY_ZERO){\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n    if(BUGGY_ZERO || HASNT_CHAINING)fixMethod(ADDER);\n    // weak collections should not contains .clear method\n    if(IS_WEAK && proto.clear)delete proto.clear;\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F * (C != Base), O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n},{\"32\":32,\"34\":34,\"37\":37,\"38\":38,\"43\":43,\"49\":49,\"54\":54,\"6\":6,\"62\":62,\"86\":86,\"87\":87,\"92\":92}],23:[function(_dereq_,module,exports){\nvar core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],24:[function(_dereq_,module,exports){\n'use strict';\nvar $defineProperty = _dereq_(67)\n  , createDesc      = _dereq_(85);\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n},{\"67\":67,\"85\":85}],25:[function(_dereq_,module,exports){\n// optional / simple context binding\nvar aFunction = _dereq_(3);\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"3\":3}],26:[function(_dereq_,module,exports){\n'use strict';\nvar anObject    = _dereq_(7)\n  , toPrimitive = _dereq_(110)\n  , NUMBER      = 'number';\n\nmodule.exports = function(hint){\n  if(hint !== 'string' && hint !== NUMBER && hint !== 'default')throw TypeError('Incorrect hint');\n  return toPrimitive(anObject(this), hint != NUMBER);\n};\n},{\"110\":110,\"7\":7}],27:[function(_dereq_,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],28:[function(_dereq_,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !_dereq_(34)(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"34\":34}],29:[function(_dereq_,module,exports){\nvar isObject = _dereq_(49)\n  , document = _dereq_(38).document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n},{\"38\":38,\"49\":49}],30:[function(_dereq_,module,exports){\n// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n},{}],31:[function(_dereq_,module,exports){\n// all enumerable object keys, includes symbols\nvar getKeys = _dereq_(76)\n  , gOPS    = _dereq_(73)\n  , pIE     = _dereq_(77);\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n},{\"73\":73,\"76\":76,\"77\":77}],32:[function(_dereq_,module,exports){\nvar global    = _dereq_(38)\n  , core      = _dereq_(23)\n  , hide      = _dereq_(40)\n  , redefine  = _dereq_(87)\n  , ctx       = _dereq_(25)\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})\n    , key, own, out, exp;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if(target)redefine(target, key, out, type & $export.U);\n    // export\n    if(exports[key] != out)hide(exports, key, exp);\n    if(IS_PROTO && expProto[key] != out)expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n},{\"23\":23,\"25\":25,\"38\":38,\"40\":40,\"87\":87}],33:[function(_dereq_,module,exports){\nvar MATCH = _dereq_(117)('match');\nmodule.exports = function(KEY){\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch(e){\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch(f){ /* empty */ }\n  } return true;\n};\n},{\"117\":117}],34:[function(_dereq_,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],35:[function(_dereq_,module,exports){\n'use strict';\nvar hide     = _dereq_(40)\n  , redefine = _dereq_(87)\n  , fails    = _dereq_(34)\n  , defined  = _dereq_(27)\n  , wks      = _dereq_(117);\n\nmodule.exports = function(KEY, length, exec){\n  var SYMBOL   = wks(KEY)\n    , fns      = exec(defined, SYMBOL, ''[KEY])\n    , strfn    = fns[0]\n    , rxfn     = fns[1];\n  if(fails(function(){\n    var O = {};\n    O[SYMBOL] = function(){ return 7; };\n    return ''[KEY](O) != 7;\n  })){\n    redefine(String.prototype, KEY, strfn);\n    hide(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function(string, arg){ return rxfn.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function(string){ return rxfn.call(string, this); }\n    );\n  }\n};\n},{\"117\":117,\"27\":27,\"34\":34,\"40\":40,\"87\":87}],36:[function(_dereq_,module,exports){\n'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = _dereq_(7);\nmodule.exports = function(){\n  var that   = anObject(this)\n    , result = '';\n  if(that.global)     result += 'g';\n  if(that.ignoreCase) result += 'i';\n  if(that.multiline)  result += 'm';\n  if(that.unicode)    result += 'u';\n  if(that.sticky)     result += 'y';\n  return result;\n};\n},{\"7\":7}],37:[function(_dereq_,module,exports){\nvar ctx         = _dereq_(25)\n  , call        = _dereq_(51)\n  , isArrayIter = _dereq_(46)\n  , anObject    = _dereq_(7)\n  , toLength    = _dereq_(108)\n  , getIterFn   = _dereq_(118)\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;\n},{\"108\":108,\"118\":118,\"25\":25,\"46\":46,\"51\":51,\"7\":7}],38:[function(_dereq_,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],39:[function(_dereq_,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],40:[function(_dereq_,module,exports){\nvar dP         = _dereq_(67)\n  , createDesc = _dereq_(85);\nmodule.exports = _dereq_(28) ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"28\":28,\"67\":67,\"85\":85}],41:[function(_dereq_,module,exports){\nmodule.exports = _dereq_(38).document && document.documentElement;\n},{\"38\":38}],42:[function(_dereq_,module,exports){\nmodule.exports = !_dereq_(28) && !_dereq_(34)(function(){\n  return Object.defineProperty(_dereq_(29)('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"28\":28,\"29\":29,\"34\":34}],43:[function(_dereq_,module,exports){\nvar isObject       = _dereq_(49)\n  , setPrototypeOf = _dereq_(90).set;\nmodule.exports = function(that, target, C){\n  var P, S = target.constructor;\n  if(S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf){\n    setPrototypeOf(that, P);\n  } return that;\n};\n},{\"49\":49,\"90\":90}],44:[function(_dereq_,module,exports){\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n},{}],45:[function(_dereq_,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = _dereq_(18);\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"18\":18}],46:[function(_dereq_,module,exports){\n// check on default Array iterator\nvar Iterators  = _dereq_(56)\n  , ITERATOR   = _dereq_(117)('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n},{\"117\":117,\"56\":56}],47:[function(_dereq_,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = _dereq_(18);\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n},{\"18\":18}],48:[function(_dereq_,module,exports){\n// 20.1.2.3 Number.isInteger(number)\nvar isObject = _dereq_(49)\n  , floor    = Math.floor;\nmodule.exports = function isInteger(it){\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n},{\"49\":49}],49:[function(_dereq_,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],50:[function(_dereq_,module,exports){\n// 7.2.8 IsRegExp(argument)\nvar isObject = _dereq_(49)\n  , cof      = _dereq_(18)\n  , MATCH    = _dereq_(117)('match');\nmodule.exports = function(it){\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n},{\"117\":117,\"18\":18,\"49\":49}],51:[function(_dereq_,module,exports){\n// call something on iterator step with safe closing on error\nvar anObject = _dereq_(7);\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n},{\"7\":7}],52:[function(_dereq_,module,exports){\n'use strict';\nvar create         = _dereq_(66)\n  , descriptor     = _dereq_(85)\n  , setToStringTag = _dereq_(92)\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n_dereq_(40)(IteratorPrototype, _dereq_(117)('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n},{\"117\":117,\"40\":40,\"66\":66,\"85\":85,\"92\":92}],53:[function(_dereq_,module,exports){\n'use strict';\nvar LIBRARY        = _dereq_(58)\n  , $export        = _dereq_(32)\n  , redefine       = _dereq_(87)\n  , hide           = _dereq_(40)\n  , has            = _dereq_(39)\n  , Iterators      = _dereq_(56)\n  , $iterCreate    = _dereq_(52)\n  , setToStringTag = _dereq_(92)\n  , getPrototypeOf = _dereq_(74)\n  , ITERATOR       = _dereq_(117)('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n},{\"117\":117,\"32\":32,\"39\":39,\"40\":40,\"52\":52,\"56\":56,\"58\":58,\"74\":74,\"87\":87,\"92\":92}],54:[function(_dereq_,module,exports){\nvar ITERATOR     = _dereq_(117)('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n},{\"117\":117}],55:[function(_dereq_,module,exports){\nmodule.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n},{}],56:[function(_dereq_,module,exports){\nmodule.exports = {};\n},{}],57:[function(_dereq_,module,exports){\nvar getKeys   = _dereq_(76)\n  , toIObject = _dereq_(107);\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n},{\"107\":107,\"76\":76}],58:[function(_dereq_,module,exports){\nmodule.exports = false;\n},{}],59:[function(_dereq_,module,exports){\n// 20.2.2.14 Math.expm1(x)\nvar $expm1 = Math.expm1;\nmodule.exports = (!$expm1\n  // Old FF bug\n  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168\n  // Tor Browser bug\n  || $expm1(-2e-17) != -2e-17\n) ? function expm1(x){\n  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;\n} : $expm1;\n},{}],60:[function(_dereq_,module,exports){\n// 20.2.2.20 Math.log1p(x)\nmodule.exports = Math.log1p || function log1p(x){\n  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : Math.log(1 + x);\n};\n},{}],61:[function(_dereq_,module,exports){\n// 20.2.2.28 Math.sign(x)\nmodule.exports = Math.sign || function sign(x){\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n},{}],62:[function(_dereq_,module,exports){\nvar META     = _dereq_(114)('meta')\n  , isObject = _dereq_(49)\n  , has      = _dereq_(39)\n  , setDesc  = _dereq_(67).f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !_dereq_(34)(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n},{\"114\":114,\"34\":34,\"39\":39,\"49\":49,\"67\":67}],63:[function(_dereq_,module,exports){\nvar Map     = _dereq_(149)\n  , $export = _dereq_(32)\n  , shared  = _dereq_(94)('metadata')\n  , store   = shared.store || (shared.store = new (_dereq_(255)));\n\nvar getOrCreateMetadataMap = function(target, targetKey, create){\n  var targetMetadata = store.get(target);\n  if(!targetMetadata){\n    if(!create)return undefined;\n    store.set(target, targetMetadata = new Map);\n  }\n  var keyMetadata = targetMetadata.get(targetKey);\n  if(!keyMetadata){\n    if(!create)return undefined;\n    targetMetadata.set(targetKey, keyMetadata = new Map);\n  } return keyMetadata;\n};\nvar ordinaryHasOwnMetadata = function(MetadataKey, O, P){\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);\n};\nvar ordinaryGetOwnMetadata = function(MetadataKey, O, P){\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);\n};\nvar ordinaryDefineOwnMetadata = function(MetadataKey, MetadataValue, O, P){\n  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);\n};\nvar ordinaryOwnMetadataKeys = function(target, targetKey){\n  var metadataMap = getOrCreateMetadataMap(target, targetKey, false)\n    , keys        = [];\n  if(metadataMap)metadataMap.forEach(function(_, key){ keys.push(key); });\n  return keys;\n};\nvar toMetaKey = function(it){\n  return it === undefined || typeof it == 'symbol' ? it : String(it);\n};\nvar exp = function(O){\n  $export($export.S, 'Reflect', O);\n};\n\nmodule.exports = {\n  store: store,\n  map: getOrCreateMetadataMap,\n  has: ordinaryHasOwnMetadata,\n  get: ordinaryGetOwnMetadata,\n  set: ordinaryDefineOwnMetadata,\n  keys: ordinaryOwnMetadataKeys,\n  key: toMetaKey,\n  exp: exp\n};\n},{\"149\":149,\"255\":255,\"32\":32,\"94\":94}],64:[function(_dereq_,module,exports){\nvar global    = _dereq_(38)\n  , macrotask = _dereq_(104).set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = _dereq_(18)(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n},{\"104\":104,\"18\":18,\"38\":38}],65:[function(_dereq_,module,exports){\n'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = _dereq_(76)\n  , gOPS     = _dereq_(73)\n  , pIE      = _dereq_(77)\n  , toObject = _dereq_(109)\n  , IObject  = _dereq_(45)\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || _dereq_(34)(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n},{\"109\":109,\"34\":34,\"45\":45,\"73\":73,\"76\":76,\"77\":77}],66:[function(_dereq_,module,exports){\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = _dereq_(7)\n  , dPs         = _dereq_(68)\n  , enumBugKeys = _dereq_(30)\n  , IE_PROTO    = _dereq_(93)('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = _dereq_(29)('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  _dereq_(41).appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n},{\"29\":29,\"30\":30,\"41\":41,\"68\":68,\"7\":7,\"93\":93}],67:[function(_dereq_,module,exports){\nvar anObject       = _dereq_(7)\n  , IE8_DOM_DEFINE = _dereq_(42)\n  , toPrimitive    = _dereq_(110)\n  , dP             = Object.defineProperty;\n\nexports.f = _dereq_(28) ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n},{\"110\":110,\"28\":28,\"42\":42,\"7\":7}],68:[function(_dereq_,module,exports){\nvar dP       = _dereq_(67)\n  , anObject = _dereq_(7)\n  , getKeys  = _dereq_(76);\n\nmodule.exports = _dereq_(28) ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n},{\"28\":28,\"67\":67,\"7\":7,\"76\":76}],69:[function(_dereq_,module,exports){\n// Forced replacement prototype accessors methods\nmodule.exports = _dereq_(58)|| !_dereq_(34)(function(){\n  var K = Math.random();\n  // In FF throws only define methods\n  __defineSetter__.call(null, K, function(){ /* empty */});\n  delete _dereq_(38)[K];\n});\n},{\"34\":34,\"38\":38,\"58\":58}],70:[function(_dereq_,module,exports){\nvar pIE            = _dereq_(77)\n  , createDesc     = _dereq_(85)\n  , toIObject      = _dereq_(107)\n  , toPrimitive    = _dereq_(110)\n  , has            = _dereq_(39)\n  , IE8_DOM_DEFINE = _dereq_(42)\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = _dereq_(28) ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n},{\"107\":107,\"110\":110,\"28\":28,\"39\":39,\"42\":42,\"77\":77,\"85\":85}],71:[function(_dereq_,module,exports){\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = _dereq_(107)\n  , gOPN      = _dereq_(72).f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n},{\"107\":107,\"72\":72}],72:[function(_dereq_,module,exports){\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = _dereq_(75)\n  , hiddenKeys = _dereq_(30).concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n},{\"30\":30,\"75\":75}],73:[function(_dereq_,module,exports){\nexports.f = Object.getOwnPropertySymbols;\n},{}],74:[function(_dereq_,module,exports){\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = _dereq_(39)\n  , toObject    = _dereq_(109)\n  , IE_PROTO    = _dereq_(93)('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n},{\"109\":109,\"39\":39,\"93\":93}],75:[function(_dereq_,module,exports){\nvar has          = _dereq_(39)\n  , toIObject    = _dereq_(107)\n  , arrayIndexOf = _dereq_(11)(false)\n  , IE_PROTO     = _dereq_(93)('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n},{\"107\":107,\"11\":11,\"39\":39,\"93\":93}],76:[function(_dereq_,module,exports){\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = _dereq_(75)\n  , enumBugKeys = _dereq_(30);\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n},{\"30\":30,\"75\":75}],77:[function(_dereq_,module,exports){\nexports.f = {}.propertyIsEnumerable;\n},{}],78:[function(_dereq_,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = _dereq_(32)\n  , core    = _dereq_(23)\n  , fails   = _dereq_(34);\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"23\":23,\"32\":32,\"34\":34}],79:[function(_dereq_,module,exports){\nvar getKeys   = _dereq_(76)\n  , toIObject = _dereq_(107)\n  , isEnum    = _dereq_(77).f;\nmodule.exports = function(isEntries){\n  return function(it){\n    var O      = toIObject(it)\n      , keys   = getKeys(O)\n      , length = keys.length\n      , i      = 0\n      , result = []\n      , key;\n    while(length > i)if(isEnum.call(O, key = keys[i++])){\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n},{\"107\":107,\"76\":76,\"77\":77}],80:[function(_dereq_,module,exports){\n// all object keys, includes non-enumerable and symbols\nvar gOPN     = _dereq_(72)\n  , gOPS     = _dereq_(73)\n  , anObject = _dereq_(7)\n  , Reflect  = _dereq_(38).Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it){\n  var keys       = gOPN.f(anObject(it))\n    , getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n},{\"38\":38,\"7\":7,\"72\":72,\"73\":73}],81:[function(_dereq_,module,exports){\nvar $parseFloat = _dereq_(38).parseFloat\n  , $trim       = _dereq_(102).trim;\n\nmodule.exports = 1 / $parseFloat(_dereq_(103) + '-0') !== -Infinity ? function parseFloat(str){\n  var string = $trim(String(str), 3)\n    , result = $parseFloat(string);\n  return result === 0 && string.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n},{\"102\":102,\"103\":103,\"38\":38}],82:[function(_dereq_,module,exports){\nvar $parseInt = _dereq_(38).parseInt\n  , $trim     = _dereq_(102).trim\n  , ws        = _dereq_(103)\n  , hex       = /^[\\-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix){\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;\n},{\"102\":102,\"103\":103,\"38\":38}],83:[function(_dereq_,module,exports){\n'use strict';\nvar path      = _dereq_(84)\n  , invoke    = _dereq_(44)\n  , aFunction = _dereq_(3);\nmodule.exports = function(/* ...pargs */){\n  var fn     = aFunction(this)\n    , length = arguments.length\n    , pargs  = Array(length)\n    , i      = 0\n    , _      = path._\n    , holder = false;\n  while(length > i)if((pargs[i] = arguments[i++]) === _)holder = true;\n  return function(/* ...args */){\n    var that = this\n      , aLen = arguments.length\n      , j = 0, k = 0, args;\n    if(!holder && !aLen)return invoke(fn, pargs, that);\n    args = pargs.slice();\n    if(holder)for(;length > j; j++)if(args[j] === _)args[j] = arguments[k++];\n    while(aLen > k)args.push(arguments[k++]);\n    return invoke(fn, args, that);\n  };\n};\n},{\"3\":3,\"44\":44,\"84\":84}],84:[function(_dereq_,module,exports){\nmodule.exports = _dereq_(38);\n},{\"38\":38}],85:[function(_dereq_,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],86:[function(_dereq_,module,exports){\nvar redefine = _dereq_(87);\nmodule.exports = function(target, src, safe){\n  for(var key in src)redefine(target, key, src[key], safe);\n  return target;\n};\n},{\"87\":87}],87:[function(_dereq_,module,exports){\nvar global    = _dereq_(38)\n  , hide      = _dereq_(40)\n  , has       = _dereq_(39)\n  , SRC       = _dereq_(114)('src')\n  , TO_STRING = 'toString'\n  , $toString = Function[TO_STRING]\n  , TPL       = ('' + $toString).split(TO_STRING);\n\n_dereq_(23).inspectSource = function(it){\n  return $toString.call(it);\n};\n\n(module.exports = function(O, key, val, safe){\n  var isFunction = typeof val == 'function';\n  if(isFunction)has(val, 'name') || hide(val, 'name', key);\n  if(O[key] === val)return;\n  if(isFunction)has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if(O === global){\n    O[key] = val;\n  } else {\n    if(!safe){\n      delete O[key];\n      hide(O, key, val);\n    } else {\n      if(O[key])O[key] = val;\n      else hide(O, key, val);\n    }\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString(){\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n},{\"114\":114,\"23\":23,\"38\":38,\"39\":39,\"40\":40}],88:[function(_dereq_,module,exports){\nmodule.exports = function(regExp, replace){\n  var replacer = replace === Object(replace) ? function(part){\n    return replace[part];\n  } : replace;\n  return function(it){\n    return String(it).replace(regExp, replacer);\n  };\n};\n},{}],89:[function(_dereq_,module,exports){\n// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n},{}],90:[function(_dereq_,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = _dereq_(49)\n  , anObject = _dereq_(7);\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = _dereq_(25)(Function.call, _dereq_(70).f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"25\":25,\"49\":49,\"7\":7,\"70\":70}],91:[function(_dereq_,module,exports){\n'use strict';\nvar global      = _dereq_(38)\n  , dP          = _dereq_(67)\n  , DESCRIPTORS = _dereq_(28)\n  , SPECIES     = _dereq_(117)('species');\n\nmodule.exports = function(KEY){\n  var C = global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n},{\"117\":117,\"28\":28,\"38\":38,\"67\":67}],92:[function(_dereq_,module,exports){\nvar def = _dereq_(67).f\n  , has = _dereq_(39)\n  , TAG = _dereq_(117)('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"117\":117,\"39\":39,\"67\":67}],93:[function(_dereq_,module,exports){\nvar shared = _dereq_(94)('keys')\n  , uid    = _dereq_(114);\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n},{\"114\":114,\"94\":94}],94:[function(_dereq_,module,exports){\nvar global = _dereq_(38)\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"38\":38}],95:[function(_dereq_,module,exports){\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = _dereq_(7)\n  , aFunction = _dereq_(3)\n  , SPECIES   = _dereq_(117)('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n},{\"117\":117,\"3\":3,\"7\":7}],96:[function(_dereq_,module,exports){\nvar fails = _dereq_(34);\n\nmodule.exports = function(method, arg){\n  return !!method && fails(function(){\n    arg ? method.call(null, function(){}, 1) : method.call(null);\n  });\n};\n},{\"34\":34}],97:[function(_dereq_,module,exports){\nvar toInteger = _dereq_(106)\n  , defined   = _dereq_(27);\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n},{\"106\":106,\"27\":27}],98:[function(_dereq_,module,exports){\n// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = _dereq_(50)\n  , defined  = _dereq_(27);\n\nmodule.exports = function(that, searchString, NAME){\n  if(isRegExp(searchString))throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n},{\"27\":27,\"50\":50}],99:[function(_dereq_,module,exports){\nvar $export = _dereq_(32)\n  , fails   = _dereq_(34)\n  , defined = _dereq_(27)\n  , quot    = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function(string, tag, attribute, value) {\n  var S  = String(defined(string))\n    , p1 = '<' + tag;\n  if(attribute !== '')p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function(NAME, exec){\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function(){\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n},{\"27\":27,\"32\":32,\"34\":34}],100:[function(_dereq_,module,exports){\n// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = _dereq_(108)\n  , repeat   = _dereq_(101)\n  , defined  = _dereq_(27);\n\nmodule.exports = function(that, maxLength, fillString, left){\n  var S            = String(defined(that))\n    , stringLength = S.length\n    , fillStr      = fillString === undefined ? ' ' : String(fillString)\n    , intMaxLength = toLength(maxLength);\n  if(intMaxLength <= stringLength || fillStr == '')return S;\n  var fillLen = intMaxLength - stringLength\n    , stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if(stringFiller.length > fillLen)stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n\n},{\"101\":101,\"108\":108,\"27\":27}],101:[function(_dereq_,module,exports){\n'use strict';\nvar toInteger = _dereq_(106)\n  , defined   = _dereq_(27);\n\nmodule.exports = function repeat(count){\n  var str = String(defined(this))\n    , res = ''\n    , n   = toInteger(count);\n  if(n < 0 || n == Infinity)throw RangeError(\"Count can't be negative\");\n  for(;n > 0; (n >>>= 1) && (str += str))if(n & 1)res += str;\n  return res;\n};\n},{\"106\":106,\"27\":27}],102:[function(_dereq_,module,exports){\nvar $export = _dereq_(32)\n  , defined = _dereq_(27)\n  , fails   = _dereq_(34)\n  , spaces  = _dereq_(103)\n  , space   = '[' + spaces + ']'\n  , non     = '\\u200b\\u0085'\n  , ltrim   = RegExp('^' + space + space + '*')\n  , rtrim   = RegExp(space + space + '*$');\n\nvar exporter = function(KEY, exec, ALIAS){\n  var exp   = {};\n  var FORCE = fails(function(){\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if(ALIAS)exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function(string, TYPE){\n  string = String(defined(string));\n  if(TYPE & 1)string = string.replace(ltrim, '');\n  if(TYPE & 2)string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n},{\"103\":103,\"27\":27,\"32\":32,\"34\":34}],103:[function(_dereq_,module,exports){\nmodule.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n},{}],104:[function(_dereq_,module,exports){\nvar ctx                = _dereq_(25)\n  , invoke             = _dereq_(44)\n  , html               = _dereq_(41)\n  , cel                = _dereq_(29)\n  , global             = _dereq_(38)\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(_dereq_(18)(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n},{\"18\":18,\"25\":25,\"29\":29,\"38\":38,\"41\":41,\"44\":44}],105:[function(_dereq_,module,exports){\nvar toInteger = _dereq_(106)\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n},{\"106\":106}],106:[function(_dereq_,module,exports){\n// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n},{}],107:[function(_dereq_,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = _dereq_(45)\n  , defined = _dereq_(27);\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"27\":27,\"45\":45}],108:[function(_dereq_,module,exports){\n// 7.1.15 ToLength\nvar toInteger = _dereq_(106)\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n},{\"106\":106}],109:[function(_dereq_,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = _dereq_(27);\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"27\":27}],110:[function(_dereq_,module,exports){\n// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = _dereq_(49);\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n},{\"49\":49}],111:[function(_dereq_,module,exports){\n'use strict';\nif(_dereq_(28)){\n  var LIBRARY             = _dereq_(58)\n    , global              = _dereq_(38)\n    , fails               = _dereq_(34)\n    , $export             = _dereq_(32)\n    , $typed              = _dereq_(113)\n    , $buffer             = _dereq_(112)\n    , ctx                 = _dereq_(25)\n    , anInstance          = _dereq_(6)\n    , propertyDesc        = _dereq_(85)\n    , hide                = _dereq_(40)\n    , redefineAll         = _dereq_(86)\n    , toInteger           = _dereq_(106)\n    , toLength            = _dereq_(108)\n    , toIndex             = _dereq_(105)\n    , toPrimitive         = _dereq_(110)\n    , has                 = _dereq_(39)\n    , same                = _dereq_(89)\n    , classof             = _dereq_(17)\n    , isObject            = _dereq_(49)\n    , toObject            = _dereq_(109)\n    , isArrayIter         = _dereq_(46)\n    , create              = _dereq_(66)\n    , getPrototypeOf      = _dereq_(74)\n    , gOPN                = _dereq_(72).f\n    , getIterFn           = _dereq_(118)\n    , uid                 = _dereq_(114)\n    , wks                 = _dereq_(117)\n    , createArrayMethod   = _dereq_(12)\n    , createArrayIncludes = _dereq_(11)\n    , speciesConstructor  = _dereq_(95)\n    , ArrayIterators      = _dereq_(130)\n    , Iterators           = _dereq_(56)\n    , $iterDetect         = _dereq_(54)\n    , setSpecies          = _dereq_(91)\n    , arrayFill           = _dereq_(9)\n    , arrayCopyWithin     = _dereq_(8)\n    , $DP                 = _dereq_(67)\n    , $GOPD               = _dereq_(70)\n    , dP                  = $DP.f\n    , gOPD                = $GOPD.f\n    , RangeError          = global.RangeError\n    , TypeError           = global.TypeError\n    , Uint8Array          = global.Uint8Array\n    , ARRAY_BUFFER        = 'ArrayBuffer'\n    , SHARED_BUFFER       = 'Shared' + ARRAY_BUFFER\n    , BYTES_PER_ELEMENT   = 'BYTES_PER_ELEMENT'\n    , PROTOTYPE           = 'prototype'\n    , ArrayProto          = Array[PROTOTYPE]\n    , $ArrayBuffer        = $buffer.ArrayBuffer\n    , $DataView           = $buffer.DataView\n    , arrayForEach        = createArrayMethod(0)\n    , arrayFilter         = createArrayMethod(2)\n    , arraySome           = createArrayMethod(3)\n    , arrayEvery          = createArrayMethod(4)\n    , arrayFind           = createArrayMethod(5)\n    , arrayFindIndex      = createArrayMethod(6)\n    , arrayIncludes       = createArrayIncludes(true)\n    , arrayIndexOf        = createArrayIncludes(false)\n    , arrayValues         = ArrayIterators.values\n    , arrayKeys           = ArrayIterators.keys\n    , arrayEntries        = ArrayIterators.entries\n    , arrayLastIndexOf    = ArrayProto.lastIndexOf\n    , arrayReduce         = ArrayProto.reduce\n    , arrayReduceRight    = ArrayProto.reduceRight\n    , arrayJoin           = ArrayProto.join\n    , arraySort           = ArrayProto.sort\n    , arraySlice          = ArrayProto.slice\n    , arrayToString       = ArrayProto.toString\n    , arrayToLocaleString = ArrayProto.toLocaleString\n    , ITERATOR            = wks('iterator')\n    , TAG                 = wks('toStringTag')\n    , TYPED_CONSTRUCTOR   = uid('typed_constructor')\n    , DEF_CONSTRUCTOR     = uid('def_constructor')\n    , ALL_CONSTRUCTORS    = $typed.CONSTR\n    , TYPED_ARRAY         = $typed.TYPED\n    , VIEW                = $typed.VIEW\n    , WRONG_LENGTH        = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function(O, length){\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function(){\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function(){\n    new Uint8Array(1).set({});\n  });\n\n  var strictToLength = function(it, SAME){\n    if(it === undefined)throw TypeError(WRONG_LENGTH);\n    var number = +it\n      , length = toLength(it);\n    if(SAME && !same(number, length))throw RangeError(WRONG_LENGTH);\n    return length;\n  };\n\n  var toOffset = function(it, BYTES){\n    var offset = toInteger(it);\n    if(offset < 0 || offset % BYTES)throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function(it){\n    if(isObject(it) && TYPED_ARRAY in it)return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function(C, length){\n    if(!(isObject(C) && TYPED_CONSTRUCTOR in C)){\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function(O, list){\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function(C, list){\n    var index  = 0\n      , length = list.length\n      , result = allocate(C, length);\n    while(length > index)result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function(it, key, internal){\n    dP(it, key, {get: function(){ return this._d[internal]; }});\n  };\n\n  var $from = function from(source /*, mapfn, thisArg */){\n    var O       = toObject(source)\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , iterFn  = getIterFn(O)\n      , i, length, values, result, step, iterator;\n    if(iterFn != undefined && !isArrayIter(iterFn)){\n      for(iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++){\n        values.push(step.value);\n      } O = values;\n    }\n    if(mapping && aLen > 2)mapfn = ctx(mapfn, arguments[2], 2);\n    for(i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++){\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/*...items*/){\n    var index  = 0\n      , length = arguments.length\n      , result = allocate(this, length);\n    while(length > index)result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function(){ arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString(){\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /*, end */){\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /*, thisArg */){\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /*, start, end */){ // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /*, thisArg */){\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /*, thisArg */){\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /*, thisArg */){\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /*, thisArg */){\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /*, fromIndex */){\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /*, fromIndex */){\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator){ // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /*, fromIndex */){ // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /*, thisArg */){\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /*, initialValue */){ // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /*, initialValue */){ // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse(){\n      var that   = this\n        , length = validate(that).length\n        , middle = Math.floor(length / 2)\n        , index  = 0\n        , value;\n      while(index < middle){\n        value         = that[index];\n        that[index++] = that[--length];\n        that[length]  = value;\n      } return that;\n    },\n    some: function some(callbackfn /*, thisArg */){\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn){\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end){\n      var O      = validate(this)\n        , length = O.length\n        , $begin = toIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end){\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /*, offset */){\n    validate(this);\n    var offset = toOffset(arguments[1], 1)\n      , length = this.length\n      , src    = toObject(arrayLike)\n      , len    = toLength(src.length)\n      , index  = 0;\n    if(len + offset > length)throw RangeError(WRONG_LENGTH);\n    while(index < len)this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries(){\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys(){\n      return arrayKeys.call(validate(this));\n    },\n    values: function values(){\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function(target, key){\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key){\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc){\n    if(isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ){\n      target[key] = desc.value;\n      return target;\n    } else return dP(target, key, desc);\n  };\n\n  if(!ALL_CONSTRUCTORS){\n    $GOPD.f = $getDesc;\n    $DP.f   = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty:           $setDesc\n  });\n\n  if(fails(function(){ arrayToString.call({}); })){\n    arrayToString = arrayToLocaleString = function toString(){\n      return arrayJoin.call(this);\n    }\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice:          $slice,\n    set:            $set,\n    constructor:    function(){ /* noop */ },\n    toString:       arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function(){ return this[TYPED_ARRAY]; }\n  });\n\n  module.exports = function(KEY, BYTES, wrapper, CLAMPED){\n    CLAMPED = !!CLAMPED;\n    var NAME       = KEY + (CLAMPED ? 'Clamped' : '') + 'Array'\n      , ISNT_UINT8 = NAME != 'Uint8Array'\n      , GETTER     = 'get' + KEY\n      , SETTER     = 'set' + KEY\n      , TypedArray = global[NAME]\n      , Base       = TypedArray || {}\n      , TAC        = TypedArray && getPrototypeOf(TypedArray)\n      , FORCED     = !TypedArray || !$typed.ABV\n      , O          = {}\n      , TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function(that, index){\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function(that, index, value){\n      var data = that._d;\n      if(CLAMPED)value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function(that, index){\n      dP(that, index, {\n        get: function(){\n          return getter(this, index);\n        },\n        set: function(value){\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if(FORCED){\n      TypedArray = wrapper(function(that, data, $offset, $length){\n        anInstance(that, TypedArray, NAME, '_d');\n        var index  = 0\n          , offset = 0\n          , buffer, byteLength, length, klass;\n        if(!isObject(data)){\n          length     = strictToLength(data, true)\n          byteLength = length * BYTES;\n          buffer     = new $ArrayBuffer(byteLength);\n        } else if(data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER){\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if($length === undefined){\n            if($len % BYTES)throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if(byteLength < 0)throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if(byteLength + offset > $len)throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if(TYPED_ARRAY in data){\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while(index < length)addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if(!$iterDetect(function(iter){\n      // V8 works with iterators, but fails in many other cases\n      // https://code.google.com/p/v8/issues/detail?id=4552\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)){\n      TypedArray = wrapper(function(that, data, $offset, $length){\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if(!isObject(data))return new Base(strictToLength(data, ISNT_UINT8));\n        if(data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER){\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if(TYPED_ARRAY in data)return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function(key){\n        if(!(key in TypedArray))hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if(!LIBRARY)TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator   = TypedArrayPrototype[ITERATOR]\n      , CORRECT_ITER_NAME = !!$nativeIterator && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined)\n      , $iterator         = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if(CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)){\n      dP(TypedArrayPrototype, TAG, {\n        get: function(){ return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES,\n      from: $from,\n      of: $of\n    });\n\n    if(!(BYTES_PER_ELEMENT in TypedArrayPrototype))hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, {set: $set});\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    $export($export.P + $export.F * (TypedArrayPrototype.toString != arrayToString), NAME, {toString: arrayToString});\n\n    $export($export.P + $export.F * fails(function(){\n      new TypedArray(1).slice();\n    }), NAME, {slice: $slice});\n\n    $export($export.P + $export.F * (fails(function(){\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString()\n    }) || !fails(function(){\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, {toLocaleString: $toLocaleString});\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if(!LIBRARY && !CORRECT_ITER_NAME)hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function(){ /* empty */ };\n},{\"105\":105,\"106\":106,\"108\":108,\"109\":109,\"11\":11,\"110\":110,\"112\":112,\"113\":113,\"114\":114,\"117\":117,\"118\":118,\"12\":12,\"130\":130,\"17\":17,\"25\":25,\"28\":28,\"32\":32,\"34\":34,\"38\":38,\"39\":39,\"40\":40,\"46\":46,\"49\":49,\"54\":54,\"56\":56,\"58\":58,\"6\":6,\"66\":66,\"67\":67,\"70\":70,\"72\":72,\"74\":74,\"8\":8,\"85\":85,\"86\":86,\"89\":89,\"9\":9,\"91\":91,\"95\":95}],112:[function(_dereq_,module,exports){\n'use strict';\nvar global         = _dereq_(38)\n  , DESCRIPTORS    = _dereq_(28)\n  , LIBRARY        = _dereq_(58)\n  , $typed         = _dereq_(113)\n  , hide           = _dereq_(40)\n  , redefineAll    = _dereq_(86)\n  , fails          = _dereq_(34)\n  , anInstance     = _dereq_(6)\n  , toInteger      = _dereq_(106)\n  , toLength       = _dereq_(108)\n  , gOPN           = _dereq_(72).f\n  , dP             = _dereq_(67).f\n  , arrayFill      = _dereq_(9)\n  , setToStringTag = _dereq_(92)\n  , ARRAY_BUFFER   = 'ArrayBuffer'\n  , DATA_VIEW      = 'DataView'\n  , PROTOTYPE      = 'prototype'\n  , WRONG_LENGTH   = 'Wrong length!'\n  , WRONG_INDEX    = 'Wrong index!'\n  , $ArrayBuffer   = global[ARRAY_BUFFER]\n  , $DataView      = global[DATA_VIEW]\n  , Math           = global.Math\n  , RangeError     = global.RangeError\n  , Infinity       = global.Infinity\n  , BaseBuffer     = $ArrayBuffer\n  , abs            = Math.abs\n  , pow            = Math.pow\n  , floor          = Math.floor\n  , log            = Math.log\n  , LN2            = Math.LN2\n  , BUFFER         = 'buffer'\n  , BYTE_LENGTH    = 'byteLength'\n  , BYTE_OFFSET    = 'byteOffset'\n  , $BUFFER        = DESCRIPTORS ? '_b' : BUFFER\n  , $LENGTH        = DESCRIPTORS ? '_l' : BYTE_LENGTH\n  , $OFFSET        = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nvar packIEEE754 = function(value, mLen, nBytes){\n  var buffer = Array(nBytes)\n    , eLen   = nBytes * 8 - mLen - 1\n    , eMax   = (1 << eLen) - 1\n    , eBias  = eMax >> 1\n    , rt     = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0\n    , i      = 0\n    , s      = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0\n    , e, m, c;\n  value = abs(value)\n  if(value != value || value === Infinity){\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if(value * (c = pow(2, -e)) < 1){\n      e--;\n      c *= 2;\n    }\n    if(e + eBias >= 1){\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if(value * c >= 2){\n      e++;\n      c /= 2;\n    }\n    if(e + eBias >= eMax){\n      m = 0;\n      e = eMax;\n    } else if(e + eBias >= 1){\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for(; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for(; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n};\nvar unpackIEEE754 = function(buffer, mLen, nBytes){\n  var eLen  = nBytes * 8 - mLen - 1\n    , eMax  = (1 << eLen) - 1\n    , eBias = eMax >> 1\n    , nBits = eLen - 7\n    , i     = nBytes - 1\n    , s     = buffer[i--]\n    , e     = s & 127\n    , m;\n  s >>= 7;\n  for(; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for(; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if(e === 0){\n    e = 1 - eBias;\n  } else if(e === eMax){\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n};\n\nvar unpackI32 = function(bytes){\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n};\nvar packI8 = function(it){\n  return [it & 0xff];\n};\nvar packI16 = function(it){\n  return [it & 0xff, it >> 8 & 0xff];\n};\nvar packI32 = function(it){\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n};\nvar packF64 = function(it){\n  return packIEEE754(it, 52, 8);\n};\nvar packF32 = function(it){\n  return packIEEE754(it, 23, 4);\n};\n\nvar addGetter = function(C, key, internal){\n  dP(C[PROTOTYPE], key, {get: function(){ return this[internal]; }});\n};\n\nvar get = function(view, bytes, index, isLittleEndian){\n  var numIndex = +index\n    , intIndex = toInteger(numIndex);\n  if(numIndex != intIndex || intIndex < 0 || intIndex + bytes > view[$LENGTH])throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b\n    , start = intIndex + view[$OFFSET]\n    , pack  = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n};\nvar set = function(view, bytes, index, conversion, value, isLittleEndian){\n  var numIndex = +index\n    , intIndex = toInteger(numIndex);\n  if(numIndex != intIndex || intIndex < 0 || intIndex + bytes > view[$LENGTH])throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b\n    , start = intIndex + view[$OFFSET]\n    , pack  = conversion(+value);\n  for(var i = 0; i < bytes; i++)store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n};\n\nvar validateArrayBufferArguments = function(that, length){\n  anInstance(that, $ArrayBuffer, ARRAY_BUFFER);\n  var numberLength = +length\n    , byteLength   = toLength(numberLength);\n  if(numberLength != byteLength)throw RangeError(WRONG_LENGTH);\n  return byteLength;\n};\n\nif(!$typed.ABV){\n  $ArrayBuffer = function ArrayBuffer(length){\n    var byteLength = validateArrayBufferArguments(this, length);\n    this._b       = arrayFill.call(Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength){\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH]\n      , offset       = toInteger(byteOffset);\n    if(offset < 0 || offset > bufferLength)throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if(offset + byteLength > bufferLength)throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if(DESCRIPTORS){\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset){\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset){\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /*, littleEndian */){\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /*, littleEndian */){\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /*, littleEndian */){\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /*, littleEndian */){\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /*, littleEndian */){\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /*, littleEndian */){\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value){\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value){\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /*, littleEndian */){\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /*, littleEndian */){\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /*, littleEndian */){\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /*, littleEndian */){\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /*, littleEndian */){\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /*, littleEndian */){\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if(!fails(function(){\n    new $ArrayBuffer;     // eslint-disable-line no-new\n  }) || !fails(function(){\n    new $ArrayBuffer(.5); // eslint-disable-line no-new\n  })){\n    $ArrayBuffer = function ArrayBuffer(length){\n      return new BaseBuffer(validateArrayBufferArguments(this, length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for(var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j; ){\n      if(!((key = keys[j++]) in $ArrayBuffer))hide($ArrayBuffer, key, BaseBuffer[key]);\n    };\n    if(!LIBRARY)ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2))\n    , $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if(view.getInt8(0) || !view.getInt8(1))redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value){\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value){\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n},{\"106\":106,\"108\":108,\"113\":113,\"28\":28,\"34\":34,\"38\":38,\"40\":40,\"58\":58,\"6\":6,\"67\":67,\"72\":72,\"86\":86,\"9\":9,\"92\":92}],113:[function(_dereq_,module,exports){\nvar global = _dereq_(38)\n  , hide   = _dereq_(40)\n  , uid    = _dereq_(114)\n  , TYPED  = uid('typed_array')\n  , VIEW   = uid('view')\n  , ABV    = !!(global.ArrayBuffer && global.DataView)\n  , CONSTR = ABV\n  , i = 0, l = 9, Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile(i < l){\n  if(Typed = global[TypedArrayConstructors[i++]]){\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV:    ABV,\n  CONSTR: CONSTR,\n  TYPED:  TYPED,\n  VIEW:   VIEW\n};\n},{\"114\":114,\"38\":38,\"40\":40}],114:[function(_dereq_,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],115:[function(_dereq_,module,exports){\nvar global         = _dereq_(38)\n  , core           = _dereq_(23)\n  , LIBRARY        = _dereq_(58)\n  , wksExt         = _dereq_(116)\n  , defineProperty = _dereq_(67).f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n},{\"116\":116,\"23\":23,\"38\":38,\"58\":58,\"67\":67}],116:[function(_dereq_,module,exports){\nexports.f = _dereq_(117);\n},{\"117\":117}],117:[function(_dereq_,module,exports){\nvar store      = _dereq_(94)('wks')\n  , uid        = _dereq_(114)\n  , Symbol     = _dereq_(38).Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n},{\"114\":114,\"38\":38,\"94\":94}],118:[function(_dereq_,module,exports){\nvar classof   = _dereq_(17)\n  , ITERATOR  = _dereq_(117)('iterator')\n  , Iterators = _dereq_(56);\nmodule.exports = _dereq_(23).getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n},{\"117\":117,\"17\":17,\"23\":23,\"56\":56}],119:[function(_dereq_,module,exports){\n// https://github.com/benjamingr/RexExp.escape\nvar $export = _dereq_(32)\n  , $re     = _dereq_(88)(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\n$export($export.S, 'RegExp', {escape: function escape(it){ return $re(it); }});\n\n},{\"32\":32,\"88\":88}],120:[function(_dereq_,module,exports){\n// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\nvar $export = _dereq_(32);\n\n$export($export.P, 'Array', {copyWithin: _dereq_(8)});\n\n_dereq_(5)('copyWithin');\n},{\"32\":32,\"5\":5,\"8\":8}],121:[function(_dereq_,module,exports){\n'use strict';\nvar $export = _dereq_(32)\n  , $every  = _dereq_(12)(4);\n\n$export($export.P + $export.F * !_dereq_(96)([].every, true), 'Array', {\n  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])\n  every: function every(callbackfn /* , thisArg */){\n    return $every(this, callbackfn, arguments[1]);\n  }\n});\n},{\"12\":12,\"32\":32,\"96\":96}],122:[function(_dereq_,module,exports){\n// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = _dereq_(32);\n\n$export($export.P, 'Array', {fill: _dereq_(9)});\n\n_dereq_(5)('fill');\n},{\"32\":32,\"5\":5,\"9\":9}],123:[function(_dereq_,module,exports){\n'use strict';\nvar $export = _dereq_(32)\n  , $filter = _dereq_(12)(2);\n\n$export($export.P + $export.F * !_dereq_(96)([].filter, true), 'Array', {\n  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])\n  filter: function filter(callbackfn /* , thisArg */){\n    return $filter(this, callbackfn, arguments[1]);\n  }\n});\n},{\"12\":12,\"32\":32,\"96\":96}],124:[function(_dereq_,module,exports){\n'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = _dereq_(32)\n  , $find   = _dereq_(12)(6)\n  , KEY     = 'findIndex'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n_dereq_(5)(KEY);\n},{\"12\":12,\"32\":32,\"5\":5}],125:[function(_dereq_,module,exports){\n'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = _dereq_(32)\n  , $find   = _dereq_(12)(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n_dereq_(5)(KEY);\n},{\"12\":12,\"32\":32,\"5\":5}],126:[function(_dereq_,module,exports){\n'use strict';\nvar $export  = _dereq_(32)\n  , $forEach = _dereq_(12)(0)\n  , STRICT   = _dereq_(96)([].forEach, true);\n\n$export($export.P + $export.F * !STRICT, 'Array', {\n  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])\n  forEach: function forEach(callbackfn /* , thisArg */){\n    return $forEach(this, callbackfn, arguments[1]);\n  }\n});\n},{\"12\":12,\"32\":32,\"96\":96}],127:[function(_dereq_,module,exports){\n'use strict';\nvar ctx            = _dereq_(25)\n  , $export        = _dereq_(32)\n  , toObject       = _dereq_(109)\n  , call           = _dereq_(51)\n  , isArrayIter    = _dereq_(46)\n  , toLength       = _dereq_(108)\n  , createProperty = _dereq_(24)\n  , getIterFn      = _dereq_(118);\n\n$export($export.S + $export.F * !_dereq_(54)(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n},{\"108\":108,\"109\":109,\"118\":118,\"24\":24,\"25\":25,\"32\":32,\"46\":46,\"51\":51,\"54\":54}],128:[function(_dereq_,module,exports){\n'use strict';\nvar $export       = _dereq_(32)\n  , $indexOf      = _dereq_(11)(false)\n  , $native       = [].indexOf\n  , NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !_dereq_(96)($native)), 'Array', {\n  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])\n  indexOf: function indexOf(searchElement /*, fromIndex = 0 */){\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? $native.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments[1]);\n  }\n});\n},{\"11\":11,\"32\":32,\"96\":96}],129:[function(_dereq_,module,exports){\n// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Array', {isArray: _dereq_(47)});\n},{\"32\":32,\"47\":47}],130:[function(_dereq_,module,exports){\n'use strict';\nvar addToUnscopables = _dereq_(5)\n  , step             = _dereq_(55)\n  , Iterators        = _dereq_(56)\n  , toIObject        = _dereq_(107);\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = _dereq_(53)(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n},{\"107\":107,\"5\":5,\"53\":53,\"55\":55,\"56\":56}],131:[function(_dereq_,module,exports){\n'use strict';\n// 22.1.3.13 Array.prototype.join(separator)\nvar $export   = _dereq_(32)\n  , toIObject = _dereq_(107)\n  , arrayJoin = [].join;\n\n// fallback for not array-like strings\n$export($export.P + $export.F * (_dereq_(45) != Object || !_dereq_(96)(arrayJoin)), 'Array', {\n  join: function join(separator){\n    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);\n  }\n});\n},{\"107\":107,\"32\":32,\"45\":45,\"96\":96}],132:[function(_dereq_,module,exports){\n'use strict';\nvar $export       = _dereq_(32)\n  , toIObject     = _dereq_(107)\n  , toInteger     = _dereq_(106)\n  , toLength      = _dereq_(108)\n  , $native       = [].lastIndexOf\n  , NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !_dereq_(96)($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /*, fromIndex = @[*-1] */){\n    // convert -0 to +0\n    if(NEGATIVE_ZERO)return $native.apply(this, arguments) || 0;\n    var O      = toIObject(this)\n      , length = toLength(O.length)\n      , index  = length - 1;\n    if(arguments.length > 1)index = Math.min(index, toInteger(arguments[1]));\n    if(index < 0)index = length + index;\n    for(;index >= 0; index--)if(index in O)if(O[index] === searchElement)return index || 0;\n    return -1;\n  }\n});\n},{\"106\":106,\"107\":107,\"108\":108,\"32\":32,\"96\":96}],133:[function(_dereq_,module,exports){\n'use strict';\nvar $export = _dereq_(32)\n  , $map    = _dereq_(12)(1);\n\n$export($export.P + $export.F * !_dereq_(96)([].map, true), 'Array', {\n  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])\n  map: function map(callbackfn /* , thisArg */){\n    return $map(this, callbackfn, arguments[1]);\n  }\n});\n},{\"12\":12,\"32\":32,\"96\":96}],134:[function(_dereq_,module,exports){\n'use strict';\nvar $export        = _dereq_(32)\n  , createProperty = _dereq_(24);\n\n// WebKit Array.of isn't generic\n$export($export.S + $export.F * _dereq_(34)(function(){\n  function F(){}\n  return !(Array.of.call(F) instanceof F);\n}), 'Array', {\n  // 22.1.2.3 Array.of( ...items)\n  of: function of(/* ...args */){\n    var index  = 0\n      , aLen   = arguments.length\n      , result = new (typeof this == 'function' ? this : Array)(aLen);\n    while(aLen > index)createProperty(result, index, arguments[index++]);\n    result.length = aLen;\n    return result;\n  }\n});\n},{\"24\":24,\"32\":32,\"34\":34}],135:[function(_dereq_,module,exports){\n'use strict';\nvar $export = _dereq_(32)\n  , $reduce = _dereq_(13);\n\n$export($export.P + $export.F * !_dereq_(96)([].reduceRight, true), 'Array', {\n  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])\n  reduceRight: function reduceRight(callbackfn /* , initialValue */){\n    return $reduce(this, callbackfn, arguments.length, arguments[1], true);\n  }\n});\n},{\"13\":13,\"32\":32,\"96\":96}],136:[function(_dereq_,module,exports){\n'use strict';\nvar $export = _dereq_(32)\n  , $reduce = _dereq_(13);\n\n$export($export.P + $export.F * !_dereq_(96)([].reduce, true), 'Array', {\n  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])\n  reduce: function reduce(callbackfn /* , initialValue */){\n    return $reduce(this, callbackfn, arguments.length, arguments[1], false);\n  }\n});\n},{\"13\":13,\"32\":32,\"96\":96}],137:[function(_dereq_,module,exports){\n'use strict';\nvar $export    = _dereq_(32)\n  , html       = _dereq_(41)\n  , cof        = _dereq_(18)\n  , toIndex    = _dereq_(105)\n  , toLength   = _dereq_(108)\n  , arraySlice = [].slice;\n\n// fallback for not array-like ES3 strings and DOM objects\n$export($export.P + $export.F * _dereq_(34)(function(){\n  if(html)arraySlice.call(html);\n}), 'Array', {\n  slice: function slice(begin, end){\n    var len   = toLength(this.length)\n      , klass = cof(this);\n    end = end === undefined ? len : end;\n    if(klass == 'Array')return arraySlice.call(this, begin, end);\n    var start  = toIndex(begin, len)\n      , upTo   = toIndex(end, len)\n      , size   = toLength(upTo - start)\n      , cloned = Array(size)\n      , i      = 0;\n    for(; i < size; i++)cloned[i] = klass == 'String'\n      ? this.charAt(start + i)\n      : this[start + i];\n    return cloned;\n  }\n});\n},{\"105\":105,\"108\":108,\"18\":18,\"32\":32,\"34\":34,\"41\":41}],138:[function(_dereq_,module,exports){\n'use strict';\nvar $export = _dereq_(32)\n  , $some   = _dereq_(12)(3);\n\n$export($export.P + $export.F * !_dereq_(96)([].some, true), 'Array', {\n  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])\n  some: function some(callbackfn /* , thisArg */){\n    return $some(this, callbackfn, arguments[1]);\n  }\n});\n},{\"12\":12,\"32\":32,\"96\":96}],139:[function(_dereq_,module,exports){\n'use strict';\nvar $export   = _dereq_(32)\n  , aFunction = _dereq_(3)\n  , toObject  = _dereq_(109)\n  , fails     = _dereq_(34)\n  , $sort     = [].sort\n  , test      = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function(){\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function(){\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !_dereq_(96)($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn){\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n},{\"109\":109,\"3\":3,\"32\":32,\"34\":34,\"96\":96}],140:[function(_dereq_,module,exports){\n_dereq_(91)('Array');\n},{\"91\":91}],141:[function(_dereq_,module,exports){\n// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = _dereq_(32);\n\n$export($export.S, 'Date', {now: function(){ return new Date().getTime(); }});\n},{\"32\":32}],142:[function(_dereq_,module,exports){\n'use strict';\n// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar $export = _dereq_(32)\n  , fails   = _dereq_(34)\n  , getTime = Date.prototype.getTime;\n\nvar lz = function(num){\n  return num > 9 ? num : '0' + num;\n};\n\n// PhantomJS / old WebKit has a broken implementations\n$export($export.P + $export.F * (fails(function(){\n  return new Date(-5e13 - 1).toISOString() != '0385-07-25T07:06:39.999Z';\n}) || !fails(function(){\n  new Date(NaN).toISOString();\n})), 'Date', {\n  toISOString: function toISOString(){\n    if(!isFinite(getTime.call(this)))throw RangeError('Invalid time value');\n    var d = this\n      , y = d.getUTCFullYear()\n      , m = d.getUTCMilliseconds()\n      , s = y < 0 ? '-' : y > 9999 ? '+' : '';\n    return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +\n      '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +\n      'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +\n      ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';\n  }\n});\n},{\"32\":32,\"34\":34}],143:[function(_dereq_,module,exports){\n'use strict';\nvar $export     = _dereq_(32)\n  , toObject    = _dereq_(109)\n  , toPrimitive = _dereq_(110);\n\n$export($export.P + $export.F * _dereq_(34)(function(){\n  return new Date(NaN).toJSON() !== null || Date.prototype.toJSON.call({toISOString: function(){ return 1; }}) !== 1;\n}), 'Date', {\n  toJSON: function toJSON(key){\n    var O  = toObject(this)\n      , pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n},{\"109\":109,\"110\":110,\"32\":32,\"34\":34}],144:[function(_dereq_,module,exports){\nvar TO_PRIMITIVE = _dereq_(117)('toPrimitive')\n  , proto        = Date.prototype;\n\nif(!(TO_PRIMITIVE in proto))_dereq_(40)(proto, TO_PRIMITIVE, _dereq_(26));\n},{\"117\":117,\"26\":26,\"40\":40}],145:[function(_dereq_,module,exports){\nvar DateProto    = Date.prototype\n  , INVALID_DATE = 'Invalid Date'\n  , TO_STRING    = 'toString'\n  , $toString    = DateProto[TO_STRING]\n  , getTime      = DateProto.getTime;\nif(new Date(NaN) + '' != INVALID_DATE){\n  _dereq_(87)(DateProto, TO_STRING, function toString(){\n    var value = getTime.call(this);\n    return value === value ? $toString.call(this) : INVALID_DATE;\n  });\n}\n},{\"87\":87}],146:[function(_dereq_,module,exports){\n// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)\nvar $export = _dereq_(32);\n\n$export($export.P, 'Function', {bind: _dereq_(16)});\n},{\"16\":16,\"32\":32}],147:[function(_dereq_,module,exports){\n'use strict';\nvar isObject       = _dereq_(49)\n  , getPrototypeOf = _dereq_(74)\n  , HAS_INSTANCE   = _dereq_(117)('hasInstance')\n  , FunctionProto  = Function.prototype;\n// 19.2.3.6 Function.prototype[@@hasInstance](V)\nif(!(HAS_INSTANCE in FunctionProto))_dereq_(67).f(FunctionProto, HAS_INSTANCE, {value: function(O){\n  if(typeof this != 'function' || !isObject(O))return false;\n  if(!isObject(this.prototype))return O instanceof this;\n  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n  while(O = getPrototypeOf(O))if(this.prototype === O)return true;\n  return false;\n}});\n},{\"117\":117,\"49\":49,\"67\":67,\"74\":74}],148:[function(_dereq_,module,exports){\nvar dP         = _dereq_(67).f\n  , createDesc = _dereq_(85)\n  , has        = _dereq_(39)\n  , FProto     = Function.prototype\n  , nameRE     = /^\\s*function ([^ (]*)/\n  , NAME       = 'name';\n\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\n\n// 19.2.4.2 name\nNAME in FProto || _dereq_(28) && dP(FProto, NAME, {\n  configurable: true,\n  get: function(){\n    try {\n      var that = this\n        , name = ('' + that).match(nameRE)[1];\n      has(that, NAME) || !isExtensible(that) || dP(that, NAME, createDesc(5, name));\n      return name;\n    } catch(e){\n      return '';\n    }\n  }\n});\n},{\"28\":28,\"39\":39,\"67\":67,\"85\":85}],149:[function(_dereq_,module,exports){\n'use strict';\nvar strong = _dereq_(19);\n\n// 23.1 Map Objects\nmodule.exports = _dereq_(22)('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n},{\"19\":19,\"22\":22}],150:[function(_dereq_,module,exports){\n// 20.2.2.3 Math.acosh(x)\nvar $export = _dereq_(32)\n  , log1p   = _dereq_(60)\n  , sqrt    = Math.sqrt\n  , $acosh  = Math.acosh;\n\n$export($export.S + $export.F * !($acosh\n  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509\n  && Math.floor($acosh(Number.MAX_VALUE)) == 710\n  // Tor Browser bug: Math.acosh(Infinity) -> NaN \n  && $acosh(Infinity) == Infinity\n), 'Math', {\n  acosh: function acosh(x){\n    return (x = +x) < 1 ? NaN : x > 94906265.62425156\n      ? Math.log(x) + Math.LN2\n      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));\n  }\n});\n},{\"32\":32,\"60\":60}],151:[function(_dereq_,module,exports){\n// 20.2.2.5 Math.asinh(x)\nvar $export = _dereq_(32)\n  , $asinh  = Math.asinh;\n\nfunction asinh(x){\n  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : Math.log(x + Math.sqrt(x * x + 1));\n}\n\n// Tor Browser bug: Math.asinh(0) -> -0 \n$export($export.S + $export.F * !($asinh && 1 / $asinh(0) > 0), 'Math', {asinh: asinh});\n},{\"32\":32}],152:[function(_dereq_,module,exports){\n// 20.2.2.7 Math.atanh(x)\nvar $export = _dereq_(32)\n  , $atanh  = Math.atanh;\n\n// Tor Browser bug: Math.atanh(-0) -> 0 \n$export($export.S + $export.F * !($atanh && 1 / $atanh(-0) < 0), 'Math', {\n  atanh: function atanh(x){\n    return (x = +x) == 0 ? x : Math.log((1 + x) / (1 - x)) / 2;\n  }\n});\n},{\"32\":32}],153:[function(_dereq_,module,exports){\n// 20.2.2.9 Math.cbrt(x)\nvar $export = _dereq_(32)\n  , sign    = _dereq_(61);\n\n$export($export.S, 'Math', {\n  cbrt: function cbrt(x){\n    return sign(x = +x) * Math.pow(Math.abs(x), 1 / 3);\n  }\n});\n},{\"32\":32,\"61\":61}],154:[function(_dereq_,module,exports){\n// 20.2.2.11 Math.clz32(x)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  clz32: function clz32(x){\n    return (x >>>= 0) ? 31 - Math.floor(Math.log(x + 0.5) * Math.LOG2E) : 32;\n  }\n});\n},{\"32\":32}],155:[function(_dereq_,module,exports){\n// 20.2.2.12 Math.cosh(x)\nvar $export = _dereq_(32)\n  , exp     = Math.exp;\n\n$export($export.S, 'Math', {\n  cosh: function cosh(x){\n    return (exp(x = +x) + exp(-x)) / 2;\n  }\n});\n},{\"32\":32}],156:[function(_dereq_,module,exports){\n// 20.2.2.14 Math.expm1(x)\nvar $export = _dereq_(32)\n  , $expm1  = _dereq_(59);\n\n$export($export.S + $export.F * ($expm1 != Math.expm1), 'Math', {expm1: $expm1});\n},{\"32\":32,\"59\":59}],157:[function(_dereq_,module,exports){\n// 20.2.2.16 Math.fround(x)\nvar $export   = _dereq_(32)\n  , sign      = _dereq_(61)\n  , pow       = Math.pow\n  , EPSILON   = pow(2, -52)\n  , EPSILON32 = pow(2, -23)\n  , MAX32     = pow(2, 127) * (2 - EPSILON32)\n  , MIN32     = pow(2, -126);\n\nvar roundTiesToEven = function(n){\n  return n + 1 / EPSILON - 1 / EPSILON;\n};\n\n\n$export($export.S, 'Math', {\n  fround: function fround(x){\n    var $abs  = Math.abs(x)\n      , $sign = sign(x)\n      , a, result;\n    if($abs < MIN32)return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;\n    a = (1 + EPSILON32 / EPSILON) * $abs;\n    result = a - (a - $abs);\n    if(result > MAX32 || result != result)return $sign * Infinity;\n    return $sign * result;\n  }\n});\n},{\"32\":32,\"61\":61}],158:[function(_dereq_,module,exports){\n// 20.2.2.17 Math.hypot([value1[, value2[, … ]]])\nvar $export = _dereq_(32)\n  , abs     = Math.abs;\n\n$export($export.S, 'Math', {\n  hypot: function hypot(value1, value2){ // eslint-disable-line no-unused-vars\n    var sum  = 0\n      , i    = 0\n      , aLen = arguments.length\n      , larg = 0\n      , arg, div;\n    while(i < aLen){\n      arg = abs(arguments[i++]);\n      if(larg < arg){\n        div  = larg / arg;\n        sum  = sum * div * div + 1;\n        larg = arg;\n      } else if(arg > 0){\n        div  = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n  }\n});\n},{\"32\":32}],159:[function(_dereq_,module,exports){\n// 20.2.2.18 Math.imul(x, y)\nvar $export = _dereq_(32)\n  , $imul   = Math.imul;\n\n// some WebKit versions fails with big numbers, some has wrong arity\n$export($export.S + $export.F * _dereq_(34)(function(){\n  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;\n}), 'Math', {\n  imul: function imul(x, y){\n    var UINT16 = 0xffff\n      , xn = +x\n      , yn = +y\n      , xl = UINT16 & xn\n      , yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});\n},{\"32\":32,\"34\":34}],160:[function(_dereq_,module,exports){\n// 20.2.2.21 Math.log10(x)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  log10: function log10(x){\n    return Math.log(x) / Math.LN10;\n  }\n});\n},{\"32\":32}],161:[function(_dereq_,module,exports){\n// 20.2.2.20 Math.log1p(x)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {log1p: _dereq_(60)});\n},{\"32\":32,\"60\":60}],162:[function(_dereq_,module,exports){\n// 20.2.2.22 Math.log2(x)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  log2: function log2(x){\n    return Math.log(x) / Math.LN2;\n  }\n});\n},{\"32\":32}],163:[function(_dereq_,module,exports){\n// 20.2.2.28 Math.sign(x)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {sign: _dereq_(61)});\n},{\"32\":32,\"61\":61}],164:[function(_dereq_,module,exports){\n// 20.2.2.30 Math.sinh(x)\nvar $export = _dereq_(32)\n  , expm1   = _dereq_(59)\n  , exp     = Math.exp;\n\n// V8 near Chromium 38 has a problem with very small numbers\n$export($export.S + $export.F * _dereq_(34)(function(){\n  return !Math.sinh(-2e-17) != -2e-17;\n}), 'Math', {\n  sinh: function sinh(x){\n    return Math.abs(x = +x) < 1\n      ? (expm1(x) - expm1(-x)) / 2\n      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);\n  }\n});\n},{\"32\":32,\"34\":34,\"59\":59}],165:[function(_dereq_,module,exports){\n// 20.2.2.33 Math.tanh(x)\nvar $export = _dereq_(32)\n  , expm1   = _dereq_(59)\n  , exp     = Math.exp;\n\n$export($export.S, 'Math', {\n  tanh: function tanh(x){\n    var a = expm1(x = +x)\n      , b = expm1(-x);\n    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));\n  }\n});\n},{\"32\":32,\"59\":59}],166:[function(_dereq_,module,exports){\n// 20.2.2.34 Math.trunc(x)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  trunc: function trunc(it){\n    return (it > 0 ? Math.floor : Math.ceil)(it);\n  }\n});\n},{\"32\":32}],167:[function(_dereq_,module,exports){\n'use strict';\nvar global            = _dereq_(38)\n  , has               = _dereq_(39)\n  , cof               = _dereq_(18)\n  , inheritIfRequired = _dereq_(43)\n  , toPrimitive       = _dereq_(110)\n  , fails             = _dereq_(34)\n  , gOPN              = _dereq_(72).f\n  , gOPD              = _dereq_(70).f\n  , dP                = _dereq_(67).f\n  , $trim             = _dereq_(102).trim\n  , NUMBER            = 'Number'\n  , $Number           = global[NUMBER]\n  , Base              = $Number\n  , proto             = $Number.prototype\n  // Opera ~12 has broken Object#toString\n  , BROKEN_COF        = cof(_dereq_(66)(proto)) == NUMBER\n  , TRIM              = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function(argument){\n  var it = toPrimitive(argument, false);\n  if(typeof it == 'string' && it.length > 2){\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0)\n      , third, radix, maxCode;\n    if(first === 43 || first === 45){\n      third = it.charCodeAt(2);\n      if(third === 88 || third === 120)return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if(first === 48){\n      switch(it.charCodeAt(1)){\n        case 66 : case 98  : radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79 : case 111 : radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default : return +it;\n      }\n      for(var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++){\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if(code < 48 || code > maxCode)return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif(!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')){\n  $Number = function Number(value){\n    var it = arguments.length < 1 ? 0 : value\n      , that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function(){ proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for(var keys = _dereq_(28) ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++){\n    if(has(Base, key = keys[j]) && !has($Number, key)){\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  _dereq_(87)(global, NUMBER, $Number);\n}\n},{\"102\":102,\"110\":110,\"18\":18,\"28\":28,\"34\":34,\"38\":38,\"39\":39,\"43\":43,\"66\":66,\"67\":67,\"70\":70,\"72\":72,\"87\":87}],168:[function(_dereq_,module,exports){\n// 20.1.2.1 Number.EPSILON\nvar $export = _dereq_(32);\n\n$export($export.S, 'Number', {EPSILON: Math.pow(2, -52)});\n},{\"32\":32}],169:[function(_dereq_,module,exports){\n// 20.1.2.2 Number.isFinite(number)\nvar $export   = _dereq_(32)\n  , _isFinite = _dereq_(38).isFinite;\n\n$export($export.S, 'Number', {\n  isFinite: function isFinite(it){\n    return typeof it == 'number' && _isFinite(it);\n  }\n});\n},{\"32\":32,\"38\":38}],170:[function(_dereq_,module,exports){\n// 20.1.2.3 Number.isInteger(number)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Number', {isInteger: _dereq_(48)});\n},{\"32\":32,\"48\":48}],171:[function(_dereq_,module,exports){\n// 20.1.2.4 Number.isNaN(number)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number){\n    return number != number;\n  }\n});\n},{\"32\":32}],172:[function(_dereq_,module,exports){\n// 20.1.2.5 Number.isSafeInteger(number)\nvar $export   = _dereq_(32)\n  , isInteger = _dereq_(48)\n  , abs       = Math.abs;\n\n$export($export.S, 'Number', {\n  isSafeInteger: function isSafeInteger(number){\n    return isInteger(number) && abs(number) <= 0x1fffffffffffff;\n  }\n});\n},{\"32\":32,\"48\":48}],173:[function(_dereq_,module,exports){\n// 20.1.2.6 Number.MAX_SAFE_INTEGER\nvar $export = _dereq_(32);\n\n$export($export.S, 'Number', {MAX_SAFE_INTEGER: 0x1fffffffffffff});\n},{\"32\":32}],174:[function(_dereq_,module,exports){\n// 20.1.2.10 Number.MIN_SAFE_INTEGER\nvar $export = _dereq_(32);\n\n$export($export.S, 'Number', {MIN_SAFE_INTEGER: -0x1fffffffffffff});\n},{\"32\":32}],175:[function(_dereq_,module,exports){\nvar $export     = _dereq_(32)\n  , $parseFloat = _dereq_(81);\n// 20.1.2.12 Number.parseFloat(string)\n$export($export.S + $export.F * (Number.parseFloat != $parseFloat), 'Number', {parseFloat: $parseFloat});\n},{\"32\":32,\"81\":81}],176:[function(_dereq_,module,exports){\nvar $export   = _dereq_(32)\n  , $parseInt = _dereq_(82);\n// 20.1.2.13 Number.parseInt(string, radix)\n$export($export.S + $export.F * (Number.parseInt != $parseInt), 'Number', {parseInt: $parseInt});\n},{\"32\":32,\"82\":82}],177:[function(_dereq_,module,exports){\n'use strict';\nvar $export      = _dereq_(32)\n  , toInteger    = _dereq_(106)\n  , aNumberValue = _dereq_(4)\n  , repeat       = _dereq_(101)\n  , $toFixed     = 1..toFixed\n  , floor        = Math.floor\n  , data         = [0, 0, 0, 0, 0, 0]\n  , ERROR        = 'Number.toFixed: incorrect invocation!'\n  , ZERO         = '0';\n\nvar multiply = function(n, c){\n  var i  = -1\n    , c2 = c;\n  while(++i < 6){\n    c2 += n * data[i];\n    data[i] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\nvar divide = function(n){\n  var i = 6\n    , c = 0;\n  while(--i >= 0){\n    c += data[i];\n    data[i] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\nvar numToString = function(){\n  var i = 6\n    , s = '';\n  while(--i >= 0){\n    if(s !== '' || i === 0 || data[i] !== 0){\n      var t = String(data[i]);\n      s = s === '' ? t : s + repeat.call(ZERO, 7 - t.length) + t;\n    }\n  } return s;\n};\nvar pow = function(x, n, acc){\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\nvar log = function(x){\n  var n  = 0\n    , x2 = x;\n  while(x2 >= 4096){\n    n += 12;\n    x2 /= 4096;\n  }\n  while(x2 >= 2){\n    n  += 1;\n    x2 /= 2;\n  } return n;\n};\n\n$export($export.P + $export.F * (!!$toFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128..toFixed(0) !== '1000000000000000128'\n) || !_dereq_(34)(function(){\n  // V8 ~ Android 4.3-\n  $toFixed.call({});\n})), 'Number', {\n  toFixed: function toFixed(fractionDigits){\n    var x = aNumberValue(this, ERROR)\n      , f = toInteger(fractionDigits)\n      , s = ''\n      , m = ZERO\n      , e, z, j, k;\n    if(f < 0 || f > 20)throw RangeError(ERROR);\n    if(x != x)return 'NaN';\n    if(x <= -1e21 || x >= 1e21)return String(x);\n    if(x < 0){\n      s = '-';\n      x = -x;\n    }\n    if(x > 1e-21){\n      e = log(x * pow(2, 69, 1)) - 69;\n      z = e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if(e > 0){\n        multiply(0, z);\n        j = f;\n        while(j >= 7){\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while(j >= 23){\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        m = numToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        m = numToString() + repeat.call(ZERO, f);\n      }\n    }\n    if(f > 0){\n      k = m.length;\n      m = s + (k <= f ? '0.' + repeat.call(ZERO, f - k) + m : m.slice(0, k - f) + '.' + m.slice(k - f));\n    } else {\n      m = s + m;\n    } return m;\n  }\n});\n},{\"101\":101,\"106\":106,\"32\":32,\"34\":34,\"4\":4}],178:[function(_dereq_,module,exports){\n'use strict';\nvar $export      = _dereq_(32)\n  , $fails       = _dereq_(34)\n  , aNumberValue = _dereq_(4)\n  , $toPrecision = 1..toPrecision;\n\n$export($export.P + $export.F * ($fails(function(){\n  // IE7-\n  return $toPrecision.call(1, undefined) !== '1';\n}) || !$fails(function(){\n  // V8 ~ Android 4.3-\n  $toPrecision.call({});\n})), 'Number', {\n  toPrecision: function toPrecision(precision){\n    var that = aNumberValue(this, 'Number#toPrecision: incorrect invocation!');\n    return precision === undefined ? $toPrecision.call(that) : $toPrecision.call(that, precision); \n  }\n});\n},{\"32\":32,\"34\":34,\"4\":4}],179:[function(_dereq_,module,exports){\n// 19.1.3.1 Object.assign(target, source)\nvar $export = _dereq_(32);\n\n$export($export.S + $export.F, 'Object', {assign: _dereq_(65)});\n},{\"32\":32,\"65\":65}],180:[function(_dereq_,module,exports){\nvar $export = _dereq_(32)\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', {create: _dereq_(66)});\n},{\"32\":32,\"66\":66}],181:[function(_dereq_,module,exports){\nvar $export = _dereq_(32);\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !_dereq_(28), 'Object', {defineProperties: _dereq_(68)});\n},{\"28\":28,\"32\":32,\"68\":68}],182:[function(_dereq_,module,exports){\nvar $export = _dereq_(32);\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !_dereq_(28), 'Object', {defineProperty: _dereq_(67).f});\n},{\"28\":28,\"32\":32,\"67\":67}],183:[function(_dereq_,module,exports){\n// 19.1.2.5 Object.freeze(O)\nvar isObject = _dereq_(49)\n  , meta     = _dereq_(62).onFreeze;\n\n_dereq_(78)('freeze', function($freeze){\n  return function freeze(it){\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n},{\"49\":49,\"62\":62,\"78\":78}],184:[function(_dereq_,module,exports){\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject                 = _dereq_(107)\n  , $getOwnPropertyDescriptor = _dereq_(70).f;\n\n_dereq_(78)('getOwnPropertyDescriptor', function(){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n},{\"107\":107,\"70\":70,\"78\":78}],185:[function(_dereq_,module,exports){\n// 19.1.2.7 Object.getOwnPropertyNames(O)\n_dereq_(78)('getOwnPropertyNames', function(){\n  return _dereq_(71).f;\n});\n},{\"71\":71,\"78\":78}],186:[function(_dereq_,module,exports){\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = _dereq_(109)\n  , $getPrototypeOf = _dereq_(74);\n\n_dereq_(78)('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n},{\"109\":109,\"74\":74,\"78\":78}],187:[function(_dereq_,module,exports){\n// 19.1.2.11 Object.isExtensible(O)\nvar isObject = _dereq_(49);\n\n_dereq_(78)('isExtensible', function($isExtensible){\n  return function isExtensible(it){\n    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;\n  };\n});\n},{\"49\":49,\"78\":78}],188:[function(_dereq_,module,exports){\n// 19.1.2.12 Object.isFrozen(O)\nvar isObject = _dereq_(49);\n\n_dereq_(78)('isFrozen', function($isFrozen){\n  return function isFrozen(it){\n    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;\n  };\n});\n},{\"49\":49,\"78\":78}],189:[function(_dereq_,module,exports){\n// 19.1.2.13 Object.isSealed(O)\nvar isObject = _dereq_(49);\n\n_dereq_(78)('isSealed', function($isSealed){\n  return function isSealed(it){\n    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;\n  };\n});\n},{\"49\":49,\"78\":78}],190:[function(_dereq_,module,exports){\n// 19.1.3.10 Object.is(value1, value2)\nvar $export = _dereq_(32);\n$export($export.S, 'Object', {is: _dereq_(89)});\n},{\"32\":32,\"89\":89}],191:[function(_dereq_,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = _dereq_(109)\n  , $keys    = _dereq_(76);\n\n_dereq_(78)('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"109\":109,\"76\":76,\"78\":78}],192:[function(_dereq_,module,exports){\n// 19.1.2.15 Object.preventExtensions(O)\nvar isObject = _dereq_(49)\n  , meta     = _dereq_(62).onFreeze;\n\n_dereq_(78)('preventExtensions', function($preventExtensions){\n  return function preventExtensions(it){\n    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;\n  };\n});\n},{\"49\":49,\"62\":62,\"78\":78}],193:[function(_dereq_,module,exports){\n// 19.1.2.17 Object.seal(O)\nvar isObject = _dereq_(49)\n  , meta     = _dereq_(62).onFreeze;\n\n_dereq_(78)('seal', function($seal){\n  return function seal(it){\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});\n},{\"49\":49,\"62\":62,\"78\":78}],194:[function(_dereq_,module,exports){\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = _dereq_(32);\n$export($export.S, 'Object', {setPrototypeOf: _dereq_(90).set});\n},{\"32\":32,\"90\":90}],195:[function(_dereq_,module,exports){\n'use strict';\n// 19.1.3.6 Object.prototype.toString()\nvar classof = _dereq_(17)\n  , test    = {};\ntest[_dereq_(117)('toStringTag')] = 'z';\nif(test + '' != '[object z]'){\n  _dereq_(87)(Object.prototype, 'toString', function toString(){\n    return '[object ' + classof(this) + ']';\n  }, true);\n}\n},{\"117\":117,\"17\":17,\"87\":87}],196:[function(_dereq_,module,exports){\nvar $export     = _dereq_(32)\n  , $parseFloat = _dereq_(81);\n// 18.2.4 parseFloat(string)\n$export($export.G + $export.F * (parseFloat != $parseFloat), {parseFloat: $parseFloat});\n},{\"32\":32,\"81\":81}],197:[function(_dereq_,module,exports){\nvar $export   = _dereq_(32)\n  , $parseInt = _dereq_(82);\n// 18.2.5 parseInt(string, radix)\n$export($export.G + $export.F * (parseInt != $parseInt), {parseInt: $parseInt});\n},{\"32\":32,\"82\":82}],198:[function(_dereq_,module,exports){\n'use strict';\nvar LIBRARY            = _dereq_(58)\n  , global             = _dereq_(38)\n  , ctx                = _dereq_(25)\n  , classof            = _dereq_(17)\n  , $export            = _dereq_(32)\n  , isObject           = _dereq_(49)\n  , aFunction          = _dereq_(3)\n  , anInstance         = _dereq_(6)\n  , forOf              = _dereq_(37)\n  , speciesConstructor = _dereq_(95)\n  , task               = _dereq_(104).set\n  , microtask          = _dereq_(64)()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[_dereq_(117)('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = _dereq_(86)($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\n_dereq_(92)($Promise, PROMISE);\n_dereq_(91)(PROMISE);\nWrapper = _dereq_(23)[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && _dereq_(54)(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n},{\"104\":104,\"117\":117,\"17\":17,\"23\":23,\"25\":25,\"3\":3,\"32\":32,\"37\":37,\"38\":38,\"49\":49,\"54\":54,\"58\":58,\"6\":6,\"64\":64,\"86\":86,\"91\":91,\"92\":92,\"95\":95}],199:[function(_dereq_,module,exports){\n// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)\nvar $export   = _dereq_(32)\n  , aFunction = _dereq_(3)\n  , anObject  = _dereq_(7)\n  , rApply    = (_dereq_(38).Reflect || {}).apply\n  , fApply    = Function.apply;\n// MS Edge argumentsList argument is optional\n$export($export.S + $export.F * !_dereq_(34)(function(){\n  rApply(function(){});\n}), 'Reflect', {\n  apply: function apply(target, thisArgument, argumentsList){\n    var T = aFunction(target)\n      , L = anObject(argumentsList);\n    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);\n  }\n});\n},{\"3\":3,\"32\":32,\"34\":34,\"38\":38,\"7\":7}],200:[function(_dereq_,module,exports){\n// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export    = _dereq_(32)\n  , create     = _dereq_(66)\n  , aFunction  = _dereq_(3)\n  , anObject   = _dereq_(7)\n  , isObject   = _dereq_(49)\n  , fails      = _dereq_(34)\n  , bind       = _dereq_(16)\n  , rConstruct = (_dereq_(38).Reflect || {}).construct;\n\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function(){\n  function F(){}\n  return !(rConstruct(function(){}, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function(){\n  rConstruct(function(){});\n});\n\n$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {\n  construct: function construct(Target, args /*, newTarget*/){\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if(ARGS_BUG && !NEW_TARGET_BUG)return rConstruct(Target, args, newTarget);\n    if(Target == newTarget){\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch(args.length){\n        case 0: return new Target;\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args));\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto    = newTarget.prototype\n      , instance = create(isObject(proto) ? proto : Object.prototype)\n      , result   = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n},{\"16\":16,\"3\":3,\"32\":32,\"34\":34,\"38\":38,\"49\":49,\"66\":66,\"7\":7}],201:[function(_dereq_,module,exports){\n// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)\nvar dP          = _dereq_(67)\n  , $export     = _dereq_(32)\n  , anObject    = _dereq_(7)\n  , toPrimitive = _dereq_(110);\n\n// MS Edge has broken Reflect.defineProperty - throwing instead of returning false\n$export($export.S + $export.F * _dereq_(34)(function(){\n  Reflect.defineProperty(dP.f({}, 1, {value: 1}), 1, {value: 2});\n}), 'Reflect', {\n  defineProperty: function defineProperty(target, propertyKey, attributes){\n    anObject(target);\n    propertyKey = toPrimitive(propertyKey, true);\n    anObject(attributes);\n    try {\n      dP.f(target, propertyKey, attributes);\n      return true;\n    } catch(e){\n      return false;\n    }\n  }\n});\n},{\"110\":110,\"32\":32,\"34\":34,\"67\":67,\"7\":7}],202:[function(_dereq_,module,exports){\n// 26.1.4 Reflect.deleteProperty(target, propertyKey)\nvar $export  = _dereq_(32)\n  , gOPD     = _dereq_(70).f\n  , anObject = _dereq_(7);\n\n$export($export.S, 'Reflect', {\n  deleteProperty: function deleteProperty(target, propertyKey){\n    var desc = gOPD(anObject(target), propertyKey);\n    return desc && !desc.configurable ? false : delete target[propertyKey];\n  }\n});\n},{\"32\":32,\"7\":7,\"70\":70}],203:[function(_dereq_,module,exports){\n'use strict';\n// 26.1.5 Reflect.enumerate(target)\nvar $export  = _dereq_(32)\n  , anObject = _dereq_(7);\nvar Enumerate = function(iterated){\n  this._t = anObject(iterated); // target\n  this._i = 0;                  // next index\n  var keys = this._k = []       // keys\n    , key;\n  for(key in iterated)keys.push(key);\n};\n_dereq_(52)(Enumerate, 'Object', function(){\n  var that = this\n    , keys = that._k\n    , key;\n  do {\n    if(that._i >= keys.length)return {value: undefined, done: true};\n  } while(!((key = keys[that._i++]) in that._t));\n  return {value: key, done: false};\n});\n\n$export($export.S, 'Reflect', {\n  enumerate: function enumerate(target){\n    return new Enumerate(target);\n  }\n});\n},{\"32\":32,\"52\":52,\"7\":7}],204:[function(_dereq_,module,exports){\n// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)\nvar gOPD     = _dereq_(70)\n  , $export  = _dereq_(32)\n  , anObject = _dereq_(7);\n\n$export($export.S, 'Reflect', {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey){\n    return gOPD.f(anObject(target), propertyKey);\n  }\n});\n},{\"32\":32,\"7\":7,\"70\":70}],205:[function(_dereq_,module,exports){\n// 26.1.8 Reflect.getPrototypeOf(target)\nvar $export  = _dereq_(32)\n  , getProto = _dereq_(74)\n  , anObject = _dereq_(7);\n\n$export($export.S, 'Reflect', {\n  getPrototypeOf: function getPrototypeOf(target){\n    return getProto(anObject(target));\n  }\n});\n},{\"32\":32,\"7\":7,\"74\":74}],206:[function(_dereq_,module,exports){\n// 26.1.6 Reflect.get(target, propertyKey [, receiver])\nvar gOPD           = _dereq_(70)\n  , getPrototypeOf = _dereq_(74)\n  , has            = _dereq_(39)\n  , $export        = _dereq_(32)\n  , isObject       = _dereq_(49)\n  , anObject       = _dereq_(7);\n\nfunction get(target, propertyKey/*, receiver*/){\n  var receiver = arguments.length < 3 ? target : arguments[2]\n    , desc, proto;\n  if(anObject(target) === receiver)return target[propertyKey];\n  if(desc = gOPD.f(target, propertyKey))return has(desc, 'value')\n    ? desc.value\n    : desc.get !== undefined\n      ? desc.get.call(receiver)\n      : undefined;\n  if(isObject(proto = getPrototypeOf(target)))return get(proto, propertyKey, receiver);\n}\n\n$export($export.S, 'Reflect', {get: get});\n},{\"32\":32,\"39\":39,\"49\":49,\"7\":7,\"70\":70,\"74\":74}],207:[function(_dereq_,module,exports){\n// 26.1.9 Reflect.has(target, propertyKey)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Reflect', {\n  has: function has(target, propertyKey){\n    return propertyKey in target;\n  }\n});\n},{\"32\":32}],208:[function(_dereq_,module,exports){\n// 26.1.10 Reflect.isExtensible(target)\nvar $export       = _dereq_(32)\n  , anObject      = _dereq_(7)\n  , $isExtensible = Object.isExtensible;\n\n$export($export.S, 'Reflect', {\n  isExtensible: function isExtensible(target){\n    anObject(target);\n    return $isExtensible ? $isExtensible(target) : true;\n  }\n});\n},{\"32\":32,\"7\":7}],209:[function(_dereq_,module,exports){\n// 26.1.11 Reflect.ownKeys(target)\nvar $export = _dereq_(32);\n\n$export($export.S, 'Reflect', {ownKeys: _dereq_(80)});\n},{\"32\":32,\"80\":80}],210:[function(_dereq_,module,exports){\n// 26.1.12 Reflect.preventExtensions(target)\nvar $export            = _dereq_(32)\n  , anObject           = _dereq_(7)\n  , $preventExtensions = Object.preventExtensions;\n\n$export($export.S, 'Reflect', {\n  preventExtensions: function preventExtensions(target){\n    anObject(target);\n    try {\n      if($preventExtensions)$preventExtensions(target);\n      return true;\n    } catch(e){\n      return false;\n    }\n  }\n});\n},{\"32\":32,\"7\":7}],211:[function(_dereq_,module,exports){\n// 26.1.14 Reflect.setPrototypeOf(target, proto)\nvar $export  = _dereq_(32)\n  , setProto = _dereq_(90);\n\nif(setProto)$export($export.S, 'Reflect', {\n  setPrototypeOf: function setPrototypeOf(target, proto){\n    setProto.check(target, proto);\n    try {\n      setProto.set(target, proto);\n      return true;\n    } catch(e){\n      return false;\n    }\n  }\n});\n},{\"32\":32,\"90\":90}],212:[function(_dereq_,module,exports){\n// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])\nvar dP             = _dereq_(67)\n  , gOPD           = _dereq_(70)\n  , getPrototypeOf = _dereq_(74)\n  , has            = _dereq_(39)\n  , $export        = _dereq_(32)\n  , createDesc     = _dereq_(85)\n  , anObject       = _dereq_(7)\n  , isObject       = _dereq_(49);\n\nfunction set(target, propertyKey, V/*, receiver*/){\n  var receiver = arguments.length < 4 ? target : arguments[3]\n    , ownDesc  = gOPD.f(anObject(target), propertyKey)\n    , existingDescriptor, proto;\n  if(!ownDesc){\n    if(isObject(proto = getPrototypeOf(target))){\n      return set(proto, propertyKey, V, receiver);\n    }\n    ownDesc = createDesc(0);\n  }\n  if(has(ownDesc, 'value')){\n    if(ownDesc.writable === false || !isObject(receiver))return false;\n    existingDescriptor = gOPD.f(receiver, propertyKey) || createDesc(0);\n    existingDescriptor.value = V;\n    dP.f(receiver, propertyKey, existingDescriptor);\n    return true;\n  }\n  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);\n}\n\n$export($export.S, 'Reflect', {set: set});\n},{\"32\":32,\"39\":39,\"49\":49,\"67\":67,\"7\":7,\"70\":70,\"74\":74,\"85\":85}],213:[function(_dereq_,module,exports){\nvar global            = _dereq_(38)\n  , inheritIfRequired = _dereq_(43)\n  , dP                = _dereq_(67).f\n  , gOPN              = _dereq_(72).f\n  , isRegExp          = _dereq_(50)\n  , $flags            = _dereq_(36)\n  , $RegExp           = global.RegExp\n  , Base              = $RegExp\n  , proto             = $RegExp.prototype\n  , re1               = /a/g\n  , re2               = /a/g\n  // \"new\" creates a new object, old webkit buggy here\n  , CORRECT_NEW       = new $RegExp(re1) !== re1;\n\nif(_dereq_(28) && (!CORRECT_NEW || _dereq_(34)(function(){\n  re2[_dereq_(117)('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))){\n  $RegExp = function RegExp(p, f){\n    var tiRE = this instanceof $RegExp\n      , piRE = isRegExp(p)\n      , fiU  = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function(key){\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function(){ return Base[key]; },\n      set: function(it){ Base[key] = it; }\n    });\n  };\n  for(var keys = gOPN(Base), i = 0; keys.length > i; )proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  _dereq_(87)(global, 'RegExp', $RegExp);\n}\n\n_dereq_(91)('RegExp');\n},{\"117\":117,\"28\":28,\"34\":34,\"36\":36,\"38\":38,\"43\":43,\"50\":50,\"67\":67,\"72\":72,\"87\":87,\"91\":91}],214:[function(_dereq_,module,exports){\n// 21.2.5.3 get RegExp.prototype.flags()\nif(_dereq_(28) && /./g.flags != 'g')_dereq_(67).f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: _dereq_(36)\n});\n},{\"28\":28,\"36\":36,\"67\":67}],215:[function(_dereq_,module,exports){\n// @@match logic\n_dereq_(35)('match', 1, function(defined, MATCH, $match){\n  // 21.1.3.11 String.prototype.match(regexp)\n  return [function match(regexp){\n    'use strict';\n    var O  = defined(this)\n      , fn = regexp == undefined ? undefined : regexp[MATCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n  }, $match];\n});\n},{\"35\":35}],216:[function(_dereq_,module,exports){\n// @@replace logic\n_dereq_(35)('replace', 2, function(defined, REPLACE, $replace){\n  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)\n  return [function replace(searchValue, replaceValue){\n    'use strict';\n    var O  = defined(this)\n      , fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n    return fn !== undefined\n      ? fn.call(searchValue, O, replaceValue)\n      : $replace.call(String(O), searchValue, replaceValue);\n  }, $replace];\n});\n},{\"35\":35}],217:[function(_dereq_,module,exports){\n// @@search logic\n_dereq_(35)('search', 1, function(defined, SEARCH, $search){\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp){\n    'use strict';\n    var O  = defined(this)\n      , fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});\n},{\"35\":35}],218:[function(_dereq_,module,exports){\n// @@split logic\n_dereq_(35)('split', 2, function(defined, SPLIT, $split){\n  'use strict';\n  var isRegExp   = _dereq_(50)\n    , _split     = $split\n    , $push      = [].push\n    , $SPLIT     = 'split'\n    , LENGTH     = 'length'\n    , LAST_INDEX = 'lastIndex';\n  if(\n    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||\n    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||\n    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||\n    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||\n    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||\n    ''[$SPLIT](/.?/)[LENGTH]\n  ){\n    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group\n    // based on es5-shim implementation, need to rework it\n    $split = function(separator, limit){\n      var string = String(this);\n      if(separator === undefined && limit === 0)return [];\n      // If `separator` is not a regex, use native split\n      if(!isRegExp(separator))return _split.call(string, separator, limit);\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var separator2, match, lastIndex, lastLength, i;\n      // Doesn't need flags gy, but they don't hurt\n      if(!NPCG)separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n      while(match = separatorCopy.exec(string)){\n        // `separatorCopy.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0][LENGTH];\n        if(lastIndex > lastLastIndex){\n          output.push(string.slice(lastLastIndex, match.index));\n          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG\n          if(!NPCG && match[LENGTH] > 1)match[0].replace(separator2, function(){\n            for(i = 1; i < arguments[LENGTH] - 2; i++)if(arguments[i] === undefined)match[i] = undefined;\n          });\n          if(match[LENGTH] > 1 && match.index < string[LENGTH])$push.apply(output, match.slice(1));\n          lastLength = match[0][LENGTH];\n          lastLastIndex = lastIndex;\n          if(output[LENGTH] >= splitLimit)break;\n        }\n        if(separatorCopy[LAST_INDEX] === match.index)separatorCopy[LAST_INDEX]++; // Avoid an infinite loop\n      }\n      if(lastLastIndex === string[LENGTH]){\n        if(lastLength || !separatorCopy.test(''))output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;\n    };\n  // Chakra, V8\n  } else if('0'[$SPLIT](undefined, 0)[LENGTH]){\n    $split = function(separator, limit){\n      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);\n    };\n  }\n  // 21.1.3.17 String.prototype.split(separator, limit)\n  return [function split(separator, limit){\n    var O  = defined(this)\n      , fn = separator == undefined ? undefined : separator[SPLIT];\n    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);\n  }, $split];\n});\n},{\"35\":35,\"50\":50}],219:[function(_dereq_,module,exports){\n'use strict';\n_dereq_(214);\nvar anObject    = _dereq_(7)\n  , $flags      = _dereq_(36)\n  , DESCRIPTORS = _dereq_(28)\n  , TO_STRING   = 'toString'\n  , $toString   = /./[TO_STRING];\n\nvar define = function(fn){\n  _dereq_(87)(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif(_dereq_(34)(function(){ return $toString.call({source: 'a', flags: 'b'}) != '/a/b'; })){\n  define(function toString(){\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if($toString.name != TO_STRING){\n  define(function toString(){\n    return $toString.call(this);\n  });\n}\n},{\"214\":214,\"28\":28,\"34\":34,\"36\":36,\"7\":7,\"87\":87}],220:[function(_dereq_,module,exports){\n'use strict';\nvar strong = _dereq_(19);\n\n// 23.2 Set Objects\nmodule.exports = _dereq_(22)('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n},{\"19\":19,\"22\":22}],221:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.2 String.prototype.anchor(name)\n_dereq_(99)('anchor', function(createHTML){\n  return function anchor(name){\n    return createHTML(this, 'a', 'name', name);\n  }\n});\n},{\"99\":99}],222:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.3 String.prototype.big()\n_dereq_(99)('big', function(createHTML){\n  return function big(){\n    return createHTML(this, 'big', '', '');\n  }\n});\n},{\"99\":99}],223:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.4 String.prototype.blink()\n_dereq_(99)('blink', function(createHTML){\n  return function blink(){\n    return createHTML(this, 'blink', '', '');\n  }\n});\n},{\"99\":99}],224:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.5 String.prototype.bold()\n_dereq_(99)('bold', function(createHTML){\n  return function bold(){\n    return createHTML(this, 'b', '', '');\n  }\n});\n},{\"99\":99}],225:[function(_dereq_,module,exports){\n'use strict';\nvar $export = _dereq_(32)\n  , $at     = _dereq_(97)(false);\n$export($export.P, 'String', {\n  // 21.1.3.3 String.prototype.codePointAt(pos)\n  codePointAt: function codePointAt(pos){\n    return $at(this, pos);\n  }\n});\n},{\"32\":32,\"97\":97}],226:[function(_dereq_,module,exports){\n// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])\n'use strict';\nvar $export   = _dereq_(32)\n  , toLength  = _dereq_(108)\n  , context   = _dereq_(98)\n  , ENDS_WITH = 'endsWith'\n  , $endsWith = ''[ENDS_WITH];\n\n$export($export.P + $export.F * _dereq_(33)(ENDS_WITH), 'String', {\n  endsWith: function endsWith(searchString /*, endPosition = @length */){\n    var that = context(this, searchString, ENDS_WITH)\n      , endPosition = arguments.length > 1 ? arguments[1] : undefined\n      , len    = toLength(that.length)\n      , end    = endPosition === undefined ? len : Math.min(toLength(endPosition), len)\n      , search = String(searchString);\n    return $endsWith\n      ? $endsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n},{\"108\":108,\"32\":32,\"33\":33,\"98\":98}],227:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.6 String.prototype.fixed()\n_dereq_(99)('fixed', function(createHTML){\n  return function fixed(){\n    return createHTML(this, 'tt', '', '');\n  }\n});\n},{\"99\":99}],228:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.7 String.prototype.fontcolor(color)\n_dereq_(99)('fontcolor', function(createHTML){\n  return function fontcolor(color){\n    return createHTML(this, 'font', 'color', color);\n  }\n});\n},{\"99\":99}],229:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.8 String.prototype.fontsize(size)\n_dereq_(99)('fontsize', function(createHTML){\n  return function fontsize(size){\n    return createHTML(this, 'font', 'size', size);\n  }\n});\n},{\"99\":99}],230:[function(_dereq_,module,exports){\nvar $export        = _dereq_(32)\n  , toIndex        = _dereq_(105)\n  , fromCharCode   = String.fromCharCode\n  , $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x){ // eslint-disable-line no-unused-vars\n    var res  = []\n      , aLen = arguments.length\n      , i    = 0\n      , code;\n    while(aLen > i){\n      code = +arguments[i++];\n      if(toIndex(code, 0x10ffff) !== code)throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});\n},{\"105\":105,\"32\":32}],231:[function(_dereq_,module,exports){\n// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export  = _dereq_(32)\n  , context  = _dereq_(98)\n  , INCLUDES = 'includes';\n\n$export($export.P + $export.F * _dereq_(33)(INCLUDES), 'String', {\n  includes: function includes(searchString /*, position = 0 */){\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n},{\"32\":32,\"33\":33,\"98\":98}],232:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.9 String.prototype.italics()\n_dereq_(99)('italics', function(createHTML){\n  return function italics(){\n    return createHTML(this, 'i', '', '');\n  }\n});\n},{\"99\":99}],233:[function(_dereq_,module,exports){\n'use strict';\nvar $at  = _dereq_(97)(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\n_dereq_(53)(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n},{\"53\":53,\"97\":97}],234:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.10 String.prototype.link(url)\n_dereq_(99)('link', function(createHTML){\n  return function link(url){\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n},{\"99\":99}],235:[function(_dereq_,module,exports){\nvar $export   = _dereq_(32)\n  , toIObject = _dereq_(107)\n  , toLength  = _dereq_(108);\n\n$export($export.S, 'String', {\n  // 21.1.2.4 String.raw(callSite, ...substitutions)\n  raw: function raw(callSite){\n    var tpl  = toIObject(callSite.raw)\n      , len  = toLength(tpl.length)\n      , aLen = arguments.length\n      , res  = []\n      , i    = 0;\n    while(len > i){\n      res.push(String(tpl[i++]));\n      if(i < aLen)res.push(String(arguments[i]));\n    } return res.join('');\n  }\n});\n},{\"107\":107,\"108\":108,\"32\":32}],236:[function(_dereq_,module,exports){\nvar $export = _dereq_(32);\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: _dereq_(101)\n});\n},{\"101\":101,\"32\":32}],237:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.11 String.prototype.small()\n_dereq_(99)('small', function(createHTML){\n  return function small(){\n    return createHTML(this, 'small', '', '');\n  }\n});\n},{\"99\":99}],238:[function(_dereq_,module,exports){\n// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export     = _dereq_(32)\n  , toLength    = _dereq_(108)\n  , context     = _dereq_(98)\n  , STARTS_WITH = 'startsWith'\n  , $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * _dereq_(33)(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /*, position = 0 */){\n    var that   = context(this, searchString, STARTS_WITH)\n      , index  = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length))\n      , search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n},{\"108\":108,\"32\":32,\"33\":33,\"98\":98}],239:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.12 String.prototype.strike()\n_dereq_(99)('strike', function(createHTML){\n  return function strike(){\n    return createHTML(this, 'strike', '', '');\n  }\n});\n},{\"99\":99}],240:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.13 String.prototype.sub()\n_dereq_(99)('sub', function(createHTML){\n  return function sub(){\n    return createHTML(this, 'sub', '', '');\n  }\n});\n},{\"99\":99}],241:[function(_dereq_,module,exports){\n'use strict';\n// B.2.3.14 String.prototype.sup()\n_dereq_(99)('sup', function(createHTML){\n  return function sup(){\n    return createHTML(this, 'sup', '', '');\n  }\n});\n},{\"99\":99}],242:[function(_dereq_,module,exports){\n'use strict';\n// 21.1.3.25 String.prototype.trim()\n_dereq_(102)('trim', function($trim){\n  return function trim(){\n    return $trim(this, 3);\n  };\n});\n},{\"102\":102}],243:[function(_dereq_,module,exports){\n'use strict';\n// ECMAScript 6 symbols shim\nvar global         = _dereq_(38)\n  , has            = _dereq_(39)\n  , DESCRIPTORS    = _dereq_(28)\n  , $export        = _dereq_(32)\n  , redefine       = _dereq_(87)\n  , META           = _dereq_(62).KEY\n  , $fails         = _dereq_(34)\n  , shared         = _dereq_(94)\n  , setToStringTag = _dereq_(92)\n  , uid            = _dereq_(114)\n  , wks            = _dereq_(117)\n  , wksExt         = _dereq_(116)\n  , wksDefine      = _dereq_(115)\n  , keyOf          = _dereq_(57)\n  , enumKeys       = _dereq_(31)\n  , isArray        = _dereq_(47)\n  , anObject       = _dereq_(7)\n  , toIObject      = _dereq_(107)\n  , toPrimitive    = _dereq_(110)\n  , createDesc     = _dereq_(85)\n  , _create        = _dereq_(66)\n  , gOPNExt        = _dereq_(71)\n  , $GOPD          = _dereq_(70)\n  , $DP            = _dereq_(67)\n  , $keys          = _dereq_(76)\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  _dereq_(72).f = gOPNExt.f = $getOwnPropertyNames;\n  _dereq_(77).f  = $propertyIsEnumerable;\n  _dereq_(73).f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !_dereq_(58)){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || _dereq_(40)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n},{\"107\":107,\"110\":110,\"114\":114,\"115\":115,\"116\":116,\"117\":117,\"28\":28,\"31\":31,\"32\":32,\"34\":34,\"38\":38,\"39\":39,\"40\":40,\"47\":47,\"57\":57,\"58\":58,\"62\":62,\"66\":66,\"67\":67,\"7\":7,\"70\":70,\"71\":71,\"72\":72,\"73\":73,\"76\":76,\"77\":77,\"85\":85,\"87\":87,\"92\":92,\"94\":94}],244:[function(_dereq_,module,exports){\n'use strict';\nvar $export      = _dereq_(32)\n  , $typed       = _dereq_(113)\n  , buffer       = _dereq_(112)\n  , anObject     = _dereq_(7)\n  , toIndex      = _dereq_(105)\n  , toLength     = _dereq_(108)\n  , isObject     = _dereq_(49)\n  , ArrayBuffer  = _dereq_(38).ArrayBuffer\n  , speciesConstructor = _dereq_(95)\n  , $ArrayBuffer = buffer.ArrayBuffer\n  , $DataView    = buffer.DataView\n  , $isView      = $typed.ABV && ArrayBuffer.isView\n  , $slice       = $ArrayBuffer.prototype.slice\n  , VIEW         = $typed.VIEW\n  , ARRAY_BUFFER = 'ArrayBuffer';\n\n$export($export.G + $export.W + $export.F * (ArrayBuffer !== $ArrayBuffer), {ArrayBuffer: $ArrayBuffer});\n\n$export($export.S + $export.F * !$typed.CONSTR, ARRAY_BUFFER, {\n  // 24.1.3.1 ArrayBuffer.isView(arg)\n  isView: function isView(it){\n    return $isView && $isView(it) || isObject(it) && VIEW in it;\n  }\n});\n\n$export($export.P + $export.U + $export.F * _dereq_(34)(function(){\n  return !new $ArrayBuffer(2).slice(1, undefined).byteLength;\n}), ARRAY_BUFFER, {\n  // 24.1.4.3 ArrayBuffer.prototype.slice(start, end)\n  slice: function slice(start, end){\n    if($slice !== undefined && end === undefined)return $slice.call(anObject(this), start); // FF fix\n    var len    = anObject(this).byteLength\n      , first  = toIndex(start, len)\n      , final  = toIndex(end === undefined ? len : end, len)\n      , result = new (speciesConstructor(this, $ArrayBuffer))(toLength(final - first))\n      , viewS  = new $DataView(this)\n      , viewT  = new $DataView(result)\n      , index  = 0;\n    while(first < final){\n      viewT.setUint8(index++, viewS.getUint8(first++));\n    } return result;\n  }\n});\n\n_dereq_(91)(ARRAY_BUFFER);\n},{\"105\":105,\"108\":108,\"112\":112,\"113\":113,\"32\":32,\"34\":34,\"38\":38,\"49\":49,\"7\":7,\"91\":91,\"95\":95}],245:[function(_dereq_,module,exports){\nvar $export = _dereq_(32);\n$export($export.G + $export.W + $export.F * !_dereq_(113).ABV, {\n  DataView: _dereq_(112).DataView\n});\n},{\"112\":112,\"113\":113,\"32\":32}],246:[function(_dereq_,module,exports){\n_dereq_(111)('Float32', 4, function(init){\n  return function Float32Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],247:[function(_dereq_,module,exports){\n_dereq_(111)('Float64', 8, function(init){\n  return function Float64Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],248:[function(_dereq_,module,exports){\n_dereq_(111)('Int16', 2, function(init){\n  return function Int16Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],249:[function(_dereq_,module,exports){\n_dereq_(111)('Int32', 4, function(init){\n  return function Int32Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],250:[function(_dereq_,module,exports){\n_dereq_(111)('Int8', 1, function(init){\n  return function Int8Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],251:[function(_dereq_,module,exports){\n_dereq_(111)('Uint16', 2, function(init){\n  return function Uint16Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],252:[function(_dereq_,module,exports){\n_dereq_(111)('Uint32', 4, function(init){\n  return function Uint32Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],253:[function(_dereq_,module,exports){\n_dereq_(111)('Uint8', 1, function(init){\n  return function Uint8Array(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n});\n},{\"111\":111}],254:[function(_dereq_,module,exports){\n_dereq_(111)('Uint8', 1, function(init){\n  return function Uint8ClampedArray(data, byteOffset, length){\n    return init(this, data, byteOffset, length);\n  };\n}, true);\n},{\"111\":111}],255:[function(_dereq_,module,exports){\n'use strict';\nvar each         = _dereq_(12)(0)\n  , redefine     = _dereq_(87)\n  , meta         = _dereq_(62)\n  , assign       = _dereq_(65)\n  , weak         = _dereq_(21)\n  , isObject     = _dereq_(49)\n  , getWeak      = meta.getWeak\n  , isExtensible = Object.isExtensible\n  , uncaughtFrozenStore = weak.ufstore\n  , tmp          = {}\n  , InternalMap;\n\nvar wrapper = function(get){\n  return function WeakMap(){\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n};\n\nvar methods = {\n  // 23.3.3.3 WeakMap.prototype.get(key)\n  get: function get(key){\n    if(isObject(key)){\n      var data = getWeak(key);\n      if(data === true)return uncaughtFrozenStore(this).get(key);\n      return data ? data[this._i] : undefined;\n    }\n  },\n  // 23.3.3.5 WeakMap.prototype.set(key, value)\n  set: function set(key, value){\n    return weak.def(this, key, value);\n  }\n};\n\n// 23.3 WeakMap Objects\nvar $WeakMap = module.exports = _dereq_(22)('WeakMap', wrapper, methods, weak, true, true);\n\n// IE11 WeakMap frozen keys fix\nif(new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7){\n  InternalMap = weak.getConstructor(wrapper);\n  assign(InternalMap.prototype, methods);\n  meta.NEED = true;\n  each(['delete', 'has', 'get', 'set'], function(key){\n    var proto  = $WeakMap.prototype\n      , method = proto[key];\n    redefine(proto, key, function(a, b){\n      // store frozen objects on internal weakmap shim\n      if(isObject(a) && !isExtensible(a)){\n        if(!this._f)this._f = new InternalMap;\n        var result = this._f[key](a, b);\n        return key == 'set' ? this : result;\n      // store all the rest on native weakmap\n      } return method.call(this, a, b);\n    });\n  });\n}\n},{\"12\":12,\"21\":21,\"22\":22,\"49\":49,\"62\":62,\"65\":65,\"87\":87}],256:[function(_dereq_,module,exports){\n'use strict';\nvar weak = _dereq_(21);\n\n// 23.4 WeakSet Objects\n_dereq_(22)('WeakSet', function(get){\n  return function WeakSet(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.4.3.1 WeakSet.prototype.add(value)\n  add: function add(value){\n    return weak.def(this, value, true);\n  }\n}, weak, false, true);\n},{\"21\":21,\"22\":22}],257:[function(_dereq_,module,exports){\n'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export   = _dereq_(32)\n  , $includes = _dereq_(11)(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /*, fromIndex = 0 */){\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n_dereq_(5)('includes');\n},{\"11\":11,\"32\":32,\"5\":5}],258:[function(_dereq_,module,exports){\n// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask\nvar $export   = _dereq_(32)\n  , microtask = _dereq_(64)()\n  , process   = _dereq_(38).process\n  , isNode    = _dereq_(18)(process) == 'process';\n\n$export($export.G, {\n  asap: function asap(fn){\n    var domain = isNode && process.domain;\n    microtask(domain ? domain.bind(fn) : fn);\n  }\n});\n},{\"18\":18,\"32\":32,\"38\":38,\"64\":64}],259:[function(_dereq_,module,exports){\n// https://github.com/ljharb/proposal-is-error\nvar $export = _dereq_(32)\n  , cof     = _dereq_(18);\n\n$export($export.S, 'Error', {\n  isError: function isError(it){\n    return cof(it) === 'Error';\n  }\n});\n},{\"18\":18,\"32\":32}],260:[function(_dereq_,module,exports){\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = _dereq_(32);\n\n$export($export.P + $export.R, 'Map', {toJSON: _dereq_(20)('Map')});\n},{\"20\":20,\"32\":32}],261:[function(_dereq_,module,exports){\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  iaddh: function iaddh(x0, x1, y0, y1){\n    var $x0 = x0 >>> 0\n      , $x1 = x1 >>> 0\n      , $y0 = y0 >>> 0;\n    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;\n  }\n});\n},{\"32\":32}],262:[function(_dereq_,module,exports){\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  imulh: function imulh(u, v){\n    var UINT16 = 0xffff\n      , $u = +u\n      , $v = +v\n      , u0 = $u & UINT16\n      , v0 = $v & UINT16\n      , u1 = $u >> 16\n      , v1 = $v >> 16\n      , t  = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);\n  }\n});\n},{\"32\":32}],263:[function(_dereq_,module,exports){\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  isubh: function isubh(x0, x1, y0, y1){\n    var $x0 = x0 >>> 0\n      , $x1 = x1 >>> 0\n      , $y0 = y0 >>> 0;\n    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;\n  }\n});\n},{\"32\":32}],264:[function(_dereq_,module,exports){\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = _dereq_(32);\n\n$export($export.S, 'Math', {\n  umulh: function umulh(u, v){\n    var UINT16 = 0xffff\n      , $u = +u\n      , $v = +v\n      , u0 = $u & UINT16\n      , v0 = $v & UINT16\n      , u1 = $u >>> 16\n      , v1 = $v >>> 16\n      , t  = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);\n  }\n});\n},{\"32\":32}],265:[function(_dereq_,module,exports){\n'use strict';\nvar $export         = _dereq_(32)\n  , toObject        = _dereq_(109)\n  , aFunction       = _dereq_(3)\n  , $defineProperty = _dereq_(67);\n\n// B.2.2.2 Object.prototype.__defineGetter__(P, getter)\n_dereq_(28) && $export($export.P + _dereq_(69), 'Object', {\n  __defineGetter__: function __defineGetter__(P, getter){\n    $defineProperty.f(toObject(this), P, {get: aFunction(getter), enumerable: true, configurable: true});\n  }\n});\n},{\"109\":109,\"28\":28,\"3\":3,\"32\":32,\"67\":67,\"69\":69}],266:[function(_dereq_,module,exports){\n'use strict';\nvar $export         = _dereq_(32)\n  , toObject        = _dereq_(109)\n  , aFunction       = _dereq_(3)\n  , $defineProperty = _dereq_(67);\n\n// B.2.2.3 Object.prototype.__defineSetter__(P, setter)\n_dereq_(28) && $export($export.P + _dereq_(69), 'Object', {\n  __defineSetter__: function __defineSetter__(P, setter){\n    $defineProperty.f(toObject(this), P, {set: aFunction(setter), enumerable: true, configurable: true});\n  }\n});\n},{\"109\":109,\"28\":28,\"3\":3,\"32\":32,\"67\":67,\"69\":69}],267:[function(_dereq_,module,exports){\n// https://github.com/tc39/proposal-object-values-entries\nvar $export  = _dereq_(32)\n  , $entries = _dereq_(79)(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it){\n    return $entries(it);\n  }\n});\n},{\"32\":32,\"79\":79}],268:[function(_dereq_,module,exports){\n// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export        = _dereq_(32)\n  , ownKeys        = _dereq_(80)\n  , toIObject      = _dereq_(107)\n  , gOPD           = _dereq_(70)\n  , createProperty = _dereq_(24);\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object){\n    var O       = toIObject(object)\n      , getDesc = gOPD.f\n      , keys    = ownKeys(O)\n      , result  = {}\n      , i       = 0\n      , key;\n    while(keys.length > i)createProperty(result, key = keys[i++], getDesc(O, key));\n    return result;\n  }\n});\n},{\"107\":107,\"24\":24,\"32\":32,\"70\":70,\"80\":80}],269:[function(_dereq_,module,exports){\n'use strict';\nvar $export                  = _dereq_(32)\n  , toObject                 = _dereq_(109)\n  , toPrimitive              = _dereq_(110)\n  , getPrototypeOf           = _dereq_(74)\n  , getOwnPropertyDescriptor = _dereq_(70).f;\n\n// B.2.2.4 Object.prototype.__lookupGetter__(P)\n_dereq_(28) && $export($export.P + _dereq_(69), 'Object', {\n  __lookupGetter__: function __lookupGetter__(P){\n    var O = toObject(this)\n      , K = toPrimitive(P, true)\n      , D;\n    do {\n      if(D = getOwnPropertyDescriptor(O, K))return D.get;\n    } while(O = getPrototypeOf(O));\n  }\n});\n},{\"109\":109,\"110\":110,\"28\":28,\"32\":32,\"69\":69,\"70\":70,\"74\":74}],270:[function(_dereq_,module,exports){\n'use strict';\nvar $export                  = _dereq_(32)\n  , toObject                 = _dereq_(109)\n  , toPrimitive              = _dereq_(110)\n  , getPrototypeOf           = _dereq_(74)\n  , getOwnPropertyDescriptor = _dereq_(70).f;\n\n// B.2.2.5 Object.prototype.__lookupSetter__(P)\n_dereq_(28) && $export($export.P + _dereq_(69), 'Object', {\n  __lookupSetter__: function __lookupSetter__(P){\n    var O = toObject(this)\n      , K = toPrimitive(P, true)\n      , D;\n    do {\n      if(D = getOwnPropertyDescriptor(O, K))return D.set;\n    } while(O = getPrototypeOf(O));\n  }\n});\n},{\"109\":109,\"110\":110,\"28\":28,\"32\":32,\"69\":69,\"70\":70,\"74\":74}],271:[function(_dereq_,module,exports){\n// https://github.com/tc39/proposal-object-values-entries\nvar $export = _dereq_(32)\n  , $values = _dereq_(79)(false);\n\n$export($export.S, 'Object', {\n  values: function values(it){\n    return $values(it);\n  }\n});\n},{\"32\":32,\"79\":79}],272:[function(_dereq_,module,exports){\n'use strict';\n// https://github.com/zenparsing/es-observable\nvar $export     = _dereq_(32)\n  , global      = _dereq_(38)\n  , core        = _dereq_(23)\n  , microtask   = _dereq_(64)()\n  , OBSERVABLE  = _dereq_(117)('observable')\n  , aFunction   = _dereq_(3)\n  , anObject    = _dereq_(7)\n  , anInstance  = _dereq_(6)\n  , redefineAll = _dereq_(86)\n  , hide        = _dereq_(40)\n  , forOf       = _dereq_(37)\n  , RETURN      = forOf.RETURN;\n\nvar getMethod = function(fn){\n  return fn == null ? undefined : aFunction(fn);\n};\n\nvar cleanupSubscription = function(subscription){\n  var cleanup = subscription._c;\n  if(cleanup){\n    subscription._c = undefined;\n    cleanup();\n  }\n};\n\nvar subscriptionClosed = function(subscription){\n  return subscription._o === undefined;\n};\n\nvar closeSubscription = function(subscription){\n  if(!subscriptionClosed(subscription)){\n    subscription._o = undefined;\n    cleanupSubscription(subscription);\n  }\n};\n\nvar Subscription = function(observer, subscriber){\n  anObject(observer);\n  this._c = undefined;\n  this._o = observer;\n  observer = new SubscriptionObserver(this);\n  try {\n    var cleanup      = subscriber(observer)\n      , subscription = cleanup;\n    if(cleanup != null){\n      if(typeof cleanup.unsubscribe === 'function')cleanup = function(){ subscription.unsubscribe(); };\n      else aFunction(cleanup);\n      this._c = cleanup;\n    }\n  } catch(e){\n    observer.error(e);\n    return;\n  } if(subscriptionClosed(this))cleanupSubscription(this);\n};\n\nSubscription.prototype = redefineAll({}, {\n  unsubscribe: function unsubscribe(){ closeSubscription(this); }\n});\n\nvar SubscriptionObserver = function(subscription){\n  this._s = subscription;\n};\n\nSubscriptionObserver.prototype = redefineAll({}, {\n  next: function next(value){\n    var subscription = this._s;\n    if(!subscriptionClosed(subscription)){\n      var observer = subscription._o;\n      try {\n        var m = getMethod(observer.next);\n        if(m)return m.call(observer, value);\n      } catch(e){\n        try {\n          closeSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      }\n    }\n  },\n  error: function error(value){\n    var subscription = this._s;\n    if(subscriptionClosed(subscription))throw value;\n    var observer = subscription._o;\n    subscription._o = undefined;\n    try {\n      var m = getMethod(observer.error);\n      if(!m)throw value;\n      value = m.call(observer, value);\n    } catch(e){\n      try {\n        cleanupSubscription(subscription);\n      } finally {\n        throw e;\n      }\n    } cleanupSubscription(subscription);\n    return value;\n  },\n  complete: function complete(value){\n    var subscription = this._s;\n    if(!subscriptionClosed(subscription)){\n      var observer = subscription._o;\n      subscription._o = undefined;\n      try {\n        var m = getMethod(observer.complete);\n        value = m ? m.call(observer, value) : undefined;\n      } catch(e){\n        try {\n          cleanupSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      } cleanupSubscription(subscription);\n      return value;\n    }\n  }\n});\n\nvar $Observable = function Observable(subscriber){\n  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);\n};\n\nredefineAll($Observable.prototype, {\n  subscribe: function subscribe(observer){\n    return new Subscription(observer, this._f);\n  },\n  forEach: function forEach(fn){\n    var that = this;\n    return new (core.Promise || global.Promise)(function(resolve, reject){\n      aFunction(fn);\n      var subscription = that.subscribe({\n        next : function(value){\n          try {\n            return fn(value);\n          } catch(e){\n            reject(e);\n            subscription.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n    });\n  }\n});\n\nredefineAll($Observable, {\n  from: function from(x){\n    var C = typeof this === 'function' ? this : $Observable;\n    var method = getMethod(anObject(x)[OBSERVABLE]);\n    if(method){\n      var observable = anObject(method.call(x));\n      return observable.constructor === C ? observable : new C(function(observer){\n        return observable.subscribe(observer);\n      });\n    }\n    return new C(function(observer){\n      var done = false;\n      microtask(function(){\n        if(!done){\n          try {\n            if(forOf(x, false, function(it){\n              observer.next(it);\n              if(done)return RETURN;\n            }) === RETURN)return;\n          } catch(e){\n            if(done)throw e;\n            observer.error(e);\n            return;\n          } observer.complete();\n        }\n      });\n      return function(){ done = true; };\n    });\n  },\n  of: function of(){\n    for(var i = 0, l = arguments.length, items = Array(l); i < l;)items[i] = arguments[i++];\n    return new (typeof this === 'function' ? this : $Observable)(function(observer){\n      var done = false;\n      microtask(function(){\n        if(!done){\n          for(var i = 0; i < items.length; ++i){\n            observer.next(items[i]);\n            if(done)return;\n          } observer.complete();\n        }\n      });\n      return function(){ done = true; };\n    });\n  }\n});\n\nhide($Observable.prototype, OBSERVABLE, function(){ return this; });\n\n$export($export.G, {Observable: $Observable});\n\n_dereq_(91)('Observable');\n},{\"117\":117,\"23\":23,\"3\":3,\"32\":32,\"37\":37,\"38\":38,\"40\":40,\"6\":6,\"64\":64,\"7\":7,\"86\":86,\"91\":91}],273:[function(_dereq_,module,exports){\nvar metadata                  = _dereq_(63)\n  , anObject                  = _dereq_(7)\n  , toMetaKey                 = metadata.key\n  , ordinaryDefineOwnMetadata = metadata.set;\n\nmetadata.exp({defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey){\n  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));\n}});\n},{\"63\":63,\"7\":7}],274:[function(_dereq_,module,exports){\nvar metadata               = _dereq_(63)\n  , anObject               = _dereq_(7)\n  , toMetaKey              = metadata.key\n  , getOrCreateMetadataMap = metadata.map\n  , store                  = metadata.store;\n\nmetadata.exp({deleteMetadata: function deleteMetadata(metadataKey, target /*, targetKey */){\n  var targetKey   = arguments.length < 3 ? undefined : toMetaKey(arguments[2])\n    , metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);\n  if(metadataMap === undefined || !metadataMap['delete'](metadataKey))return false;\n  if(metadataMap.size)return true;\n  var targetMetadata = store.get(target);\n  targetMetadata['delete'](targetKey);\n  return !!targetMetadata.size || store['delete'](target);\n}});\n},{\"63\":63,\"7\":7}],275:[function(_dereq_,module,exports){\nvar Set                     = _dereq_(220)\n  , from                    = _dereq_(10)\n  , metadata                = _dereq_(63)\n  , anObject                = _dereq_(7)\n  , getPrototypeOf          = _dereq_(74)\n  , ordinaryOwnMetadataKeys = metadata.keys\n  , toMetaKey               = metadata.key;\n\nvar ordinaryMetadataKeys = function(O, P){\n  var oKeys  = ordinaryOwnMetadataKeys(O, P)\n    , parent = getPrototypeOf(O);\n  if(parent === null)return oKeys;\n  var pKeys  = ordinaryMetadataKeys(parent, P);\n  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;\n};\n\nmetadata.exp({getMetadataKeys: function getMetadataKeys(target /*, targetKey */){\n  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n}});\n},{\"10\":10,\"220\":220,\"63\":63,\"7\":7,\"74\":74}],276:[function(_dereq_,module,exports){\nvar metadata               = _dereq_(63)\n  , anObject               = _dereq_(7)\n  , getPrototypeOf         = _dereq_(74)\n  , ordinaryHasOwnMetadata = metadata.has\n  , ordinaryGetOwnMetadata = metadata.get\n  , toMetaKey              = metadata.key;\n\nvar ordinaryGetMetadata = function(MetadataKey, O, P){\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if(hasOwn)return ordinaryGetOwnMetadata(MetadataKey, O, P);\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;\n};\n\nmetadata.exp({getMetadata: function getMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});\n},{\"63\":63,\"7\":7,\"74\":74}],277:[function(_dereq_,module,exports){\nvar metadata                = _dereq_(63)\n  , anObject                = _dereq_(7)\n  , ordinaryOwnMetadataKeys = metadata.keys\n  , toMetaKey               = metadata.key;\n\nmetadata.exp({getOwnMetadataKeys: function getOwnMetadataKeys(target /*, targetKey */){\n  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n}});\n},{\"63\":63,\"7\":7}],278:[function(_dereq_,module,exports){\nvar metadata               = _dereq_(63)\n  , anObject               = _dereq_(7)\n  , ordinaryGetOwnMetadata = metadata.get\n  , toMetaKey              = metadata.key;\n\nmetadata.exp({getOwnMetadata: function getOwnMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryGetOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});\n},{\"63\":63,\"7\":7}],279:[function(_dereq_,module,exports){\nvar metadata               = _dereq_(63)\n  , anObject               = _dereq_(7)\n  , getPrototypeOf         = _dereq_(74)\n  , ordinaryHasOwnMetadata = metadata.has\n  , toMetaKey              = metadata.key;\n\nvar ordinaryHasMetadata = function(MetadataKey, O, P){\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if(hasOwn)return true;\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;\n};\n\nmetadata.exp({hasMetadata: function hasMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});\n},{\"63\":63,\"7\":7,\"74\":74}],280:[function(_dereq_,module,exports){\nvar metadata               = _dereq_(63)\n  , anObject               = _dereq_(7)\n  , ordinaryHasOwnMetadata = metadata.has\n  , toMetaKey              = metadata.key;\n\nmetadata.exp({hasOwnMetadata: function hasOwnMetadata(metadataKey, target /*, targetKey */){\n  return ordinaryHasOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n}});\n},{\"63\":63,\"7\":7}],281:[function(_dereq_,module,exports){\nvar metadata                  = _dereq_(63)\n  , anObject                  = _dereq_(7)\n  , aFunction                 = _dereq_(3)\n  , toMetaKey                 = metadata.key\n  , ordinaryDefineOwnMetadata = metadata.set;\n\nmetadata.exp({metadata: function metadata(metadataKey, metadataValue){\n  return function decorator(target, targetKey){\n    ordinaryDefineOwnMetadata(\n      metadataKey, metadataValue,\n      (targetKey !== undefined ? anObject : aFunction)(target),\n      toMetaKey(targetKey)\n    );\n  };\n}});\n},{\"3\":3,\"63\":63,\"7\":7}],282:[function(_dereq_,module,exports){\n// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = _dereq_(32);\n\n$export($export.P + $export.R, 'Set', {toJSON: _dereq_(20)('Set')});\n},{\"20\":20,\"32\":32}],283:[function(_dereq_,module,exports){\n'use strict';\n// https://github.com/mathiasbynens/String.prototype.at\nvar $export = _dereq_(32)\n  , $at     = _dereq_(97)(true);\n\n$export($export.P, 'String', {\n  at: function at(pos){\n    return $at(this, pos);\n  }\n});\n},{\"32\":32,\"97\":97}],284:[function(_dereq_,module,exports){\n'use strict';\n// https://tc39.github.io/String.prototype.matchAll/\nvar $export     = _dereq_(32)\n  , defined     = _dereq_(27)\n  , toLength    = _dereq_(108)\n  , isRegExp    = _dereq_(50)\n  , getFlags    = _dereq_(36)\n  , RegExpProto = RegExp.prototype;\n\nvar $RegExpStringIterator = function(regexp, string){\n  this._r = regexp;\n  this._s = string;\n};\n\n_dereq_(52)($RegExpStringIterator, 'RegExp String', function next(){\n  var match = this._r.exec(this._s);\n  return {value: match, done: match === null};\n});\n\n$export($export.P, 'String', {\n  matchAll: function matchAll(regexp){\n    defined(this);\n    if(!isRegExp(regexp))throw TypeError(regexp + ' is not a regexp!');\n    var S     = String(this)\n      , flags = 'flags' in RegExpProto ? String(regexp.flags) : getFlags.call(regexp)\n      , rx    = new RegExp(regexp.source, ~flags.indexOf('g') ? flags : 'g' + flags);\n    rx.lastIndex = toLength(regexp.lastIndex);\n    return new $RegExpStringIterator(rx, S);\n  }\n});\n},{\"108\":108,\"27\":27,\"32\":32,\"36\":36,\"50\":50,\"52\":52}],285:[function(_dereq_,module,exports){\n'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = _dereq_(32)\n  , $pad    = _dereq_(100);\n\n$export($export.P, 'String', {\n  padEnd: function padEnd(maxLength /*, fillString = ' ' */){\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);\n  }\n});\n},{\"100\":100,\"32\":32}],286:[function(_dereq_,module,exports){\n'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = _dereq_(32)\n  , $pad    = _dereq_(100);\n\n$export($export.P, 'String', {\n  padStart: function padStart(maxLength /*, fillString = ' ' */){\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n},{\"100\":100,\"32\":32}],287:[function(_dereq_,module,exports){\n'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\n_dereq_(102)('trimLeft', function($trim){\n  return function trimLeft(){\n    return $trim(this, 1);\n  };\n}, 'trimStart');\n},{\"102\":102}],288:[function(_dereq_,module,exports){\n'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\n_dereq_(102)('trimRight', function($trim){\n  return function trimRight(){\n    return $trim(this, 2);\n  };\n}, 'trimEnd');\n},{\"102\":102}],289:[function(_dereq_,module,exports){\n_dereq_(115)('asyncIterator');\n},{\"115\":115}],290:[function(_dereq_,module,exports){\n_dereq_(115)('observable');\n},{\"115\":115}],291:[function(_dereq_,module,exports){\n// https://github.com/ljharb/proposal-global\nvar $export = _dereq_(32);\n\n$export($export.S, 'System', {global: _dereq_(38)});\n},{\"32\":32,\"38\":38}],292:[function(_dereq_,module,exports){\nvar $iterators    = _dereq_(130)\n  , redefine      = _dereq_(87)\n  , global        = _dereq_(38)\n  , hide          = _dereq_(40)\n  , Iterators     = _dereq_(56)\n  , wks           = _dereq_(117)\n  , ITERATOR      = wks('iterator')\n  , TO_STRING_TAG = wks('toStringTag')\n  , ArrayValues   = Iterators.Array;\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype\n    , key;\n  if(proto){\n    if(!proto[ITERATOR])hide(proto, ITERATOR, ArrayValues);\n    if(!proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    for(key in $iterators)if(!proto[key])redefine(proto, key, $iterators[key], true);\n  }\n}\n},{\"117\":117,\"130\":130,\"38\":38,\"40\":40,\"56\":56,\"87\":87}],293:[function(_dereq_,module,exports){\nvar $export = _dereq_(32)\n  , $task   = _dereq_(104);\n$export($export.G + $export.B, {\n  setImmediate:   $task.set,\n  clearImmediate: $task.clear\n});\n},{\"104\":104,\"32\":32}],294:[function(_dereq_,module,exports){\n// ie9- setTimeout & setInterval additional parameters fix\nvar global     = _dereq_(38)\n  , $export    = _dereq_(32)\n  , invoke     = _dereq_(44)\n  , partial    = _dereq_(83)\n  , navigator  = global.navigator\n  , MSIE       = !!navigator && /MSIE .\\./.test(navigator.userAgent); // <- dirty ie9- check\nvar wrap = function(set){\n  return MSIE ? function(fn, time /*, ...args */){\n    return set(invoke(\n      partial,\n      [].slice.call(arguments, 2),\n      typeof fn == 'function' ? fn : Function(fn)\n    ), time);\n  } : set;\n};\n$export($export.G + $export.B + $export.F * MSIE, {\n  setTimeout:  wrap(global.setTimeout),\n  setInterval: wrap(global.setInterval)\n});\n},{\"32\":32,\"38\":38,\"44\":44,\"83\":83}],295:[function(_dereq_,module,exports){\n_dereq_(243);\n_dereq_(180);\n_dereq_(182);\n_dereq_(181);\n_dereq_(184);\n_dereq_(186);\n_dereq_(191);\n_dereq_(185);\n_dereq_(183);\n_dereq_(193);\n_dereq_(192);\n_dereq_(188);\n_dereq_(189);\n_dereq_(187);\n_dereq_(179);\n_dereq_(190);\n_dereq_(194);\n_dereq_(195);\n_dereq_(146);\n_dereq_(148);\n_dereq_(147);\n_dereq_(197);\n_dereq_(196);\n_dereq_(167);\n_dereq_(177);\n_dereq_(178);\n_dereq_(168);\n_dereq_(169);\n_dereq_(170);\n_dereq_(171);\n_dereq_(172);\n_dereq_(173);\n_dereq_(174);\n_dereq_(175);\n_dereq_(176);\n_dereq_(150);\n_dereq_(151);\n_dereq_(152);\n_dereq_(153);\n_dereq_(154);\n_dereq_(155);\n_dereq_(156);\n_dereq_(157);\n_dereq_(158);\n_dereq_(159);\n_dereq_(160);\n_dereq_(161);\n_dereq_(162);\n_dereq_(163);\n_dereq_(164);\n_dereq_(165);\n_dereq_(166);\n_dereq_(230);\n_dereq_(235);\n_dereq_(242);\n_dereq_(233);\n_dereq_(225);\n_dereq_(226);\n_dereq_(231);\n_dereq_(236);\n_dereq_(238);\n_dereq_(221);\n_dereq_(222);\n_dereq_(223);\n_dereq_(224);\n_dereq_(227);\n_dereq_(228);\n_dereq_(229);\n_dereq_(232);\n_dereq_(234);\n_dereq_(237);\n_dereq_(239);\n_dereq_(240);\n_dereq_(241);\n_dereq_(141);\n_dereq_(143);\n_dereq_(142);\n_dereq_(145);\n_dereq_(144);\n_dereq_(129);\n_dereq_(127);\n_dereq_(134);\n_dereq_(131);\n_dereq_(137);\n_dereq_(139);\n_dereq_(126);\n_dereq_(133);\n_dereq_(123);\n_dereq_(138);\n_dereq_(121);\n_dereq_(136);\n_dereq_(135);\n_dereq_(128);\n_dereq_(132);\n_dereq_(120);\n_dereq_(122);\n_dereq_(125);\n_dereq_(124);\n_dereq_(140);\n_dereq_(130);\n_dereq_(213);\n_dereq_(219);\n_dereq_(214);\n_dereq_(215);\n_dereq_(216);\n_dereq_(217);\n_dereq_(218);\n_dereq_(198);\n_dereq_(149);\n_dereq_(220);\n_dereq_(255);\n_dereq_(256);\n_dereq_(244);\n_dereq_(245);\n_dereq_(250);\n_dereq_(253);\n_dereq_(254);\n_dereq_(248);\n_dereq_(251);\n_dereq_(249);\n_dereq_(252);\n_dereq_(246);\n_dereq_(247);\n_dereq_(199);\n_dereq_(200);\n_dereq_(201);\n_dereq_(202);\n_dereq_(203);\n_dereq_(206);\n_dereq_(204);\n_dereq_(205);\n_dereq_(207);\n_dereq_(208);\n_dereq_(209);\n_dereq_(210);\n_dereq_(212);\n_dereq_(211);\n_dereq_(257);\n_dereq_(283);\n_dereq_(286);\n_dereq_(285);\n_dereq_(287);\n_dereq_(288);\n_dereq_(284);\n_dereq_(289);\n_dereq_(290);\n_dereq_(268);\n_dereq_(271);\n_dereq_(267);\n_dereq_(265);\n_dereq_(266);\n_dereq_(269);\n_dereq_(270);\n_dereq_(260);\n_dereq_(282);\n_dereq_(291);\n_dereq_(259);\n_dereq_(261);\n_dereq_(263);\n_dereq_(262);\n_dereq_(264);\n_dereq_(273);\n_dereq_(274);\n_dereq_(276);\n_dereq_(275);\n_dereq_(278);\n_dereq_(277);\n_dereq_(279);\n_dereq_(280);\n_dereq_(281);\n_dereq_(258);\n_dereq_(272);\n_dereq_(294);\n_dereq_(293);\n_dereq_(292);\nmodule.exports = _dereq_(23);\n},{\"120\":120,\"121\":121,\"122\":122,\"123\":123,\"124\":124,\"125\":125,\"126\":126,\"127\":127,\"128\":128,\"129\":129,\"130\":130,\"131\":131,\"132\":132,\"133\":133,\"134\":134,\"135\":135,\"136\":136,\"137\":137,\"138\":138,\"139\":139,\"140\":140,\"141\":141,\"142\":142,\"143\":143,\"144\":144,\"145\":145,\"146\":146,\"147\":147,\"148\":148,\"149\":149,\"150\":150,\"151\":151,\"152\":152,\"153\":153,\"154\":154,\"155\":155,\"156\":156,\"157\":157,\"158\":158,\"159\":159,\"160\":160,\"161\":161,\"162\":162,\"163\":163,\"164\":164,\"165\":165,\"166\":166,\"167\":167,\"168\":168,\"169\":169,\"170\":170,\"171\":171,\"172\":172,\"173\":173,\"174\":174,\"175\":175,\"176\":176,\"177\":177,\"178\":178,\"179\":179,\"180\":180,\"181\":181,\"182\":182,\"183\":183,\"184\":184,\"185\":185,\"186\":186,\"187\":187,\"188\":188,\"189\":189,\"190\":190,\"191\":191,\"192\":192,\"193\":193,\"194\":194,\"195\":195,\"196\":196,\"197\":197,\"198\":198,\"199\":199,\"200\":200,\"201\":201,\"202\":202,\"203\":203,\"204\":204,\"205\":205,\"206\":206,\"207\":207,\"208\":208,\"209\":209,\"210\":210,\"211\":211,\"212\":212,\"213\":213,\"214\":214,\"215\":215,\"216\":216,\"217\":217,\"218\":218,\"219\":219,\"220\":220,\"221\":221,\"222\":222,\"223\":223,\"224\":224,\"225\":225,\"226\":226,\"227\":227,\"228\":228,\"229\":229,\"23\":23,\"230\":230,\"231\":231,\"232\":232,\"233\":233,\"234\":234,\"235\":235,\"236\":236,\"237\":237,\"238\":238,\"239\":239,\"240\":240,\"241\":241,\"242\":242,\"243\":243,\"244\":244,\"245\":245,\"246\":246,\"247\":247,\"248\":248,\"249\":249,\"250\":250,\"251\":251,\"252\":252,\"253\":253,\"254\":254,\"255\":255,\"256\":256,\"257\":257,\"258\":258,\"259\":259,\"260\":260,\"261\":261,\"262\":262,\"263\":263,\"264\":264,\"265\":265,\"266\":266,\"267\":267,\"268\":268,\"269\":269,\"270\":270,\"271\":271,\"272\":272,\"273\":273,\"274\":274,\"275\":275,\"276\":276,\"277\":277,\"278\":278,\"279\":279,\"280\":280,\"281\":281,\"282\":282,\"283\":283,\"284\":284,\"285\":285,\"286\":286,\"287\":287,\"288\":288,\"289\":289,\"290\":290,\"291\":291,\"292\":292,\"293\":293,\"294\":294}],296:[function(_dereq_,module,exports){\n(function (global){\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" ||\n              (method === \"throw\" && delegate.iterator[method] === undefined)) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(\n            delegate.iterator[method],\n            delegate.iterator,\n            arg\n          );\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = arg;\n\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[1]);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-polyfill/dist/polyfill.js\n// module id = 19\n// module chunks = 0","import getLogger from '../util/logger';\n\nconst logger = getLogger();\n\nexport default class AnnotationCache {\n  constructor() {\n    this._cache = {\n      annosPerCanvas: {}\n    };\n    this._queues = {\n      annosPerCanvas: []\n    };\n    this._maxCanvases = 5;\n  }\n\n  getAnnotationsPerCanvas(canvasId) {\n    logger.debug('AnnotationCacheInMemory#getAnnotationsPerCanvas', canvasId);\n    this._logState('get');\n    return this._cache.annosPerCanvas[canvasId] || null;\n  }\n\n  setAnnotationsPerCanvas(canvasId, annotations) {\n    logger.debug('AnnotationCacheInMemory#setAnnotationsPerCanvas canvasId:', canvasId, 'annotations:', annotations);\n    const cache = this._cache.annosPerCanvas;\n    const queue = this._queues.annosPerCanvas;\n\n    this._logState('set before');\n\n    if (cache[canvasId]) {\n      // cache is already set\n      return;\n    }\n\n    cache[canvasId] = annotations;\n    queue.push(canvasId);\n\n    if (queue.length > this._maxCanvases) {\n      const canvasId = queue.shift();\n      delete cache[canvasId];\n    }\n\n    this._logState('set after');\n  }\n\n  invalidateAllCanvases() {\n    logger.debug('AnnotationCacheInMemory#invalidateAllCanvases');\n    this._cache.annosPerCanvas = {};\n    this._queues.annosPerCanvas = [];\n  }\n\n  invalidateCanvasId(canvasId) {\n    logger.debug('AnnotationCacheInMemory#invalidateCanvasId canvasId:', canvasId);\n    const queue = this._queues.annosPerCanvas;\n\n    delete this._cache.annosPerCanvas[canvasId];\n    queue.splice(queue.indexOf(canvasId), 1);\n  }\n\n  _logState(label) {\n    logger.debug('Mem cache ' + label);\n    logger.debug('cache:', this._cache);\n    logger.debug('queues:', this._queues);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/annotation-cache-in-memory.js","import {Anno, annoUtil} from '../import';\nimport getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\n\nconst logger = getLogger();\n\nexport default class AnnotationCacheIndexeddb {\n  constructor() {\n    // Not using indexddb any more. As of 10/26/2017.\n    // It is too unstable on Safari.\n    this._valid = false;\n    return;\n\n    this._dbName = 'anno_cache';\n    this._valid =  window.indexedDB ? true : false;\n    this._expiresInMS = 2 * 60 * 60 * 1000; // milliseconds\n    this._inMemoryCache = {};\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  init() {\n    logger.debug('AnnotationCacheINdexeddb#_init');\n\n    this._db = new Dexie(this._dbName);\n    this._db.version(1).stores({\n      layers: 'id,jsonData,timestamp',\n      annosPerCanvas: 'canvasId,jsonData,timestamp'\n    });\n\n    return this._db.open().catch(e => {\n      this._valid = false;\n      logger.error('AnnotationCache#setupIndexDb open failed:', e);\n    });\n  }\n\n  isValid() {\n    return this._valid;\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  deleteDb() {\n    logger.debug('AnnotationCache#deleteDb');\n    return Dexie.delete(this._dbName);\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  getLayers() {\n    logger.debug('AnnotationCache#getLayers');\n    return this._db.layers.where('id').equals(1).first(function (row) {\n      const data = (row !== undefined) ? row.jsonData : null;\n      return (data instanceof Array) ? data : [];\n    });\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  setLayers(layersJson) {\n    logger.debug('AnnotationCache#setLayers', layersJson);\n    const _this = this;\n    return this._emptyTable('layers')\n      .then(function() {\n        return _this._db.layers.add({ id: 1, jsonData: layersJson})\n          .catch(function(e) {\n            logger.error('AnnotatinCache#setLayers update failed: ' + e);\n            throw e;\n          });\n      });\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  getAnnotationsPerCanvas(canvasId) {\n    logger.debug('AnnotationCache#getAnnotationsPerCanvas', canvasId);\n    const _this = this;\n    const coll = this._db.annosPerCanvas.where('canvasId').equals(canvasId)\n      .and(function(rec) {\n        const nowMS = new Date().valueOf();\n        logger.debug('AnnotationCache#getAnnotationsPerCanvas expiration test: ' + (nowMS <  rec.timestamp + _this._expiresInMS));\n        return nowMS < rec.timestamp  + _this._expiresInMS;\n      });\n    return coll.first(function(row) {\n      return row ? row.jsonData : null;\n    });\n  }\n\n  /**\n   * @returns {object} a Promise\n   */\n  setAnnotationsPerCanvas(canvasId, data) {\n    logger.debug('AnnotationCache#setAnnotationsPerCanvas canvas:', canvasId, 'data:', data);\n    const table = this._db.annosPerCanvas;\n    const coll = this._db.annosPerCanvas.where('canvasId').equals(canvasId);\n    const nowMS = new Date().valueOf();\n    const row = { canvasId: canvasId, jsonData: data, timestamp: nowMS };\n\n    return table.put(row)\n    .catch(reason => {\n      logger.error('AnnotationCache#setAnnotationsPerCanvas put failed for', row, ': ' + reason);\n      this._valid = false;\n    });\n  }\n\n  invalidateAllCanvases() {\n    logger.debug('AnnotationCache#invalidateAllCanvases');\n    return this._emptyTable('annosPerCanvas');\n  }\n\n  invalidateCanvasId(canvasId) {\n    logger.debug('AnnotationCache#invalidateCanvasId canvasId:', canvasId);\n    return this._deleteAnnotationsPerCanvas(canvasId);\n  }\n\n /**\n   * @returns {object} a Promise\n   */\n  _emptyTable(name) {\n    logger.debug('AnnotationCache#emptyTable', name);\n    const _this = this;\n    const table = this._db.table(name);\n    return this._db.transaction('rw', table, function() {\n      table.each(function (item, cursor) {\n        logger.debug('AnnotationCache#emptyTable deleting', cursor.key);\n        table.delete(cursor.key).catch(function(e) {\n          logger.error('AnnotationCache#emptyTable deleting from table ' + name + ': ' + e);\n        });\n      });\n    });\n  }\n\n  _deleteAnnotationsPerCanvas(canvasId) {\n    logger.debug('AnnotationCache#deleteAnnotationsPerCanvas canvasId:', canvasId);\n    const _this = this;\n    const table = this._db.annosPerCanvas;\n    const coll = table.where('canvasId').equals(canvasId);\n    return coll.delete().catch(function(e) {\n      logger.error('AnnotationCache#deleteAnnotationsPerCanvas failed to delete canvasId: ' + canvasId);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/annotation-cache-indexeddb.js","import {annoUtil} from '../import';\nimport FirebaseProxy from './firebase-proxy';\nimport getLogger from '../util/logger';\nimport getPageController from '../page-controller';\n\n// Implements inteface between Joosugi annotation explorer and the annotation server\nexport default class AnnotationSourceFb {\n  constructor() {\n    this.logger = getLogger();\n    const fbSettings = getPageController().getConfig().extension.firebase;\n    this.fbProxy = new FirebaseProxy(fbSettings);\n    this.fbKeyMap = {}; // key: annotation['@id], value: firebase key.\n  }\n\n  getLayers() {\n    const _this = this;\n    this.logger.debug('AnnotationSourceFb#getLayers');\n    const promise = new Promise(function(resolve, reject) {\n      const ref = firebase.database().ref('layers');\n\n      ref.once('value', function (snapshot) {\n        const data = snapshot.val();\n        const layers = [];\n        _this.logger.debug('Layers:', data);\n        jQuery.each(data, function (key, value) {\n          layers.push(value);\n        });\n        resolve(layers);\n      });\n    });\n    return promise;\n  }\n\n  getAnnotations(canvasId) {\n    this.logger.debug('AnnotationSourceFb#getAnnotations canvasId:', canvasId);\n    const _this = this;\n\n    return new Promise((resolve, reject) => {\n      const fbDfd = _this.fbProxy.getAnnosByCanvasId(canvasId);\n      const annotations = [];\n\n      fbDfd.done(function(annoInfos) {\n        _this.logger.debug('AnnotationSourceFb#_search annoInfos:', annoInfos);\n        jQuery.each(annoInfos, function(index, annoInfo) {\n          var oaAnnotation = _this._getAnnotationInOA(annoInfo.annotation);\n          oaAnnotation.layerId = annoInfo.layerId;\n          _this.fbKeyMap[oaAnnotation['@id']] = annoInfo.fbKey;\n          annotations.push(oaAnnotation);\n        });\n        resolve(annotations);\n      });\n    });\n  }\n\n  createAnnotation(oaAnnotation) {\n    this.logger.debug('AnnotationSourceFb#createAnnotation oaAnnotation:', oaAnnotation);\n    const _this = this;\n    const layerId = oaAnnotation.layerId;\n    const annotation = this._getAnnotationInEndpoint(oaAnnotation);\n    const annoId = Mirador.genUUID();\n    annotation['@id'] = annoId;\n    const canvasIds = annoUtil.getTargetCanvasIds(annotation, this.annotationsList);\n    const canvasId = canvasIds[0];\n    const fbKey = this.fbProxy.addAnno(annotation, canvasId, layerId);\n    this.fbKeyMap[annoId] = fbKey;\n\n    return new Promise((resolve, reject) => {\n      oaAnnotation['@id'] = annoId;\n      resolve(oaAnnotation);\n    });\n  }\n\n  updateAnnotation(oaAnnotation) {\n    this.logger.debug('AnnotationSourceFb#updateAnnotation annotation:', oaAnnotation);\n\n    var _this = this;\n    var canvasId = this._getTargetCanvasId(oaAnnotation);\n    var layerId = oaAnnotation.layerId;\n    var annotation = this._getAnnotationInEndpoint(oaAnnotation);\n    var fbKey = this.fbKeyMap[annotation['@id']];\n    var ref = firebase.database().ref('/annotations/' + fbKey);\n\n    return new Promise((resolve, reject) => {\n      ref.update({ annotation: annotation, layerId: layerId }, function (error) {\n        if (error) {\n          const msg = 'ERROR: Firebase update failed';\n          reject(msg);\n        } else {\n          // Delete from all lists except for this canvas/layer.\n          _this.fbProxy.deleteAnnoFromListExcludeCanvasLayer(annotation, canvasId, layerId);\n          _this.fbProxy.addAnnoToList(annotation, canvasId, layerId);\n          _this.logger.debug('Firbase update succeeded');\n          resolve(oaAnnotation);\n        }\n      });\n    });\n  }\n\n  deleteAnnotation(annotationId) {\n    this.logger.debug('YaleDemoEndpoint#delete annotationId:' + annotationId);\n    const _this = this;\n    const fbKey = this.fbKeyMap[annotationId];\n    const ref = firebase.database().ref('annotations/' + fbKey);\n\n    return new Promise((resolve, reject) => {\n      ref.remove(function (error) {\n        if (error) {\n          const msg = 'ERROR delete failed for annotation id: ' + annotationId;\n          reject(msg);\n        } else {\n          _this.fbProxy.deleteAnnoFromList(annotationId);\n          resolve();\n        }\n      });\n    });\n  }\n\n  updateAnnotationListOrder(canvasId, layerId, annoIds) {\n    this.logger.debug('AnnotationSourceFb#updateAnnotationListOrder');\n    const _this = this;\n    const combinedId = canvasId + layerId;\n    const ref = firebase.database().ref('lists');\n    const query = ref.orderByChild('combinedId').equalTo(combinedId);\n\n    return new Promise((resolve, reject) => {\n      query.once('value', function(snapshot) {\n        if (snapshot.exists()) { // child with combiedId exists\n          resolve();\n        } else {\n          _this.logger.debug('ERROR updateOrder: list not found for', combinedId);\n          reject();\n        }\n      });\n    })\n    .then(() => {\n      query.once('child_added', function(snapshot, prevChildKey) {\n        snapshot.ref.update({ annotationIds: annoIds});\n      });\n    });\n  }\n\n  _getTargetCanvasId(annotation) {\n    var targetAnno = null;\n\n    if (annotation['@type'] === 'oa:Annotation') {\n      targetAnno = annoUtil.findFinalTargetAnnotation(annotation, this.annotationsList);\n    } else {\n      targetAnno = annotation;\n    }\n\n    var canvasId = targetAnno.on.full;\n    this.logger.debug('_getTargetCanvasId canvas ID:', canvasId);\n    return canvasId;\n  }\n\n  // Convert Endpoint annotation to OA\n  _getAnnotationInOA(annotation) {\n    var motivation = annotation.motivation;\n    if (!(motivation instanceof Array)) {\n      if (motivation !== 'oa:commenting') {\n        this.logger.error('YaleEndpoint#getAnnotationInOA unexpected motivation value: ', motivation, ', id: ' + annotation['@id']);\n      }\n      motivation = ['oa:commenting'];\n    }\n\n    var oaAnnotation = {\n      '@context': 'http://iiif.io/api/presentation/2/context.json',\n      '@type': 'oa:Annotation',\n      '@id': annotation['@id'],\n      motivation: motivation,\n      resource : annotation.resource,\n      on: annotation.on,\n      within: annotation.within,\n    };\n    oaAnnotation.layerId = annotation.layerId;\n    return oaAnnotation;\n  }\n\n  // Converts OA Annotation to endpoint format\n  _getAnnotationInEndpoint(oaAnnotation) {\n    const annotation = {\n      '@id': oaAnnotation['@id'],\n      '@type': oaAnnotation['@type'],\n      '@context': oaAnnotation['@context'],\n      motivation: oaAnnotation.motivation,\n      resource: oaAnnotation.resource,\n      on: oaAnnotation.on,\n    };\n    if (oaAnnotation.within) {\n      annotation.within = oaAnnotation.within;\n    }\n    if (oaAnnotation.orderWeight) {\n      annotation.orderWeight = oaAnnotation.orderWeight;\n    }\n    return annotation;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/annotation-source-fb.js","import {AnnotationToc} from '../import';\nimport getLogger from '../util/logger';\n\nconst logger = getLogger();\n\nexport default class AnnotationTocCache {\n  constructor(options) {\n    this.options = Object.assign({\n      tocSpec: null,\n      annotationExplorer: null\n    }, options);\n\n    this._cache = {};\n  }\n\n  async getToc(canvasId) {\n    logger.debug('AnnotationTocCache#getToc canvasId:', canvasId);\n\n    if (!this._cache[canvasId]) {\n      this._cache[canvasId] = await this.createToc(canvasId);\n    } else {\n      logger.debug('AnnotationTocCache#getToc hit cache', canvasId);\n    }\n    logger.debug('AnnotationTocCache getToc toc:', this._cache[canvasId]);\n    return this._cache[canvasId];\n  }\n\n  async createToc(canvasId) {\n    const annotations = await this.options.annotationExplorer.getAnnotations({canvasId: canvasId});\n    const toc = new AnnotationToc(this.options.tocSpec, annotations, {logger: logger});\n    return toc;\n  }\n\n  invalidate(canvasId) {\n    delete this._cache[canvasId];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/annotation-toc-cache.js","import {annoUtil} from '../import';\nimport getLogger from '../util/logger';\n\nexport default class FirebaseProxy {\n  constructor(settings) {\n    this.logger = getLogger();\n    var config = {\n      apiKey: settings.apiKey,\n      authDomain: settings.authDomain,\n      databaseURL: settings.databaseUrl,\n      storageBuket: settings.storageBuket\n    };\n    firebase.initializeApp(config);\n  }\n  \n  getAnnosByCanvasId(canvasId) {\n    const _this = this;\n    const dfd = jQuery.Deferred();\n    const ref =  firebase.database().ref('annotations');\n    const fbAnnos = {};\n    const fbKeys = {};\n    const annoInfos = [];\n    \n    ref.once('value', function(snapshot) {\n      var data = snapshot.val() || [];\n      jQuery.each(data, function(key, value) {\n        if (value.canvasId === canvasId) {\n          var annoId = value.annotation['@id'];\n          fbKeys[annoId] = key;\n          fbAnnos[annoId] = value.annotation;\n        }\n      });\n      var listsRef = firebase.database().ref('lists');\n      listsRef.once('value', function(snapshot) {\n        var listObjs = snapshot.val() || [];\n        jQuery.each(listObjs, function(key, listObj) {\n          if (listObj.canvasId === canvasId) {\n            var annotationIds = listObj.annotationIds || [];\n            jQuery.each(annotationIds, function(index, annotationId) {\n              var fbKey = fbKeys[annotationId];\n              var anno = fbAnnos[annotationId];\n              if (anno) {\n                annoInfos.push({\n                  fbKey: fbKey,\n                  annotation: anno,\n                  layerId: listObj.layerId\n                });\n              } else {\n                _this.logger.error(\"Anno in the list doesn't exist: \" + annotationId);\n              }\n            });\n          }\n        });\n        dfd.resolve(annoInfos);\n      });\n      \n    });\n    return dfd;\n  }\n  \n  addAnno(annotation, canvasId, layerId) {\n    var ref = firebase.database().ref('annotations');\n    var annoObj = { \n      canvasId: canvasId,\n      layerId: layerId,\n      annotation: annotation\n    };\n    annoObj.id = annotation['@id'];\n    var annoRef = ref.push(annoObj);\n    this.addAnnoToList(annotation, canvasId, layerId);\n    return annoRef.key;\n  }\n  \n  addAnnoToList(annotation, canvasId, layerId) {\n    var dfd = jQuery.Deferred();\n    var annoId = annotation['@id'];\n    var combinedId = canvasId + layerId;\n    var ref = firebase.database().ref('lists');\n    var query = ref.orderByChild('combinedId').equalTo(combinedId);\n    \n    query.once('value', function(snapshot) {\n      if (snapshot.exists()) { // child with combiedId exists\n        dfd.resolve(true);\n      } else {\n        dfd.resolve(false);\n      }\n    });\n      \n    dfd.done(function(matched) {\n      if (matched) {\n        query.once('child_added', function(snapshot, prevChildKey) {\n          var data = snapshot.val();\n          var ref = snapshot.ref;\n          data.annotationIds = data.annotationIds || [];\n          if (jQuery.inArray(annoId, data.annotationIds) === -1) {\n            data.annotationIds.push(annoId);\n            ref.update({ annotationIds: data.annotationIds});\n          }\n        });\n      } else {\n        ref.push({\n          combinedId: combinedId,\n          canvasId: canvasId,\n          layerId: layerId,\n          annotationIds: [ annoId ]\n        });\n      }\n    });\n  }\n  \n  deleteAnnoFromList(annoId) {\n    var ref = firebase.database().ref('lists');\n    ref.on('child_added', function(snapshot) {\n      var data = snapshot.val();\n      var index = data.annotationIds ? data.annotationIds.indexOf(annoId) : -1;\n      if (index > -1) {\n        data.annotationIds.splice(index, 1);\n        snapshot.ref.update({ annotationIds: data.annotationIds });\n      }\n    });\n  }\n  \n  deleteAnnoFromListExcludeCanvasLayer(annotation, canvasId, layerId) {\n    this.logger.debug('FirebaseProxy#_fbDeleteAnnoFromListExcludeCanvasLayer');\n    var annoId = annotation['@id'];\n    var combinedId = canvasId + layerId;\n    var ref = firebase.database().ref('lists');\n    \n    ref.once('value', function(snapshot) {\n      var data = snapshot.val() || [];\n      snapshot.forEach(function(childSnapshot) {\n        var childRef = childSnapshot.ref;\n        var childKey = childSnapshot.key;\n        var childData = childSnapshot.val();\n        if (childData.combinedId !== combinedId) {\n          var index = childData.annotationIds ? childData.annotationIds.indexOf(annoId) : -1;\n          if (index > -1) {\n            childData.annotationIds.splice(index, 1);\n            childRef.update({ annotationIds: childData.annotationIds });\n          }\n        }\n      });\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/annotation-data/firebase-proxy.js","import getLogger from '../util/logger';\n\n// NOTE: ConfigFetcher is no longer used as of 10/27/2017.\n// All settings are fed as arguments to App.init().\n// This file has to be deleted after it has been verified that this\n// new scheme works on the Drupal and Rails portals.\n\nexport default function getConfigFetcher() {\n  if (!instance) {\n    instance = new ConfigFetcher();\n  }\n  return instance;\n}\n\nlet instance = null;\n\nclass ConfigFetcher {\n  constructor() {\n    this.logger = getLogger();\n  }\n\n  /**\n   * Retrieves parameters passed via HTML attributes.\n   */\n  fetchSettingsFromHtml(elem) {\n    const options = {};\n    const tocTagsStr = elem.attr('data-toc-tags') || '';\n    const layerIdsStr = elem.attr('data-layer-ids') || '';\n\n    options.apiUrl = elem.attr('data-settings-url');\n    options.roomId = elem.attr('data-room-id');\n\n    options.manifestUri = elem.attr('data-manifest-url');\n    options.projectId = elem.attr('data-room-id'); // group or project ID\n\n    options.canvasId = elem.attr('data-canvas-id') || '';\n    options.tocTags = tocTagsStr ? tocTagsStr.split(',') : [];\n    options.layerIds = layerIdsStr ? layerIdsStr.split(',') : [];\n    options.annotationId = elem.attr('data-annotation-id') || null;\n\n    return options;\n  }\n\n  /**\n   * Retrieves settings from the server via a REST API.\n   */\n  fetchSettingsFromApi(baseUrl, roomId) {\n    const url = baseUrl + '?room_id=' + roomId;\n    this.logger.debug('ConfigFetcher#fetchSettingsFromApi url:', url);\n\n    return new Promise(function(resolve, reject) {\n      const dfd = jQuery.Deferred();\n      jQuery.ajax({\n        url: url,\n        success: function(data) {\n          resolve(data);\n        },\n        error: function() {\n          reject('Failed to fetch server settings from ' + url);\n        }\n      });\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/config/config-fetcher.js","export default {\n  en: {\n    nextCanvas: 'Next Canvas',\n    previousCanvas: 'Previous Canvas',\n    showBottomPanel: \"Show Canvas List\",\n    hideBottomPanel: \"Hide Canvas List\"\n  },\n  ko: {\n    nextCanvas: '다음 캔버스',\n    previousCanvas: '이전 캔버스',\n    showBottomPanel: \"캔버스 리스트\",\n    hideBottomPanel: \"캔버스 리스트 감추기\"\n  }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/config/locales-default.js","import defaultSettings from './locales-default';\n\nexport default class Locales {\n  getLocalesConfig(options) {\n    const settings = defaultSettings;\n    const overrides = options.ui.i18nOverrides;\n    if (typeof overrides === 'object') {\n      for (let [lang, data] of Object.entries(overrides)) {\n        if (!settings[lang]) {\n          settings[lang] = {};\n        }\n        for (let [key, value] of Object.entries(data)) {\n          settings[lang][key] = value;\n        }\n      }\n    }\n    return settings;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/config/locales.js","import AnnotationSource from '../annotation-data/annotation-source';\nimport AnnotationSourceFb from '../annotation-data/annotation-source-fb';\nimport getLogger from '../util/logger';\nimport getStateStore from '../state-store';\nimport Locales from '../config/locales';\n\nconst logger = getLogger();\n\nexport default class MiradorConfigBuilder {\n  constructor(options) {\n    logger.debug('MiradorConfigBuilder#constructor options:', options);\n    this._options = options;\n    this._state = getStateStore();\n\n    const window = this._state.getSetting('initialLayout', 'windows')[0];\n    this._manifestUri = window.manifest;\n    this._canvasId = window.canvas;\n  }\n\n  buildConfig() {\n    const config = jQuery.extend(true, {}, this._options.defaultSettings);\n    const tocSpec = this._state.getSetting('annotations', 'tocSpec');\n\n    jQuery.extend(config, {\n      id: this._options.miradorId,\n      buildPath: this._options.mirador.buildPath || '/',\n      i18nPath: '/locales/',\n      imagesPath: '/images/',\n      logosPath: '/images/logos/',\n      mainMenuSettings: { show: false },\n      data: [{ manifestUri: this._manifestUri }],\n      windowObjects: [this.windowObject()],\n      autoHideControls: false, // autoHide is bad for touch-only devices\n      annotationEndpoint: this.endPointConfig(),\n      annotationBodyEditor: {\n        module: 'AnnotationEditor',\n        options: {\n          miradorDriven: true,\n          mode: 'create'\n        }\n      },\n      i18nAdditions: new Locales().getLocalesConfig(this._options)\n    });\n\n    const windowSettings = config.windowSettings;\n\n    windowSettings.displayLayout = false;\n\n    if (tocSpec) {\n      windowSettings.sidePanelOptions.annotationTocTabAvailable = true;\n      windowSettings.sidePanelOptions.tocTabAvailable = false;\n    }\n\n    if (!this._state.getSetting('auth', 'isEditor')) {\n      windowSettings.canvasControls.annotations.annotationCreation = false;\n    }\n\n    if (this._state.getSetting('mirador', 'annotationsOverlay', 'showByDefault')) {\n      windowSettings.canvasControls.annotations.annotationState = 'on';\n    }\n\n    const hoverColor = this._state.getSetting('mirador', 'annotationsOverlay','hoverColor');\n    const hoverWidthFactor = this._state.getSetting('mirador', 'annotationsOverlay','hoverWidthFactor');\n\n    if (hoverColor) {\n      config.drawingToolsSettings.hoverColor = hoverColor;\n    }\n    if (hoverWidthFactor) {\n      config.drawingToolsSettings.hoverWidthFactor = hoverWidthFactor;\n    }\n\n    logger.debug('MiradorConfigBuilder#buildConfig config:', config);\n    return config;\n  }\n\n  windowObject() {\n    const windowObject = {\n      loadedManifest: this._manifestUri,\n      bottomPanelVisible: false\n    };\n    if (this._canvasId) { // if instructed to load a specific canvas\n      windowObject.canvasID = this._canvasId;\n    }\n    return windowObject;\n  }\n\n  endPointConfig() {\n    return {\n      name: 'Yale Annotations',\n      module: 'YaleEndpoint',\n      dataSource: AnnotationSource,\n      options: { prefix: this._options.endpointUrl }\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/config/mirador-config-builder.js","import getLogger from '../util/logger';\nimport getStateStore from '../state-store';\n\nconst logger = getLogger();\n\nexport default class AnnotationTableOfContents {\n  constructor(options) {\n    this.options = Object.assign({\n      element: null,\n      appendTo: null,\n      windowId: null,\n      structures: [],\n      manifestVersion: null,\n      previousSelectedElements: [],\n      selectedElements: [],\n      previousOpenElements: [],\n      openElements: [],\n      hoveredElement: [],\n      selectContext: null,\n      tocData: {},\n      active: null,\n      eventEmitter: null\n    }, options);\n\n    this.init();\n  }\n\n  init () {\n    const _this = this;\n    const tocSpec = getStateStore().getSetting('annotations', 'tocSpec');\n\n    if (!tocSpec) {\n      this.element = jQuery(emptyTemplate()).appendTo(this.options.appendTo);\n    } else {\n      this.element = jQuery(template()).appendTo(this.options.appendTo);\n      const topGen = tocSpec.generator[0];\n\n      for (let i = 0; i < topGen.max; ++i) {\n        let itemElem = this._createItem(i, tocSpec);\n        this.element.append(itemElem);\n      }\n    }\n\n    this._selectedElem = null;\n    this.element.data('AnnotationTableOfContent', this);\n\n    this.element.mousemove(function(event) {\n      // To prevent mousemove handler for the annotation overlay from being called\n      // -- it must be a bug on the imageview's or annotation layer's side.\n      event.stopPropagation();\n    });\n\n    this.element.mouseenter(function(event) {\n      _this._unselect();\n    })\n  }\n\n  scrollToTags(tags) {\n    logger.debug('AnnotationTableOfContents#scrollToTags tags:', tags);\n    const klass = '.' + tags[0];\n    const targetElem = this.element.find(klass);\n\n    this._select(targetElem);\n    this.element.scrollTo(targetElem, 500);\n  }\n\n  _select(elem) {\n    this._unselect();\n    this._selectedElem = elem;\n    elem.addClass('selected');\n  }\n\n  _unselect() {\n    if (this._selectedElem) {\n      this._selectedElem.removeClass('selected');\n    }\n  }\n\n  _createItem(index, tocSpec) {\n    const _this = this;\n    const spec = tocSpec.generator[0];\n    const tag = spec.tag.prefix + (index + 1);\n    const item = jQuery(itemTemplate({\n      tag: tag,\n      content: spec.descriptions[index]\n    }));\n\n    const canvasIds = tocSpec.canvasMap[tag];\n\n    item.click(function(event) {\n      const imageWindowId = _this.options.windowId;\n      _this._savedScrollTop = _this.element.scrollTop();\n      event.preventDefault();\n      jQuery(this).focus();\n      jQuery.publish('YM_ANNOTATION_TOC_TAGS_SELECTED', [imageWindowId, canvasIds[0], [tag]]);\n      setTimeout(() => {\n        // In case reload of the image view messes with the scroll of the side panel\n        _this.element.scrollTo(_this._savedScrollTop);\n      }, 0);\n    });\n    return item;\n  }\n}\n\nconst template = Handlebars.compile([\n  '<div class=\"ym-annotation-toc\">',\n  '<h1>Table of Contents</h1>',\n  '</div>'\n].join(''));\n\nconst emptyTemplate = Handlebars.compile([\n  '<div class=\"ym-annotation-toc\">',\n  'Table of contents is empty',\n  '</div>',\n].join(''));\n\nconst itemTemplate = Handlebars.compile([\n  '<div class=\"ym-annotation-toc-item {{tag}}\" tabindex=\"-1\">',\n  '<a href=\"#\">{{{content}}}</a>',\n  '</div>'\n].join(''));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/annotation-table-of-contents.js","import getLogger from '../util/logger';\n\n/**\n * Overrides the same-named file in Mirador core to prevent\n * Bootstrap or Bootbox code being called, which collides with Semantic UI.\n */\n \n(function ($) {\n\n  var template = Handlebars.compile([\n    '<div class=\"header\"></div>',\n    '<div class=\"content\">',\n    '  <div class=\"description\">',\n    '    <p>{{message}}</p>',\n    '  </div>',\n    '</div>',\n    '<div class=\"actions\">',\n    '  <div class=\"ui ok button\">{{yesLabel}}</div>',\n    '  <div class=\"ui cancel button\">{{noLabel}}</div>',\n    '</div>'\n  ].join(''));\n    \n  $.DialogBuilder = function (container) {\n    this.logger = getLogger();\n    var id = 'ym_dialog';\n    var elem = jQuery('#' + id);\n    if (elem.length === 0) {\n      elem = jQuery('<div/>')\n        .attr('id', id)\n        .addClass('ui modal ym_modal')\n        .appendTo(jQuery('body'));\n    }\n    this.elem = elem;\n  };\n\n  $.DialogBuilder.prototype = {\n    \n    confirm: function (message, callback) {\n      var result = window.confirm(message);\n      callback(result);\n    },\n    \n    dialog: function(opts){\n      this.logger.debug('DialogBuilder#dialog opts:', opts);\n      var yes = opts.buttons.yes;\n      var no = opts.buttons.no;\n      \n      this.elem.html(template({ \n        message: opts.message,\n        yesLabel: yes.label,\n        noLabel: no.label\n      }));\n      this.elem.modal({\n        onApprove: function(elem) {\n          if (typeof yes.callback === 'function') {\n            yes.callback();\n          }\n        },\n        onDeny: function(elem) {\n          if (typeof no.callback === 'function') {\n            no.callback();\n          }\n        }\n      });\n      this.elem.modal('show');\n    }\n  };\n\n})(Mirador);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/dialog-builder.js","import {Anno} from '../import';\nimport getLogger from '../util/logger';\nimport getStateStore from '../state-store';\nimport util from '../util/util';\n\n(function($) {\n\n  $.yaleExt = $.yaleExt || {};\n\n  const logger = getLogger();\n\n  jQuery.extend($.yaleExt, {\n\n    // Get bounds of multiple paper.js shapes.\n    getCombinedBounds: function(shapes) {\n      logger.debug('yaleExt.getCombinedBounds shapes:', shapes);\n      var bounds = null;\n      jQuery.each(shapes, function (index, shape) {\n        if (bounds) {\n          bounds = bounds.unite(shape.strokeBounds);\n        } else {\n          bounds = shape.strokeBounds;\n        }\n        logger.debug('index: ' + index + ', bounds: ' + bounds);\n      });\n      return bounds;\n    },\n\n    updateTooltipStyles: function() {\n      const elem = jQuery('.qtip-default, .qtip-content');\n      const styles = getStateStore().getSetting('mirador', 'tooltipStyles');\n      if (styles) {\n        elem.css('color', styles.color);\n        elem.css('background-color', styles.backgroundColor);\n        elem.css('border', styles.border);\n      }\n    },\n\n    truncate: function(html, maxLen) {\n      let text = html.replace(/<(?:.|\\n)*?>/gm, '');\n      text = text.replace(/&.*?;/gm, '');\n      if (text.length > maxLen) {\n        return text.slice(0, maxLen-3) + '...';\n      } else {\n        return text;\n      }\n    }\n  });\n\n})(Mirador);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/ext-global.js","import getLogger from '../util/logger';\n\n(function($) {\n  const logger = getLogger();\n\n  $.Hud.prototype.qtipExtra = function(jsonLd) {\n\n    this.element.find('.mirador-osd-previous').each(function() {\n      jQuery(this).qtip({\n        content: {\n          text: jQuery(this).attr('title'),\n        },\n        position: {\n          my: 'bottom left',\n          at: 'top left'\n        },\n        style: {\n          classes: 'qtip-dark qtip-shadow qtip-rounded',\n          tip: false\n        }\n      });\n    });\n    this.element.find('.mirador-osd-next').each(function() {\n      jQuery(this).qtip({\n        content: {\n          text: jQuery(this).attr('title'),\n        },\n        position: {\n          my: 'bottom right',\n          at: 'top right'\n        },\n        style: {\n          classes: 'qtip-dark qtip-shadow qtip-rounded',\n          tip: false\n        }\n      });\n    });\n  };\n\n  $.Hud.prototype.toggleBottomPanelQtip = function(bottomPanelVisible) {\n    const title = bottomPanelVisible ?\n      i18next.t('hideBottomPanel') : i18next.t('showBottomPanel');\n    const elem = this.element.find('.mirador-osd-toggle-bottom-panel');\n\n    if (!this._bottomPanelQtipInitialized) {\n      elem.each(function() {\n        jQuery(this).qtip({\n          content: {\n            text: title\n          },\n          position: {\n            my: 'bottom center',\n            at: 'top center',\n            adjust: {\n              method: 'shift',\n              y: 10\n            }\n          },\n          style: {\n            classes: 'qtip-dark qtip-shadow qtip-rounded'\n          }\n        });\n      });\n      this._bottomPanelQtipInitialized = true;\n    } else {\n      elem.qtip('option', 'content.text', title);\n    }\n  };\n\n})(Mirador);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/ext-hud.js","import {Anno, annoUtil} from '../import';\nimport getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\n\n(function($) {\n\n  $.yaleExt = $.yaleExt || {};\n\n  const logger = getLogger();\n\n  $.ImageView.prototype.enableAnnotationLayer = function() {\n    this.annotationState = 'on';\n  };\n\n  $.ImageView.prototype.zoomToAnnotation = function(annotation) {\n    logger.debug('ImageView(ext)#zoomToAnnotation annotation:', annotation);\n    let currentZoom, shapes, shapeBounds, zoomFactor;\n\n    try {\n      const viewport = this.osd.viewport;\n      currentZoom = viewport.getZoom();\n      shapes = this.annotationsLayer.drawTool.getShapesForAnnotation(annotation);\n      shapeBounds = $.yaleExt.getCombinedBounds(shapes); // in image coordinates\n      const shapeWH = viewport.imageToViewportCoordinates(shapeBounds.width, shapeBounds.height);\n      const viewportBounds = viewport.getBounds();\n      const widthRatio = shapeWH.x / viewportBounds.width;\n      const heightRatio = shapeWH.y / viewportBounds.height;\n      zoomFactor = 1.0 / Math.max(widthRatio, heightRatio) * 0.75;\n\n      if (typeof zoomFactor === 'number' && !isNaN(zoomFactor)) {\n        viewport.zoomBy(zoomFactor);\n      } else {\n        const msg = 'ImageView(ext)#zoomToAnnotation invalid zoomFactor ' + zoomFactor;\n        logger.error(msg, annotation);\n        throw msg;\n      }\n    } catch (e) {\n      logger.error('ImageView(ext)#zoomToAnnotation failed for annotation', annotation, '-', e);\n      logger.error('oldZoom:', currentZoom, 'shapes:', shapes, 'shapeBounds:', shapeBounds, 'zoomFactor:', zoomFactor);\n    }\n  };\n\n  /*\n    * Highlight the boundaries for the currently chosen annotation\n    * and pan to show the annotated area.\n    */\n  $.ImageView.prototype.panToAnnotation = function(annotation) {\n    logger.debug('ImageView(ext)#panToAnnotation anno:', annotation);\n    var viewport = this.osd.viewport;\n    var shapes = this.annotationsLayer.drawTool.getShapesForAnnotation(annotation);\n    var shapeBounds = $.yaleExt.getCombinedBounds(shapes); // in image coordinates\n    var x = shapeBounds.x + shapeBounds.width / 2;\n    var y = shapeBounds.y + shapeBounds.height / 2;\n    var p = new OpenSeadragon.Point(x, y);\n\n    var shapeXY = viewport.imageToViewportCoordinates(shapeBounds.x, shapeBounds.y);\n    var shapeWH = viewport.imageToViewportCoordinates(shapeBounds.width, shapeBounds.height);\n    var shapeLeft = shapeXY.x;\n    var shapeRight = shapeXY.x + shapeWH.x;\n    var shapeTop = shapeXY.y;\n    var shapeBottom = shapeXY.y + shapeWH.y;\n\n    var viewportBounds = viewport.getBounds();\n    var viewportHeight = viewport.getHomeBounds().height;\n\n    var visibleLeft = viewportBounds.x;\n    var visibleRight = viewportBounds.x + viewportBounds.width;\n    var visibleTop = viewportBounds.y;\n    var visibleBottom = viewportBounds.y + viewportBounds.height;\n\n    var padding = 0.08 / viewport.getZoom();\n    var panX = 0;\n    var panY = 0;\n\n    if (shapeRight + padding > visibleRight) { // right side hidden\n      if (shapeLeft - padding < visibleLeft) { // right hidden, left hidden\n        panX = shapeLeft - padding - visibleLeft;\n      } else { // right hidden, left not hidden\n        panX  = shapeRight + padding - visibleRight;\n        if (shapeLeft - panX - padding < visibleLeft) { // left hidden if panned\n          panX -= visibleLeft - (shapeLeft - panX - padding);\n        }\n      }\n    } else if (shapeLeft - padding < visibleLeft) { // left hidden, right not hidden\n      panX = shapeLeft - padding - visibleLeft;\n    }\n\n    if (shapeBottom + padding > visibleBottom) { // bottom side hidden\n      if (shapeTop - padding < visibleTop) { // bottom hidden, top hidden\n        panY = shapeTop - padding - visibleTop;\n      } else { // right hidden, left not hidden\n        panY  = shapeBottom + padding - visibleBottom;\n        if (shapeTop - panY - padding < visibleTop) { // top hidden if panned\n          panY -= visibleTop - (shapeTop - panY - padding);\n        }\n      }\n    } else if (shapeTop - padding < visibleTop) { // top hidden, bottom not hidden\n      panY = shapeTop - padding - visibleTop;\n    }\n\n    if (typeof panX === 'number' && !isNaN(panX) && typeof panY === 'number' && !isNaN(panY)) {\n      viewport.panBy(new OpenSeadragon.Point(panX, panY));\n    } else {\n      const msg = 'ImageView(ext)#panToAnnotation invalid value(s) panX: ' + panX + ', panY: ' + panY;\n      logger.error(msg, annotation);\n      throw msg;\n    }\n  };\n\n  const _listenForActions = $.ImageView.prototype.listenForActions;\n\n  $.ImageView.prototype.listenForActions = function() {\n    _listenForActions.call(this);\n\n    this.eventEmitter.subscribe('ANNOTATIONS_LIST_UPDATED', event => {\n      logger.debug('ImageView(ext):SUB:ANNOTATIONS_LIST_UPDATED window:', this.windowId, 'annotationToBeFocused:', this._annotationToBeFocused);\n\n      if (this._annotationToBeFocused) {\n        // setTimeout in order to give the OsdRegionDrawTool time to create\n        // annotation shapes in the overlay after window.getAnnotations() is done\n        setTimeout(() => {\n          const imageWindowProxy = getMiradorProxyManager().getWindowProxyById(this.windowId);\n          let anno = this._annotationToBeFocused;\n\n          if (!annoUtil.hasTargetOnCanvas(anno)) {\n            const annoMap = {};\n            for (let anno of imageWindowProxy.getAnnotationsList()) {\n              annoMap[anno['@id']] = anno;\n            }\n            anno = annoUtil.findTransitiveTargetAnnotations(anno, annoMap)\n            .filter(anno => {\n              for (let target of Anno(anno).targets) {\n                if (target.full === imageWindowProxy.getCurrentCanvasId()) {\n                  return true;\n                }\n              }\n              return false;\n            })[0];\n          }\n          this._annotationToBeFocused = null;\n          if (anno) {\n            this.zoomToAnnotation(anno);\n            this.panToAnnotation(anno);\n            this.annotationsLayer.drawTool.updateHighlights(anno);\n          } else {\n            logger.error('ImageWindow(ext):SUB:ANNOTATIONS_LIST_UPDATED annotation not found');\n          }\n        }, 500);\n      }\n    });\n\n    this.eventEmitter.subscribe('YM_DISPLAY_ON', event => {\n      logger.debug('ExtImageView:SUB:YM_DISPLAY_ON');\n      if (this.hud.annoState.current === 'off') {\n        this.hud.annoState.displayOn(this.element.find('.mirador-osd-annotations-layer'));\n      }\n    });\n  };\n\n})(Mirador);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/ext-image-view.js","import getLogger from '../util/logger';\nimport getStateStore from '../state-store';\n\n(function($) {\n  const logger = getLogger();\n  let copyrightedImageServiceUrl = '';\n  let width = 1, height = 1;\n\n  $.Manifest.prototype.processCopyright = function(jsonLd) {\n    logger.debug('Manifest#processCopyright jsonLd in:', jsonLd);\n\n    if (getStateStore().getSetting('auth', 'images', 'copyrighted')) {\n      copyrightedImageServiceUrl = getStateStore().getSetting('auth', 'images', 'altImageService');\n\n      [width, height] = getReplacementDimensions(jsonLd);\n      const sequences = jsonLd.sequences;\n      for (let sequence of sequences) {\n        processSequence(sequence);\n      }\n    }\n    logger.debug('Manifest#processCopyright jsonLd out:', jsonLd);\n    return jsonLd;\n  };\n\n  function getReplacementDimensions(manifest) {\n    let maxWidth = 0, maxHeight = 0;\n\n    for (let sequence of manifest.sequences) {\n      for (let canvas of sequence.canvases) {\n        if (canvas.width > maxWidth) {\n          maxWidth = canvas.width;\n        }\n        if (canvas.height > maxHeight) {\n          maxHeight = canvas.height;\n        }\n      }\n    }\n    // Since the image is 2048x2048, conversion to bigger than 4096x4096 is\n    // not supported by the Loris server\n    let side = Math.min(Math.max(maxWidth, maxHeight), 4096);\n    return [side, side];\n  }\n\n  function processSequence(sequence) {\n    const canvases = sequence.canvases;\n    for (let canvas of canvases) {\n      processCanvas(canvas);\n    }\n  }\n\n  function processCanvas(canvas) {\n    const images = canvas.images;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    for (let image of images) {\n      processImage(image);\n    }\n  }\n\n  function processImage(image) {\n    const resource = image.resource;\n    resource['@id'] = copyrightedImageServiceUrl + '/full/' + width + ',' + height + '/0/default.jpg';\n    resource.service['@id'] = copyrightedImageServiceUrl;\n    resource.width = String(width);\n    resource.height = String(height);\n  }\n\n})(Mirador);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/ext-manifest.js","import getLogger from '../util/logger';\nimport getStateStore from '../state-store';\n\n(function($) {\n  const logger = getLogger();\n\n  /*\n    * Get paper.js shapes which are associated with the annotation.\n    */\n  $.OsdRegionDrawTool.prototype.getShapesForAnnotation = function(annotation) {\n    logger.debug('OsdRegionDrawTool(ext)#getShapesForAnnotation this.annotationsToShapesMap:', this.annotationsToShapesMap);\n    var out_shapes = [];\n    jQuery.each(this.annotationsToShapesMap, function(key, shapes) {\n      if (key === annotation['@id']) {\n        jQuery.each(shapes, function (index, shape) {\n          out_shapes.push(shape);\n        });\n      }\n    });\n    return out_shapes;\n  };\n\n  $.OsdRegionDrawTool.prototype.saveStrokeColor = function(shape) {\n    if (!shape.data._ym_defaultStrokeColor) {\n      shape.data._ym_defaultStrokeColor = shape.strokeColor;\n    }\n  };\n\n  $.OsdRegionDrawTool.prototype.saveStrokeWidth = function(shape) {\n    if (!shape.data._ym_defaultStrokeWidth) {\n      shape.data._ym_defaultStrokeWidth = shape.data.strokeWidth;\n    }\n  };\n\n  $.OsdRegionDrawTool.prototype.getDefaultStrokeWidth = function(shape) {\n    if (typeof shape.data._ym_defaultStrokeWidth === 'number') {\n      return shape.data._ym_defaultStrokeWidth;\n    } else {\n      return shape.data.strokeWidth;\n    }\n  };\n\n  /*\n    * Highlight annotated area for annotation focused in annotation window.\n    */\n  $.OsdRegionDrawTool.prototype.updateHighlights = function(annotation) {\n\n    const _this = this;\n    jQuery.each(this.annotationsToShapesMap, function(key, shapes) {\n      jQuery.each(shapes, function (index, shape) {\n        if (shape.data.annotation['@id'] === annotation['@id']) {\n          _this.highlightShape(shape);\n          shape.bringToFront();\n        } else {\n          _this.deHighlightShape(shape);\n          shape.sendToBack();\n        }\n      });\n    });\n    this.osdViewer.forceRedraw();\n  };\n\n  $.OsdRegionDrawTool.prototype.updateShapesVisibility = function(annotations) {\n    for(let shapes of Object.values(this.annotationsToShapesMap)) {\n      for (let shape of shapes) {\n        for (let annotation of annotations) {\n          if (shape.data.annotation['@id'] === annotation['@id']) {\n            //this.highlightShape(shape);\n            shape.bringToFront();\n            shape.opacity = 1;\n          } else {\n            //this.deHighlightShape(shape);\n            shape.sendToBack();\n            const hide = getStateStore().getSetting('mirador', 'annotationsOverlay', 'hideUnfocused');\n            if (hide) {\n              shape.opacity = 0;\n            } else {\n              shape.opacity = 1;\n            }\n          }\n        }\n      }\n    }\n  };\n\n  $.OsdRegionDrawTool.prototype.highlightShape = function(shape) {\n    logger.debug('highlightShape', shape);\n    this.saveStrokeColor(shape);\n    this.saveStrokeWidth(shape);\n\n    const state = getStateStore();\n    const hoverColor = state.getSetting('mirador', 'annotationsOverlay','hoverColor');\n    const hoverWidthFactor = state.getSetting('mirador', 'annotationsOverlay','hoverWidthFactor');\n\n    if (hoverColor) {\n      shape.strokeColor = setting.hoverColor;\n    }\n    if (hoverWidthFactor) {\n      const defaultWidth = shape.data._ym_defaultStrokeWidth;\n      shape.data.strokeWidth = setting.hoverWidthFactor *\n        (typeof defaultWidth === 'number' ? defaultWidth : shape.data.strokeWidth);\n    }\n    shape.set({ opacity: 1 });\n  },\n\n  $.OsdRegionDrawTool.prototype.deHighlightShape = function(shape) {\n    //logger.debug('deHighlightShape', shape);\n\n    if (shape.data._ym_defaultStrokeColor) {\n      shape.strokeColor = shape.data._ym_defaultStrokeColor;\n    }\n\n    if (shape._ym_defaultStrokeWidth) {\n      shape.data.strokeWidth = shape._ym_defaultStrokeWidth;\n    }\n\n    const hide = getStateStore().getSetting('mirador', 'annotationsOverlay', 'hideUnfocused');\n\n    if (hide) {\n      shape.opacity = 0;\n    } else {\n      shape.opacity = 1;\n    }\n  };\n\n})(Mirador);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/ext-osd-region-draw-tool.js","import AnnotationEditor from '../widgets/annotation-editor';\nimport AnnotationTableOfContents from './annotation-table-of-contents';\nimport {YaleEndpoint} from '../annotation-data/yale-endpoint';\n\nimport './dialog-builder';\nimport './ext-global';\nimport './ext-hud';\nimport './ext-image-view';\nimport './ext-manifest';\nimport './ext-osd-region-draw-tool';\n\n/**\n * Make global names available to Mirador.\n */\n(function($) {\n\n  $.AnnotationEditor = AnnotationEditor;\n  $.AnnotationTableOfContents = AnnotationTableOfContents;\n  $.YaleEndpoint = YaleEndpoint;\n\n})(Mirador);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/extension/main.js","import getApp from '../app';\nimport getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\nimport getModalAlert from '../widgets/modal-alert'\nimport getStateStore from '../state-store';\nimport AnnotationWindow from '../widgets/annotation-window/annotation-window';\n\nconst logger = getLogger();\n\nexport default class {\n  constructor(rootElementId) {\n    this.init(rootElementId);\n  }\n\n  init(rootElementId) {\n    logger.debug('Grid#init');\n    this.element = jQuery('#' + rootElementId);\n    this._state = getStateStore();\n    this.miradorProxyManager = getMiradorProxyManager();\n    this._annotationExplorer = getApp().getAnnotationExplorer();\n    this._annotationWindows = {};\n\n    this.initLayout();\n    this.bindEvents();\n  }\n\n  // GoldenLayout\n  initLayout() {\n    logger.debug('Grid#initLayout');\n    const config = {\n      settings: {\n        hasHeaders: true,\n        showPopoutIcon: false,\n        selectionEnabled: false\n      },\n      dimensions: {\n        minItemWidth: 200,\n        minItemHeight: 200\n      },\n      content: [{\n        type: 'row',\n        isClosable: false,\n        content: [/*{\n          type: 'component',\n          componentName: 'Mirador',\n          componentState: { label: 'Mirador' },\n          isClosable: false\n        }*/]\n      }]\n    };\n\n    this._layout = new GoldenLayout(config, this.element);\n\n    this._layout.registerComponent('Mirador', (container, componentState) => {\n      logger.debug('Registering component container:', container, 'componentState:', componentState);\n      const miradorElem = jQuery('<div/>').attr('id', componentState.miradorId)\n      container.getElement().append(miradorElem);\n    });\n\n    this._layout.registerComponent('Annotations', (container, componentState) => {\n      const id = componentState.windowId;\n      const annotationWindowElem = jQuery('<div/>').attr('id', id)[0];\n      container.getElement().html(annotationWindowElem.outerHTML);\n    });\n\n    this._layout.on('stateChanged', e => {\n      logger.debug('GoldenLayout stateChanged event:', e);\n      for (let miradorProxy of this.miradorProxyManager.getMiradorProxies()) {\n        miradorProxy.publish('resizeMirador');\n      }\n      return true;\n    });\n\n    this._layout.on('itemDestroyed', item => {\n      logger.debug('GoldenLayout itemDestroyed item:', item);\n      if (item.componentName == 'Annotations') {\n        const windowId = item.config.componentState.windowId;\n        logger.debug('Annotation window destroyed:', windowId);\n        this._annotationWindows[windowId].destroy();\n        delete this._annotationWindows[windowId];\n        this._resizeWindows();\n      }\n    });\n\n    this._layout.init();\n  }\n\n  resize() {\n    logger.debug('Grid#resize');\n    this.element.css('bottom', 0);\n    this._layout.updateSize();\n  }\n\n  addMiradorWindow(miradorId) {\n    logger.debug('Grid#addMiradorWindow miradorId:', miradorId);\n    const itemConfig = {\n      type: 'component',\n      componentName: 'Mirador',\n      componentState: { miradorId: miradorId },\n      isClosable: false\n    };\n    this._layout.root.contentItems[0].addChild(itemConfig);\n  }\n\n  addAnnotationWindows(config) {\n    logger.debug('Grid#addAnnotationWindows config:', config);\n    for (let windowConfig of config.windows) {\n      this.addAnnotationWindow(windowConfig);\n    }\n  }\n\n  async addAnnotationWindow(options) {\n    logger.debug('Grid#addAnnotationWindow options:', options);\n    await getModalAlert().show('Opening an annotation window...');\n\n    const windowId = Mirador.genUUID(); // annotation window ID\n    const imageWindowId = options.imageWindowId || null;\n    const itemConfig = {\n      id: windowId,\n      type: 'component',\n      componentName: 'Annotations',\n      componentState: { windowId: windowId }\n    };\n\n    this._layout.root.contentItems[0].addChild(itemConfig);\n\n    const annoExplorer = getApp().getAnnotationExplorer();\n\n    // Just taking the first (highest-level) tag, for now\n    const annoWin = new AnnotationWindow({\n      id: windowId,\n      appendTo: jQuery('#' + windowId),\n      explorer: annoExplorer,\n      miradorId: options.miradorId || null,\n      canvasWindowId: imageWindowId,\n      initialLayerId: options.layerId || this._pickLayer(),\n      initialTocTags: options.tocTags || [],\n      annotationId: options.annotationId || null,\n      appState:this._state\n    });\n\n    await annoWin.init().catch(reason => {\n      logger.error('Grid#addAnnotationWindow annoWin.init failed:', reason);\n    });\n\n    this._annotationWindows[windowId] = annoWin;\n    this._resizeWindows();\n\n    getModalAlert().hide();\n    return annoWin;\n  }\n\n  getAnnotationWindows() {\n    return this._annotationWindows;\n  }\n\n  getAnnotationWindowByLayer(layerId) {\n    logger.debug('Grid#getAnnotationWindowByLayer layerId:', layerId, 'windows:', this._annotationWindows);\n    for (let annoWindow of Object.values(this._annotationWindows)) {\n      if (annoWindow.getCurrentLayerId() === layerId) {\n        return annoWindow;\n      }\n    }\n    return null;\n  }\n\n  bindEvents() {\n    logger.debug('Grid#bindEvents');\n\n    jQuery.subscribe('YM_ADD_WINDOW', (event, options) => {\n      this.addAnnotationWindow(options || {});\n    });\n\n    jQuery.subscribe('YM_ADD_WINDOWS', (event, config) => {\n      logger.debug('Received YM_ADD_WINDOWS config:', config);\n      this.addAnnotationWindows(config);\n    });\n  }\n\n  _resizeWindows() {\n    const windowIds = Object.keys(this._annotationWindows);\n    const numAnnoWindows = windowIds.length;\n    let width = 0;\n\n    switch (numAnnoWindows) {\n      case 1: width = 20; break;\n      case 2: width = 25; break;\n      default: width = 100 / (numAnnoWindows + 1);\n    }\n\n    for (let windowId of windowIds) {\n      this._setWidth(windowId, width);\n    }\n  }\n\n  _setWidth(itemId, percentWidth) {\n    logger.debug('Grid#_setWidth itemId:', itemId, 'width:', percentWidth);\n    this._layout.root.getItemsById(itemId)[0].parent.config.width = percentWidth;\n    this._layout.updateSize();\n  }\n\n  _pickLayer() {\n    const allLayers = getStateStore().getTransient('annotationLayers');\n    for (let candidateLayer of allLayers) {\n      let candidateLayerId = candidateLayer['@id'];\n      let useThisLayer = true;\n\n      for (let annoWin of Object.values(this._annotationWindows)) {\n        let usedLayerId = annoWin.getCurrentLayerId();\n        if (candidateLayerId === usedLayerId) {\n          useThisLayer = false;\n          break;\n        }\n      }\n      if (useThisLayer) {\n        return candidateLayerId;\n      }\n    }\n    return allLayers[0]['@id']; // return the first if every layer is already in use\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/layout/grid.js","import getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\n\nconst logger = getLogger();\nconst proxyMgr = getMiradorProxyManager();\n\nexport default class LayoutConfigParser {\n  constructor(options) {\n    this.options = Object.assign({\n      imageWindowId: null,\n      layerIds: [],\n      toc: null, // annotation TOC\n      tocTags: []\n    }, options);\n  }\n\n  /**\n   * All windows created are derived from a single Mirador image window\n   * identified by this.options.imageWindowId\n   */\n  getWindowsConfig() {\n    const annoId = this.options.annotationId;\n    let layerIds = this.options.layerIds;\n    let tocTags = this.options.tocTags;\n\n    // If annotation ID is provided, everything else (layers, TOC)\n    // gets derived from that annotation (provided values are ignored).\n    if (annoId) {\n      const annotation = this._findAnnotation(annoId);\n      if (annotation) {\n        layerIds = [annotation.layerId];\n      } else {\n        logger.error('LayoutConfigParser#getWindowsConfig cannot find annotation', annoId);\n        return null;\n      }\n      if (this.options.toc) {\n        tocTags = this.options.toc.getTagsFromAnnotationId(annoId);\n        if (tocTags.length < 1) {\n          logger.error('LayoutConfigParser#getWindowsConfig no toc tags for annotation', annoId);\n        }\n      }\n    }\n\n    const config = {\n      windows: []\n    };\n\n    // Number of annotation windows is determined by number of layers\n    if (layerIds instanceof Array && layerIds.length > 0) {\n      for (let layerId of layerIds) {\n        config.windows.push({\n          type: 'ANNOTATION_WINDOW',\n          miradorId: this.options.miradorId,\n          imageWindowId: this.options.imageWindowId,\n          layerId: layerId || null,\n          annotationId: annoId || null,\n          tocTags: tocTags || []\n        });\n      }\n    }\n\n    return config.windows.length > 0 ? config : null;\n  }\n\n  _findAnnotation(annotationId) {\n    const windowProxy = proxyMgr.getWindowProxyById(this.options.imageWindowId);\n    const annotations = windowProxy.getAnnotationsList();\n    const candidates = annotations.filter(anno =>\n        (anno['@id'] === annotationId));\n    return candidates.length > 0 ? candidates[0] : null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/layout/layout-config-parser.js","import getLogger from '../util/logger';\nimport WorkspaceProxy from './workspace-proxy';\nimport WindowProxy from './window-proxy';\n\nconst logger = getLogger();\n\nexport default class MiradorProxy {\n  constructor(mirador, id) {\n    this._mirador = mirador;\n    this._workspaceProxy = null;\n    this._id = id;\n    this._ignoredEvents = new Set();\n  }\n\n  // Proxy ID. Mirador instance currently doesn't have an ID.\n  getId() {\n    return this._id;\n  }\n\n    // Lazy call because workspace is set up asynchronously.\n  getWorkspaceProxy() {\n    if (!this._workspaceProxy) {\n      this._workspaceProxy = new WorkspaceProxy(this._mirador.viewer.workspace);\n    }\n    return this._workspaceProxy;\n  }\n\n  getWindowProxies() {\n    return this.getWorkspaceProxy().getWindowProxies();\n  }\n\n  getWindowProxyById(windowId) {\n    return new WindowProxy(this.getWindowById(windowId));\n  }\n\n  getWindowById(windowId) {\n    //logger.debug('MiradorProxy#getWindowById windowId:', windowId);\n    return this.getWorkspaceProxy().getWindowById(windowId);\n  }\n\n  publish() {\n    const eventEmitter = this._mirador.eventEmitter;\n    let args = Array.from(arguments);\n    eventEmitter.publish.apply(eventEmitter, args);\n  }\n\n  subscribe(eventName, handler) {\n    //logger.debug('MiradorProxy#subscribe', eventName, handler);\n    this._mirador.eventEmitter.subscribe(eventName, handler);\n  }\n\n  unsubscribe(eventName, handler) {\n    //logger.debug('MiradorProxy#unsubscribe', eventName, handler);\n    this._mirador.eventEmitter.unsubscribe(eventName, handler);\n  }\n\n  shouldIgnoreEvent(eventName) {\n    return this._ignoredEvents.has(eventName);\n  }\n\n  markEventToBeIgnored(eventName) {\n    this._ignoredEvents.add(eventName);\n  }\n\n  unmarkEventToBeIgnored(eventName) {\n    this._ignoredEvents.delete(eventName);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/mirador-proxy/mirador-proxy.js","import getLogger from '../util/logger';\nimport WindowProxy from './window-proxy';\n\nexport default class WorkspaceProxy {\n\n  constructor(workspace) {\n    this.logger = getLogger();\n    this.workspace = workspace;\n  }\n\n  getWorkspace() {\n    return this.workspace;\n  }\n\n  getWindowProxies() {\n    return this.workspace.windows.map(window => new WindowProxy(window));\n  }\n\n  getWindowById(windowId) {\n    const _this = this;\n    const windows = this.workspace.windows.filter(window => {\n      //_this.logger.debug('WorkspaceProxy#getWindowById current window:', window);\n      return window.id === windowId;\n    });\n    var numWindows = windows.length;\n    if (numWindows > 1) {\n      this.logger.error('MiradorProxy#getWindowById: more than one (' + numWindows + ') found for id: ' + windowId);\n    }\n    return numWindows > 0 ? windows[0] : null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/mirador-proxy/workspace-proxy.js","import getApp from './app';\nimport getLogger from './util/logger';\nimport getModalAlert from './widgets/modal-alert';\nimport getMiradorProxyManager from './mirador-proxy/mirador-proxy-manager';\nimport MiradorConfigBuilder from './config/mirador-config-builder';\nimport {openAnnotationSelector} from './util/annotation-explorer';\nimport WindowProxy from './mirador-proxy/window-proxy';\n\nconst logger = getLogger();\nconst proxyMgr = getMiradorProxyManager();\n\n/**\n * Wrapper of a single Mirador instance\n */\nexport default class MiradorWrapper {\n  constructor(options) {\n    logger.debug('MiradorWrapper#constructor options:', options);\n    this.options = Object.assign({\n      grid: null,\n      miradorOptions: null\n    }, options);\n    this._miradorId = options.miradorOptions.miradorId;\n    this._miradorConfig = this._buildMiradorConfig(options.miradorOptions);\n    logger.debug('MiradorWrapper#constructor miradorConfig:', this._miradorConfig);\n    this._mirador = Mirador(this._miradorConfig);\n    this._miradorProxy = this._addToMiradorProxy(this._miradorId, this._mirador);\n    this._bindEvents(options.miradorOptions);\n  }\n\n  getMirador() {\n    return this._mirador;\n  }\n\n  getMiradorProxy() {\n    return this._miradorProxy;\n  }\n\n  getConfig() {\n    return this._miradorConfig;\n  }\n\n  /**\n   * Sets up configuration parameters to pass to Mirador.\n   */\n  _buildMiradorConfig(options) {\n    const builder = new MiradorConfigBuilder(options);\n    return builder.buildConfig();\n  }\n\n _addToMiradorProxy(miradorId, mirador) {\n    const miradorProxy = proxyMgr.addMirador(miradorId, mirador);\n\n    miradorProxy.subscribe('OPEN_ANNOTATION_SELECTOR',\n      (event, windowId, annotationEditor) =>\n    {\n      openAnnotationSelector(windowId).then((annotation) => {\n        annotationEditor.loadAnnotation(annotation);\n      });\n    });\n\n    return miradorProxy;\n  }\n\n  async zoomToTags(windowId, canvasId, tags) {\n    logger.debug('MiradorWrapper#zoomToTags windowId:', windowId, 'canvasId:', canvasId, 'tags:', tags);\n    const tocCache = getApp().getAnnotationTocCache();\n    const toc = await tocCache.getToc(canvasId);\n    const windowProxy = this._miradorProxy.getWindowProxyById(windowId);\n    const imageView = windowProxy.getImageView();\n    const tocNode = toc.getNodeFromTags(tags);\n    logger.debug('tocNode:', tocNode);\n    const annotation = tocNode.canvasAnnotations[0];\n\n    const zoomToAnnotation = function(event) {\n      imageView.zoomToAnnotation(annotation);\n      imageView.panToAnnotation(annotation);\n      const drawTool = windowProxy.getDrawTool();\n      drawTool.updateHighlights(annotation);\n    }\n\n    return new Promise((resolve, reject) => {\n      const handler = event => {\n        logger.debug('MiradorWrapper#zoomToTags:SUB:annotationsRendered');\n        zoomToAnnotation();\n        this._miradorProxy.unsubscribe('annotationsRendered.' + windowId, handler);\n        resolve();\n      }\n\n      if (canvasId === windowProxy.getCurrentCanvasId()) {\n        zoomToAnnotation();\n        resolve();\n      } else {\n        this._miradorProxy.subscribe('annotationsRendered.' + windowId, handler);\n        windowProxy.setCurrentCanvasId(canvasId); // will trigger 'annotationsRendered' eventually\n      }\n    });\n  }\n\n  _bindEvents(options) {\n    logger.debug('MiradorWrapper#_bindEvents options:', options);\n    const miradorProxy = proxyMgr.getMiradorProxy(this._miradorId);\n\n    miradorProxy.subscribe('YM_CLICKED_OPEN_ANNO_WINDOW', async (event, imageWindowId) => {\n      logger.debug('MiradorWrappe:SUB:YM_CLICKED_OPEN_ANNO_WINDOW imageWindowId:', imageWindowId);\n\n      await getModalAlert().show('Opening an annotation window...');\n      miradorProxy.publish('YM_DISPLAY_ON');\n      const annoWin = await this.options.grid.addAnnotationWindow({\n        miradorId: this._miradorId,\n        imageWindowId: imageWindowId\n      });\n      getModalAlert().hide();\n    });\n\n    jQuery.subscribe('ANNOWIN_ANNOTATION_FOCUSED', (event, params) => {\n      logger.debug('MiradorWrapper:SUB:ANNOWIN_ANNOTATION_FOCUSED, params:', params);\n      const miradorProxy = proxyMgr.getMiradorProxy(this._miradorId);\n      const windowProxy = miradorProxy.getWindowProxyById(params.imageWindowId);\n      const tocPanel = windowProxy.getSidePanelTabContentElement('ym-annotation-toc');\n      const annoTocMenu = tocPanel.data('AnnotationTableOfContent');\n\n      if (annoTocMenu) {\n        annoTocMenu.scrollToTags(params.annotation.tocTags);\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/mirador-wrapper.js","import {AnnotationExplorerDialog} from '../import';\nimport AnnotationSource from '../annotation-data/annotation-source';\nimport getApp from '../app';\nimport {AnnotationExplorer} from '../import';\nimport getLogger from '../util/logger';\nimport getMiradorProxyManager from '../mirador-proxy/mirador-proxy-manager';\n\nconst logger = getLogger();\n\nexport {openAnnotationSelector};\n\n/**\n  * @param {string} windowId ID of Mirador window from which this dialog is being created\n  */\nasync function openAnnotationSelector(windowId) {\n  const windowProxy = getMiradorProxyManager().getWindowProxyById(windowId);\n  const svgOverlay = windowProxy.getSvgOverlay();\n  svgOverlay.removeMouseTool();\n  const endpoint = windowProxy.getEndPoint();\n  const annoSource = getApp().getAnnotationSource();\n  const annotationExplorer = new AnnotationExplorer({\n    dataSource: annoSource\n  });\n  const layers = await annotationExplorer.getLayers();\n\n  return new Promise((resolve, reject) => {\n    const dialog = new AnnotationExplorerDialog({\n      appendTo: jQuery('body'),\n      annotationExplorer: annotationExplorer,\n      canvases: windowProxy.getCanvases(),\n      defaultCanvasId: windowProxy.getCurrentCanvasId(),\n      layers: layers,\n      onSelect: annotation => {\n        resolve(annotation);\n      },\n      logger: logger\n    });\n    dialog.open();\n  }).then(annotation => {\n    svgOverlay.setMouseTool();\n    return annotation;\n  }).catch(reason => {\n    svgOverlay.setMouseTool();\n    logger.error('openAnnotationExplorer returned with error', reason);\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util/annotation-explorer.js","/**\n * Replaces/overrides jquery-tiny-pubsub code to print traces.\n * Include this file for debugging only!\n */\n(function($) {\n\n  var debug = true;\n  var trace = false;\n\n  // Add strings or patterns to  array and\n  // event names\n  var excludePatterns = ['updateTooltips'];\n\n  var scaffoldMap = {};\n\n  var exclude = function(str) {\n    for (var i = 0; i < excludePatterns.length; ++i) {\n      if (str.match(excludePatterns[i])) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  var log = function() {\n    (trace ? console.trace : console.log).apply(console, arguments);\n  };\n\n  var logging = function(str) {\n    return debug && !exclude(str);\n  };\n\n  var scaffoldHandler = function(eventId, handler) {\n    var scaffold = function() {\n      log('PubSub:handler', eventId, handler, Array.prototype.slice.call(arguments));\n      handler.apply(null, arguments);\n    };\n    scaffoldMap[handler] = scaffold;\n    return scaffold;\n  };\n\n  var unscaffold = function(handler) {\n    var scaffold = scaffoldMap[handler];\n    delete scaffoldMap[handler];\n    return scaffold;\n  }\n\n  var publish = $.publish;\n  var subscribe = $.subscribe;\n  var unsubscribe = $.unsubscribe;\n\n  $.subscribe = function() {\n    var args = Array.prototype.slice.call(arguments);\n    var eventId = args[0];\n    var handler = args[1];\n\n    if (logging(eventId)) {\n      console.log('PubSub:subscribe', args);\n      handler = scaffoldHandler(eventId, handler);\n      args[1] = handler;\n    };\n    subscribe.apply(jQuery, args);\n  };\n\n  $.unsubscribe = function() {\n    var args = Array.prototype.slice.call(arguments);\n    var eventId = args[0];\n    var handler = args[1];\n\n    if (logging(eventId)) {\n      log('PubSub:unsubscribe', Array.prototype.slice.call(arguments));\n      if (typeof args[1] === 'function') {\n        args[1] = unscaffold(handler);\n      }\n    }\n    unsubscribe.apply(jQuery, args);\n  };\n\n  $.publish = function() {\n    var args = Array.prototype.slice.call(arguments);\n    var eventId = args[0];\n    if (logging(eventId)) {\n      log('PubSub:publish', args);\n    }\n    publish.apply(jQuery, args);\n  };\n\n}(jQuery));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/util/jquery-tiny-pubsub-trace.js","import AnnotationNav from './annotation-nav';\nimport AnnotationPageRenderer from './renderer/annotation-page-renderer';\nimport {Anno, AnnotationToc, annoUtil} from '../../import';\nimport getApp from '../../app';\nimport getLogger from '../../util/logger';\nimport getStateStore from '../../state-store';\nimport ScrollHelper from './scroll-helper';\n\nconst logger = getLogger();\n\n/**\n * Scrollable list of annotations in an AnnotationWindow\n */\nexport default class AnnotationListWidget {\n  constructor(options) {\n    this._annoWin = options.annotationWindow; // annotation window to which this widget belongs\n    this._annoPageRenderer = options.annotationPageRenderer;\n    this._annoExplorer = options.annotationExplorer;\n    this._canvases = options.canvases;\n    this._state = options.state;\n    this._isEditor = options.isEditor;\n    this._continuousPages = options.continuousPages;\n\n    this._dom = this._annoWin.getDomHelper();\n    this._rootElem = this._dom.getListContainer(); // root HTML element for this list widget\n\n    this._minContentRelativeHeight = 1.5;\n    this._maxContentRelativeHeight = 5;\n\n    if (!this._state) {\n      this._state = getStateStore();\n    }\n\n    if (!this._annoPageRenderer) {\n      this._annoPageRenderer = new AnnotationPageRenderer({\n        annotationWindow: this._annoWin,\n        annotationExplorer: this._annoExplorer\n      });\n    }\n\n    this._tocSpec = this._state.getSetting('annotations', 'tocSpec');\n  }\n\n  getRootElement() {\n    return this._rootElem;\n  }\n\n  getAnnotationElems() {\n    return this._dom.getAllAnnotationCells();\n  }\n\n  reload(layerId) {\n    this._layerId = layerId;\n    this._nav = this._setupNavigation();\n    this._loading = false;\n    this._rootElem.empty();\n    this._createPageElements();\n    this._scrollHelper = new ScrollHelper({\n      listWidget: this,\n      listNavigator: this._nav,\n      groupHeaderHeight: 19,\n      continuousPages: this._continuousPages\n    });\n    this._unbindEvents();\n    this._bindEvents();\n  }\n\n  _setupNavigation() {\n    const nav = new AnnotationNav({\n      canvases: this._canvases\n    });\n    return nav;\n  }\n\n  getNav() {\n    return this._nav;\n  }\n\n  async goToPage(pageNum) {\n    logger.debug('AnnotationListWidgetr#goToPage', pageNum, 'from', this._nav.getPage());\n    if (pageNum !== this._nav.getPage()) {\n      this._nav.setPage(pageNum);\n      await this._onNavSetPage(pageNum).catch(reason => {\n        throw 'AnnotationListWidget#goToPage _onNavSetPage(' + pageNum + ') failed: ' + reason;\n      });\n    }\n  }\n\n  async goToPageByCanvas(canvasId) {\n    logger.debug('AnnotationListWidgetr#goToPageByCanvas canvasId:', canvasId);\n    const pageNum = this._nav.getPageNumForCanvas(canvasId);\n    await this.goToPage(pageNum).catch(reason => {\n      throw 'AnnotationListWidget#goToPageByCanvas: goToPage(' + pageNum + ') failed: ' + reason;\n    });\n  }\n\n  async goToPageByTags(tags) {\n    logger.debug('AnnotationListWidgetr#goToPageByTags', tags);\n    const canvasIds = this._tocSpec.canvasMap[tags[0]];\n    if (canvasIds instanceof Array && canvasIds.length > 0) {\n      await this.goToPageByCanvas(canvasIds[0]);\n      this._scrollHelper.scrollToTags(tags);\n    }\n  }\n\n  async goToAnnotation(annoId, canvasId) {\n    logger.debug('AnnotationListWidget#goToAnnotation annoId', annoId, 'canvasId:', canvasId);\n\n    const nav = this._nav;\n    const targetPage = nav.getPageNumForCanvas(canvasId);\n\n    if (targetPage >= 0) {\n      await this.goToPage(targetPage);\n\n      this._scrollHelper.scrollToAnnotation(annoId);\n      this.clearAnnotationHighlights();\n      this.highlightAnnotation(annoId, 'SELECTED');\n    } else {\n      logger.debug('AnnotationListWidget#goToAnnotation page not found for canvasId', canvasId);\n    }\n  }\n\n  async _onNavSetPage(pageNum) {\n    logger.debug('AnnotationListWidget#_onNavSetPage pageNum:', pageNum);\n    const canvas = this._nav.getCanvas(pageNum);\n    const oldCanvasId = this._annoWin.getCurrentCanvasId();\n    const newCanvasId = canvas['@id'];\n\n    if (!this._nav.isLoaded(pageNum)) {\n      this._unloadAllPages();\n      await this._loadPage(pageNum).catch(reason => {\n        throw 'AnnotationListWidget#_onNavSetPage _loadPage(' + pageNum + ') failed: ' + reason;\n      });\n    }\n\n    if (this._continuousPages) {\n      await this.loadPreviousPage();\n      await this.loadNextPage();\n      await this._scrollHelper.scrollToPage(pageNum);\n    }\n\n    if (oldCanvasId !== newCanvasId) { // if the focused annotation belongs to a different canvas\n      // Load new canvas in the image window\n      this._annoWin.getImageWindowProxy().setCurrentCanvasId(newCanvasId);\n    }\n  }\n\n  // Load next page if there is one\n  async loadNextPage() {\n    logger.debug('AnnotationListWidget#loadNextPage loading:', this._loading);\n    try {\n      if (this._loading) {\n        return;\n      }\n      this._loading = true;\n      const nextPage = this._nav.getActiveRange().endPage + 1;\n      if (nextPage < this._nav.getNumPages()) {\n        await this._loadPage(nextPage);\n        this._scrollHelper.scrollDown(30);\n      }\n    } catch (e) {\n      logger.error('AnnotationListWidget#loadNextPages failed', e);\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  // Load previous page if there is one\n  async loadPreviousPage() {\n    logger.debug('AnnotationListWidget#loadPreviousPage loading:', this._loading);\n    try {\n      if (this._loading) {\n        return;\n      }\n      this._loading = true;\n      const nextPage = this._nav.getActiveRange().startPage - 1;\n      if (nextPage >= 0) {\n        await this._loadPage(nextPage);\n        this._scrollHelper.scrollUp(30);\n      }\n    } catch (e) {\n      logger.error('AnnotationListWidget#loadNextPages failed', e);\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  // Load next pages until minimum content height is reached\n  async LoadNextPages() {\n    logger.debug('AnnotationListWidget#loadNextPages loading:', this._loading);\n    try {\n      if (this._loading) {\n        return;\n      }\n      this._loading = true;\n      const minHeight = this._rootElem.height() * this._minContentRelativeHeight;\n      const numPages = this._nav.getNumPages();\n      let scrollHeight = this._rootElem[0].scrollHeight;\n\n      for (let nextPage = this._nav.getActiveRange().endPage + 1;\n        nextPage < numPages && scrollHeight < minHeight;\n        scrollHeight = this._rootElem[0].scrollHeight, ++nextPage)\n      {\n        logger.debug('AnnotationListWidget#loadNextPages nextPage:', nextPage, 'numPages:', numPages, 'scrollHeight:', scrollHeight, 'minHeight:', minHeight);\n        await this._loadPage(nextPage);\n      }\n    } catch (e) {\n      logger.error('AnnotationListWidget#loadNextPages failed', e);\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  // Load next pages until minimum content height is reached\n  async loadPreviousPages() {\n    logger.debug('AnnotationListWidget#loadPreviousPages', this._loading);\n    try {\n      if (this._loading) {\n        return;\n      }\n      this._loading = true;\n      const minHeight = this._rootElem.height() * this._minContentRelativeHeight;\n      const numPages = this._nav.getNumPages();\n      let scrollHeight = this._rootElem[0].scrollHeight;\n\n      for (let nextPage = this._nav.getActiveRange().startPage - 1;\n        nextPage >= 0 && scrollHeight < minHeight;\n        scrollHeight = this._rootElem[0].scrollHeight, --nextPage)\n      {\n        logger.debug('AnnotationListWidget#_loadPreviousPages nextPage:', nextPage, 'scrollHeight:', scrollHeight, 'minHeight:', minHeight);\n        await this._loadPage(nextPage);\n      }\n    } catch (e) {\n      logger.error('AnnotationListWidget#loadPreviousPages failed', e);\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  select(annoElem) {\n    this.clearAnnotationHighlights();\n    this._nav.setPageByCanvasId(annoElem.data('canvasId'));\n\n    annoElem.focus();\n\n    jQuery.publish('ANNOWIN_ANNOTATION_FOCUSED', [{\n      annotationWindowId: this._annoWin.getId(),\n      annotation: annoElem.data('annotation'),\n      canvasId: annoElem.data('canvasId'),\n      imageWindowId: this._annoWin.getImageWindowId(),\n      offset: annoElem.position().top\n    }]);\n  }\n\n  clearAnnotationHighlights() {\n    for (let elem of this._dom.getAllAnnotationCells()) {\n      jQuery(elem).removeClass('ym_anno_selected');\n    }\n  }\n\n  highlightAnnotations(annotations, flag) {\n    logger.debug('AnnotationListWidget#highlightAnnotations annotations:', annotations, 'flag:', flag);\n\n    this.clearAnnotationHighlights();\n\n    for (let annoElem of this._dom.getAllAnnotationCells()) {\n      const $annoElem = jQuery(annoElem);\n      const annoId = $annoElem.data('annotationId');\n\n      for (let anno of annotations) {\n        if (anno['@id'] === annoId) {\n          this.highlightAnnotationElem($annoElem, flag);\n        }\n      }\n    }\n  }\n\n  highlightAnnotation(annoId, flag) {\n    for (let annoElem of this._dom.getAllAnnotationCells()) {\n      let $annoElem = jQuery(annoElem);\n\n      if ($annoElem.data('annotationId') === annoId) {\n        this.highlightAnnotationElem($annoElem, flag);\n      }\n    }\n  }\n\n  highlightAnnotationElem(annoElem, flag) {\n    logger.debug('AnnotationListWidget#highlightAnnotationElem annoElem:', annoElem, 'flag:', flag, 'annoId:', annoElem.data('annotationId'));\n    const klass = (flag === 'TARGETING' ? 'ym_anno_targeting' :\n      (flag === 'TARGETED' ? 'ym_anno_targeted' : 'ym_anno_selected'));\n\n    annoElem.addClass(klass);\n  }\n\n  /**\n   * Create empty page elements under the root.\n   */\n  _createPageElements() {\n    logger.debug('AnnotationListWidget#_createPageElements');\n    const nav = this._nav;\n    const pageRenderer = this._annoPageRenderer;\n\n    for (let pageNum = 0; pageNum < this._canvases.length; ++pageNum) {\n      let canvas = nav.getCanvas(pageNum);\n      let pageElem = pageRenderer.createPageElement({\n        pageNum: pageNum,\n        canvasId: canvas['@id'],\n        canvasLabel: canvas.label,\n        layerId: this._layerId\n      });\n\n      this._rootElem.append(pageElem);\n      pageElem.hide();\n      nav.setPageElement(pageNum, pageElem);\n    }\n  }\n\n  async _activateMorePagesForward(pageNum, numPages) {\n    logger.debug('AnnotationListWidget#_activateMorePagesForward', pageNum, numPages);\n    const rootElem = this._rootElem;\n    let nextPage = pageNum;\n\n    while (nextPage < numPages) {\n      logger.debug('AnnotationListWidget#_activateMorePagesForward nextPage:', nextPage, 'numPages:', numPages, 'scroll height:', rootElem[0].scrollHeight, 'element height:', rootElem.height());\n      let currentPage = nextPage;\n      nextPage = await this._activatePageForward(currentPage);\n      if (nextPage === currentPage || rootElem[0].scrollHeight > rootElem.height()) {\n        break;\n      }\n    }\n    return nextPage;\n  }\n\n  async _activateMorePagesBackward(pageNum) {\n    logger.debug('AnnotationListWidget#_activateMorePagesBackward', pageNum);\n    const rootElem = this._rootElem;\n    let nextPage = pageNum;\n\n    while (nextPage >= 0) {\n      logger.debug('AnnotationListWidget#_activateMorePagesBackward nextPage:', nextPage, 'scroll height:', rootElem[0].scrollHeight, 'element height:', rootElem.height());\n      let currentPage = nextPage;\n      nextPage = await this._activatePageBackward(currentPage);\n      if (nextPage === currentPage || rootElem[0].scrollHeight > rootElem.height()) {\n        break;\n      }\n    }\n    return nextPage;\n  }\n\n  _deactivatePage(pageNum) {\n    logger.debug('AnnotationListWidget#_deactivatePage', pageNum);\n    this._nav.getPageElement(pageNum).hide();\n    this._nav.unload(pageNum);\n  }\n\n  async _loadPage(pageNum) {\n    logger.debug('AnnotationListWidget#_loadPage pageNum:', pageNum);\n\n    if (this._nav.isLoaded(pageNum)) {\n      logger.debug('AnnotationListWidget#_loadPage alread loaded; page:', pageNum);\n      return;\n    }\n\n    const annotations = await this._getAnnotationsForPage(pageNum);\n    const toc = await this._getTocForPage(pageNum);\n    const element = this._nav.getPageElement(pageNum);\n\n    this._nav.load(pageNum, annotations, toc);\n\n    this._annoPageRenderer.render(element, {\n      annotations: annotations,\n      annotationToc: toc,\n      isEditor: this._isEditor,\n      pageNum: pageNum\n    });\n\n    element.show();\n  }\n\n  _unloadAllPages() {\n    for (let elem of this._nav.getPageElements()) {\n      elem.hide();\n    }\n    this._nav.unloadAll();\n  }\n\n  _unloadNextPages() {\n    logger.debug('AnnotationListWidget#_unloadNextPages');\n    const nav = this._nav;\n    const rootElem = this._rootElem;\n    const rootElemHeight = rootElem.height();\n    const maxHeight = this._maxContentRelativeHeight * rootElemHeight;\n\n    for (let nextPage = nav.getActiveRange().endPage;\n         nextPage > nav.getPage() + 1 && rootElem[0].scrollHeight - rootElemHeight > maxHeight;\n         --nextPage)\n    {\n      logger.debug('AnnotationListWidget#_deactivatePagesBackward nextPage:', nextPage, 'scroll height:', rootElem[0].scrollHeight, 'maxHeight:', maxHeight);\n      nav.getPageElement(nextPage).hide();\n    }\n  }\n\n  _unloadPreviousPages() {\n    logger.debug('AnnotationListWidget#_unloadPreviousPages');\n    const rootElem = this._rootElem;\n    const rootElemHeight = rootElem.height();\n    const maxHeight = this._maxContentRelativeHeight * rootElemHeight;\n\n    for (let nextPage = 0;\n         nextPage < this._currentPageNum - 1 && rootElem[0].scrollHeight - rootElemHeight > maxHeight;\n         ++nextPage)\n    {\n      logger.debug('AnnotationListWidget#_unloadPreviousPages nextPage:', nextPage, 'scroll height:', rootElem[0].scrollHeight, 'maxHeight:', maxHeight);\n      nav.getPageElement(nextPage).hide();\n    }\n  }\n\n  async _getTocForPage(pageNum) {\n    const canvas = this._nav.getCanvas(pageNum);\n    const tocCache = getApp().getAnnotationTocCache();\n    return tocCache ? await tocCache.getToc(canvas['@id']) : null;\n  }\n\n  async _getAnnotationsForPage(pageNum) {\n    const canvasId = this._nav.getCanvas(pageNum)['@id'];\n    const annotations = await this._annoExplorer.getAnnotations({\n      canvasId: canvasId\n    });\n    return annotations.filter(anno => anno.layerId === this._layerId);\n  }\n\n  clearHighlights() {\n    for (let cell of this._dom.getAllAnnotationCells()) {\n      jQuery(cell).removeClass('annowin_targeted')\n        .removeClass('ym_anno_selected ym_anno_targeting ym_anno_targeted');\n    }\n  }\n\n  /**\n   * Find annotation's siblings from annotations\n   * A sibling is an annotation that points to the same TOC node.\n   * For example, annotation A and B are siblings if they both belong to\n   * [\"chapter1\", \"scene2\", \"p1\"].\n   */\n  getTocSiblingElems(annotation, annotations, layerId, toc) {\n    logger.debug('AnnotationListWidget#getTocSiblingElems annotation:', annotation, 'annotations:', annotations, 'layerId:', layerId, 'toc:', toc);\n    const result = [];\n    let siblings = annoUtil.findTocSiblings(annotation, annotations, layerId, toc);\n\n    for (let annoElem of this._dom.getAllAnnotationCells()) {\n      const $annoElem = jQuery(annoElem);\n      const annoId = $annoElem.data('annotationId');\n\n      for (let sibling of siblings) {\n        if (sibling['@id'] === annoId) {\n          result.push($annoElem);\n        }\n      }\n    }\n    return result;\n  }\n\n   async _focusNextAnnotation() {\n    const nav = this._nav;\n    const current = jQuery(this._rootElem.find('.annowin_anno:focus'));\n    let next = current.next();\n    while (next.size() > 0 && !next.hasClass('annowin_anno')) {\n      next = next.next();\n    }\n    if (next.size() > 0) {\n      this.select(next);\n    } else if (this._continuousPages) {\n      const nextPage = nav.getPage() + 1;\n      if (nextPage < nav.getNumPages()) {\n        if (!nav.isLoaded(nextPage)) {\n          await this.loadNextPage();\n        }\n        const nextPageElem = nav.getPageElement(nextPage);\n        next = nextPageElem.find('.annowin_anno').first();\n        if (next) {\n          this.select(next);\n          nav.setPage(nextPage);\n        }\n      }\n    }\n  }\n\n  async _focusPrevAnnotation() {\n    const nav = this._nav;\n    const current = jQuery(this._rootElem.find('.annowin_anno:focus'));\n    let prev = current.prev();\n\n    while (prev.size() > 0 && !prev.hasClass('annowin_anno')) {\n      prev = prev.prev();\n    }\n    if (prev.size() > 0) {\n      this.select(prev);\n    } else if (this._continuousPages) {\n      const prevPage = nav.getPage() - 1;\n      if (prevPage >= 0) {\n        if (!nav.isLoaded(prevPage)) {\n          await this.loadPreviousPage();\n        }\n        const prevPageElem = nav.getPageElement(prevPage);\n        prev = prevPageElem.find('.annowin_anno').last();\n        if (prev) {\n          this.select(prev);\n          nav.setPage(prevPage);\n        }\n      }\n    }\n  }\n\n  scrollToElem(annoElem, yOffset) {\n    this._scrollHelper.scrollToElem(annoElem, yOffset);\n  }\n\n  scrollToAnnotation(annoId, yOffset) {\n    this._scrollHelper.scrollToAnnotation(annoId, yOffset);\n  }\n\n  _bindEvents() {\n    const _this = this;\n    this._scrollHelper.bindScrollEvent();\n\n    this._rootElem.keydown(function(event) {\n      event.preventDefault();\n      switch (event.key) {\n        case 'ArrowDown':\n          _this._focusNextAnnotation();\n          break;\n        case 'ArrowUp':\n          _this._focusPrevAnnotation();\n          break;\n      }\n    });\n  }\n\n  _unbindEvents() {\n    this._scrollHelper.unbindScrollEvent();\n    this._rootElem.off('keydown');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/annotation-list-widget.js","import getLogger from '../../util/logger';\n\nconst logger = getLogger();\n\n/**\n *  Navigation controller for the annotation window\n */\nexport default class AnnotationNav {\n  constructor(options) {\n    this.options = Object.assign({\n      canvases: []\n    }, options);\n\n    this._pageNum = -1;\n    this._numPages = this.options.canvases.length;\n    this._activeRange = { startPage: -1, endPage: -1 }; // marks pages that are loaded and visible\n    this._pageStateList = this._createPageStateList();\n  }\n\n  getPage() {\n    return this._pageNum;\n  }\n\n  setPage(pageNum) {\n    if (pageNum >= 0 && pageNum < this._numPages) {\n      this._pageNum = pageNum;\n    } else {\n      throw 'AnnotationNav#setPage invalid pageNum ' + pageNum;\n    }\n  }\n\n  setPageByCanvasId(canvasId) {\n    for (let i = 0; i < this._pageStateList.length; ++i) {\n      if (this._pageStateList[i].canvas['@id'] === canvasId) {\n        this.setPage(i);\n        return;\n      }\n    }\n    logger.error('AnnotationNav#setPageByCanvasId page not found for canvas', canvasId);\n  }\n\n  getNumPages() {\n    return this._numPages;\n  }\n\n  getPageElements() {\n    return this._pageStateList.map(item => item.element);\n  }\n\n  getPageElement(pageNum) {\n    return this._pageStateList[pageNum].element;\n  }\n\n  setPageElement(pageNum, elem) {\n    this._pageStateList[pageNum].element = elem;\n  }\n\n  getCanvas(pageNum) {\n    return this._pageStateList[pageNum].canvas;\n  }\n\n  isLoaded(pageNum) {\n    return this._pageStateList[pageNum].loaded;\n  }\n\n  setLoaded(pageNum) {\n    this._pageStateList[pageNum].loaded = true;\n  }\n\n  load(pageNum, annotations, toc) {\n    const item = this._pageStateList[pageNum];\n    item.annotations = annotations;\n    item.toc = toc;\n    item.loaded = true;\n    this._addToActiveRange(pageNum);\n  }\n\n  unload(pageNum) {\n    const item = this._pageStateList[pageNum];\n    this._unloadPageItem(item);\n    this._removeFromActiveRange(pageNum);\n  }\n\n  _unloadPageItem(item) {\n    delete item.annotations;\n    delete item.toc;\n    item.loaded = false;\n\n  }\n\n  unloadAll() {\n    for (let item of this._pageStateList) {\n      this._unloadPageItem(item);\n    }\n    this._activeRange.startPage = -1;\n    this._activeRange.endPage = -1;\n  }\n\n  getActiveRange() {\n    logger.debug('AnnotationNav get activeRange', this._activeRange.startPage, this._activeRange.endPage);\n    return this._activeRange;\n  }\n\n  _addToActiveRange(pageNum) {\n    logger.debug('AnnotationNav#_addToActiveRange', pageNum, this._activeRange.startPage, this._activeRange.endPage);\n    const range = this._activeRange;\n    if (range.startPage === -1 || pageNum < range.startPage) {\n      range.startPage = pageNum;\n    }\n    if (range.endPage === -1 || pageNum > range.endPage) {\n      range.endPage = pageNum;\n    }\n  }\n\n  _removeFromActiveRange(pageNum) {\n    logger.debug('AnnotationNav#_removeFromActiveRange', pageNum, this._activeRange.startPage, this._activeRange.endPage);\n    const range = this._activeRange;\n    if (pageNum === range.startPage) {\n      ++ range.startPage;\n      if (range.startPage >= this._numPages) {\n        range.startPage = -1;\n        range.endPage = -1;\n      }\n    }\n    if (pageNum === range.endPage) {\n      -- range.endtPage;\n      if (range.endPage === -1) {\n        range.startPage = -1;\n      }\n    }\n  }\n\n  getPageNumForCanvas(canvasId) {\n    for (let i = 0; i < this._pageStateList.length; ++i) {\n      if (this._pageStateList[i].canvas['@id'] === canvasId) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  _createPageStateList() {\n    const pages = [];\n\n    for (let canvas of this.options.canvases) {\n      pages.push({\n        toc: null,\n        canvas: canvas,\n        loaded: false,\n        annotations: [],\n        element: null\n      });\n    }\n    return pages;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/annotation-nav.js","import {Anno, annoUtil} from '../../import';\nimport AnnotationListWidget from './annotation-list-widget';\nimport DomHelper from './dom-helper';\nimport fatalError from '../../util/fatal-error';\nimport getApp from '../../app';\nimport getLogger from '../../util/logger';\nimport getMiradorProxyManager from '../../mirador-proxy/mirador-proxy-manager';\nimport getStateStore from '../../state-store';\nimport MenuTagSelector from '../menu-tag-selector';\nimport LayerSelector from '../layer-selector';\nimport session from '../../session';\nimport WindowProxy from '../../mirador-proxy/window-proxy';\n\nconst logger = getLogger();\n\nexport default class AnnotationWindow {\n  constructor(options) {\n    logger.debug('AnnotationWindow#constructor options:', options);\n    this._id = options.id; // annotation window ID\n    this._miradorId = options.miradorId;\n    this._imageWindowId = options.canvasWindowId;\n    this._appendTo = options.appendTo;\n    this._listWidget = options.annotationListWidget;\n    this._explorer = options.explorer;\n    this._initialLayerId = options.initialLayerId || null;\n    this._initialTocTags = options.initialTocTags || [];\n    this._annotationId = options.annotationId;\n    this._state = options.appState;\n\n    this._miradorProxy = getMiradorProxyManager().getMiradorProxy(this._miradorId);\n    this._tocSpec = getStateStore().getSetting('annotations', 'tocSpec');\n    this._annotationTocCache = getApp().getAnnotationTocCache();\n\n    if (!this._id) { this._id = Mirador.genUUID(); }\n    this._imageWindow = this._miradorProxy.getWindowProxyById(this._imageWindowId);\n\n    this._dom = new DomHelper(this._appendTo);\n    this._orderConfirm = this._dom.getOrderConfirm();\n\n    this._continuousPages =  this._state.getSetting('ui', 'annotationWindow', 'continuousPages');\n\n    this._jQuerySubscribed = {};\n    this._miradorSubscribed = {};\n    this._setDirty(false);\n\n    this._flexDirection = 'column';\n    this._ignoredEvents = {};\n  }\n\n  getId() {\n    return this._id;\n  }\n\n  /**\n   * Initializations that require async operations\n   *\n   * @returns {Promise}\n   */\n  async init() {\n    const canvasId = this._imageWindow.getCurrentCanvasId();\n    const annotationList = this._imageWindow.getAnnotationsList();\n    const toc = this._tocSpec ? await getApp().getAnnotationTocCache().getToc(canvasId) : null;\n\n    let { targetAnno, layerId, tocTags } = this._processDataParams({\n      annotationId: this._annotationId,\n      annotationList: annotationList,\n      layerId: this._initialLayerId,\n      toc: toc,\n      tocTags: this._initialTocTags\n    });\n\n    logger.debug('AnnotationWindow#init targetAnno:', targetAnno);\n\n    this.initLayerSelector();\n    this.placeHolder = this._dom.getPlaceHolder();\n    this.placeHolder.text('Loading...').show();\n    this._setupAnnotationListWidget();\n\n    await this.reload().catch(reason => {\n      throw 'AnnotationWindow#init reload failed - ' + reason;\n    });\n\n    if (this._annotationId) {\n      this._listWidget.highlightAnnotations([targetAnno], 'SELECTED');\n      this._listWidget.goToAnnotation(this._annotationId, canvasId);\n    } else if (this._initialTocTags.length > 0) {\n      this._listWidget.goToPageByTags(tocTags);\n    } else {\n      this._listWidget.goToPageByCanvas(canvasId);\n    }\n    this.bindEvents();\n    return this;\n  }\n\n  ignoreEvent(eventId, duration) {\n    this._ignoredEvents[eventId] =  new Date().valueOf() + duration;\n  }\n\n  _shouldIgnoreEvent(eventId) {\n    const expiration = this._ignoredEvents[eventId];\n    if (typeof expiration === 'number') {\n      if (new Date().valueOf() < expiration) {\n        return true;\n      } else {\n        delete this._ignoredEvents[eventId];\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Process initialization parameters concerning which data to display how.\n   * params: {\n   *   annotationId: string,\n   *   annotationList: Array.<object>,\n   *   layerId: string,\n   *   toc: jossugi.AnnotationToc,\n   *   tocTags: Array.<string>\n   * }\n   * @param {object} params\n   * @return {{targetAnno: object, layerId: string, tocTags: string[]}}\n   */\n  _processDataParams(params) {\n    logger.debug('AnnotationWindow#_processDataParams params:', params);\n    let targetAnno = null; // annotation that should be visible and focused on\n    let layerId = params.layerId;\n    let tocTags = params.tocTags;\n\n    if (params.annotationId) { // annotationId is given the highest priority in determining targetAnno\n      targetAnno = annoUtil.findAnnotationFromListById(params.annotationId,\n        params.annotationList);\n\n      if (targetAnno) {\n        layerId = targetAnno.layerId;\n        if (params.toc) {\n          tocTags = params.toc.getTagsFromAnnotationId(params.annotationId);\n        }\n      }\n    }\n    return {targetAnno: targetAnno, layerId: layerId, tocTags: tocTags};\n  }\n\n  _getTargetAnnoWithToc(annotationList, layerId, toc, tocTags) {\n    const annosToShow = annotationList.filter(anno => anno.layerId == layerId)\n      .filter(anno => toc.matchHierarchy(anno, tocTags.slice(0,1)));\n    const fullTagsTargets = annosToShow.filter(anno => toc.matchHierarchy(anno, tocTags));\n\n    if (fullTagsTargets.length > 0 && !targetAnno) {\n      targetAnno = fullTagsTargets[0];\n    }\n  }\n\n  /**\n   * Process init option \"annotationId\"\n   * @param {{annotationId: string, annotationList: Array.<object>, layerId: string, toc: object}} params\n   * @return {{targetAnno: object, layerId: string, tocTags: string[]}}\n   */\n  _processAnnotationId(params) {\n    const targetAnno = annoUtil.findAnnotationFromListById(params.annotationId,\n      params.annotationList)[0];\n    let layerId = params.layerId;\n    let tocTags = [];\n\n    if (targetAnno) {\n      layerId = targetAnno.layerId;\n      if (params.toc) {\n        tocTags = toc.getTagsFromAnnotationId(params.annotationId);\n      }\n    }\n    return {targetAnno: targetAnno, layerId: layerId, tocTags: tocTags};\n  }\n\n  _processLayerId(layerId, annotationList, toc, tocTags) {\n    let annosToShow = annotationList.filter(anno => anno.layerId == this._initialLayerId);\n\n    if (toc && tocTags.length > 0) {\n      annosToShow = annosToShow.filter(anno => toc.matchHierarchy(anno, tocTags.slice(0,1)));\n      const fullTagsTargets = annosToShow.filter(anno => toc.matchHierarchy(anno, tocTags));\n      if (fullTagsTargets.length > 0 && !targetAnno) {\n        targetAnno = fullTagsTargets[0];\n      }\n    }\n  }\n\n  getDomHelper() {\n    return this._dom;\n  }\n\n  getMiradorProxy() {\n    return this._miradorProxy;\n  }\n\n  getImageWindowId() {\n    return this._imageWindowId;\n  }\n\n  getImageWindowProxy() {\n    const windowId = this.getImageWindowId();\n    return getMiradorProxyManager().getWindowProxyById(windowId);\n  }\n\n  _setupAnnotationListWidget() {\n    if (!this._listWidget) {\n      const windowProxy = getMiradorProxyManager().getWindowProxyById(this._imageWindowId);\n      const canvases = windowProxy.getManifest().getCanvases();\n\n      this._listWidget =  new AnnotationListWidget({\n        annotationWindow: this,\n        canvases: canvases,\n        tocTags: this._initialTocTags,\n        annotationExplorer: this._explorer,\n        state: getStateStore(),\n        isEditor: session.isEditor(),\n        constinousPages: this._continuousPages\n      });\n      this._listWidget.reload(this._initialLayerId);\n    }\n  }\n\n  destroy() {\n    logger.debug('AnnotationWindow#destroy');\n    this._unsubscribeAll(); //XXXX\n  }\n\n  getAnnoListNav() {\n    return this._listWidget.getNav();\n  }\n\n  initMenuTagSelector() {\n    logger.debug('AnnotationWindow#initMenuTagSelector');\n    if (this.menuTagSelector) {\n      this.menuTagSelector.destroy();\n    }\n    this.menuTagSelector = new MenuTagSelector({\n      parent: this._dom.getTocTagSelector(),\n      tocSpec: getStateStore().getSetting('annotations', 'tocSpec'),\n      annotationExplorer: this._explorer,\n      initialTags: this._initialTocTags,\n      changeCallback: async (value, text) => {\n        logger.debug('Change from TOC selector: ', value);\n        await this._listWidget.goToPageByTags([value]);\n        //this.updateList();\n      }\n    });\n  }\n\n  initLayerSelector() {\n    this._setCurrentLayerId(this._initialLayerId);\n    this.layerSelector = new LayerSelector({\n      parent: this._dom.getLayerSelectorContainer(),\n      annotationExplorer: this._explorer,\n      initialLayerId: this._initialLayerId,\n      changeCallback: (value, text) => {\n        logger.debug('Change from Layer selector: ', value);\n        this._setCurrentLayerId(value);\n        this.updateList();\n      }\n    });\n  }\n\n  _toggleDirection() {\n    const root = this._dom.getRoot();\n\n    if (root.hasClass('row-reverse')) {\n      root.toggleClass('row-reverse', false);\n    } else {\n      root.toggleClass('row-reverse', true);\n    }\n    this._dom.updateDirection();\n  }\n\n  getCurrentLayerId() {\n    return this._currentLayerId;\n  }\n\n  _setCurrentLayerId(layerId) {\n    logger.debug('AnnotationWindow#_setCurrentLayerId layerId:', layerId);\n    this._currentLayerId = layerId;\n  }\n\n  show() {\n    this._dom.getRoot().show();\n  }\n\n  hide() {\n    this._dom.getRoot().hide();\n  }\n\n  _isDirty() {\n    return this._dirty;\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  _setDirty(value) {\n    this._dirty = value;\n  }\n\n  reload() {\n    logger.debug('AnnotationWindow#reload');\n    this.hide();\n    const _this = this;\n    const state = getStateStore();\n\n    this.placeHolder.hide();\n\n    const canvas = this.getCurrentCanvas();\n\n    const layersPromise = new Promise(function(resolve, reject) {\n      _this._explorer.getLayers().then(function(layers) {\n        if (layers.length > 0) {\n          if (_this.layerSelector.isLoaded()) {\n            resolve();\n          } else {\n            _this.layerSelector.init(layers).then(function(layerSelector) {\n              _this._setCurrentLayerId(layerSelector.val());\n              resolve();\n            }).catch(function(reason) {\n              reject('layerSelector.init failed - ' + reason);\n            });\n          }\n        } else {\n          reject('No layers from annotation explorer');\n        }\n      });\n    });\n\n    const tocPromise = new Promise(function(resolve, reject) {\n      if (_this._explorer.getAnnotationToc()) {\n        _this.menuTagSelector.reload().then(function() {\n          resolve();\n        }).catch(function(reason) {\n          reject('menuTagSelector.reload failed - ' + reason);\n        });\n      } else {\n        resolve();\n      }\n    });\n\n    return Promise.all([layersPromise, tocPromise]).then(async () => {\n      await this.updateList().catch(reason => {\n        throw 'AnnotationWindow#updateList failed: ' + reason;\n      });\n      this._dom.updateDirection();\n      this.show();\n      return this;\n    });\n  }\n\n  reloadIfDirty() {\n    logger.debug('AnnotationWindow#reloadIfDirty dirty:', this._dirty);\n    if (this._isDirty()) {\n      this._setDirty(false);\n      this.reload();\n    }\n  }\n\n  async updateList() {\n    const listWidget = this._listWidget;\n    const state = getStateStore();\n    const canvasId = this._imageWindow.getCurrentCanvasId();\n    logger.debug('AnnotationWindow#updateList canvasId:', canvasId);\n    /*\n    if (this._explorer.getAnnotationToc()) {\n      options.selectedTags = this.menuTagSelector.val().split('|');\n    }\n    */\n\n    await listWidget.reload(this.layerSelector.val());\n    let count = 0;\n\n    if (this._initialTocTags.length > 0) {\n      count = await listWidget.goToPageByTags(this._initialTocTags).catch(reason => {\n        throw 'listWidget#goToPageByTags failed: ' + reason + '(tags: ' + this._initialTocTags + ')';\n      });\n      if (this._annotationId) {\n        listWidget.scrollToAnnotation(this._annotationId);\n      }\n    } else {\n      count = await listWidget.goToPageByCanvas(canvasId).catch(reason => {\n        throw 'listWidget#goToPageByCanvas failed: ' + reason;\n      });\n    }\n\n    if (count === 0) {\n      this.placeHolder.text('No annotations found.').show();\n    } else {\n      this.placeHolder.hide();\n    }\n  }\n\n  getCurrentCanvasId() {\n    return this._imageWindow.getCurrentCanvasId();\n  }\n\n  getCurrentCanvas() {\n    const id = this.getCurrentCanvasId();\n    const canvases = this._imageWindow.getManifest().getCanvases();\n    const current = canvases.filter(canvas => {\n      return canvas['@id'] === id;\n    });\n\n    if (current.length < 1) {\n      fatalError('Could not find the requested canvas: ' + id);\n    } else {\n      return current[0];\n    }\n  }\n\n  select(annoElem) {\n    this._listWidget.select(annoElem);\n  }\n\n  scrollToAnnotation(annoId) {\n    this._listWidget.scrollToAnnotation(annoId);\n  }\n\n  async goToAnnotation(annoId, canvasId) {\n    logger.debug('AnnotationWindow#goToAnnotation annoId:', annoId, 'canvasId:', canvasId);\n\n    return this._listWidget.goToAnnotation(annoId, canvasId);\n  }\n\n  createInfoDiv(annotation, callback) {\n    var targetAnnoID = annotation.on.full;\n    var targetLink = '<a target=\"_blank\" href=\"' + targetAnnoID + '\">' + targetAnnoID + '</a>';\n    return jQuery(infoTemplate({ on: targetLink }));\n  }\n\n  hasOpenEditor() {\n    var hasOne = false;\n\n    for (let cell of this._dom.getAllAnnotationCells()) {\n      if (jQuery(cell).data('editing') === true) {\n        return true;\n      };\n    }\n    return false;\n  }\n\n  fadeUp(elem, onComplete) {\n    elem.transition({\n      animation: 'fade up',\n      duration: '0.3s',\n      onComplete: onComplete\n    });\n  }\n\n  fadeDown(elem, onComplete) {\n    elem.transition({\n      animation: 'fade down',\n      duration: '0.3s',\n      onComplete: onComplete\n    });\n  }\n\n  clearAnnotationHighlights() {\n    this._listWidget.clearAnnotationHighlights();\n  }\n\n  highlightAnnotationElem(annoElem, flag) {\n    this._listWidget.highlightAnnotationElem(annoElem, flag);\n  }\n\n  showSaveOrderConfirmation(pageElem) {\n    this._reorderedPageElem = pageElem;\n    this._dom.getOrderConfirm().show();\n  }\n\n  _saveAnnotationsOrder(pageElem) {\n    const annoElems = pageElem.find('.annowin_anno');\n    const annoIds = [];\n    const canvasId = pageElem.data('canvasId');\n    const layerId = pageElem.data('layerId');\n\n    annoElems.each((index, value) => {\n      var annoId = jQuery(value).data('annotationId');\n      annoIds.push(annoId);\n    });\n\n    logger.debug('AnnotationWindow#_saveAnnotationsOrder canvasId:', canvasId, 'layerId:', layerId, 'annoIds:', annoIds);\n\n    return this._explorer.updateAnnotationListOrder(canvasId, layerId, annoIds)\n    .catch(reason => {\n      this._dom.getOrderConfirm().hide();\n      const msg = 'AnnotationWindow#_saveAnnotationsOrder updateAnnotationListOrder failed: ' + reason;\n      throw msg;\n    });\n  }\n\n  bindEvents() {\n    logger.debug('AnnotationWindow#bindEvents');\n\n    this._dom.getCreateWindowButton().click(event => {\n      this._miradorProxy.publish('YM_DISPLAY_ON');\n      jQuery.publish('YM_ADD_WINDOW', {\n        miradorId: this._miradorId,\n        imageWindowId: this._imageWindowId\n      });\n    });\n\n    this._dom.getToggleDirectionButton().click(event => {\n      this._toggleDirection();\n    });\n\n    this._dom.getSaveOrderButton().click(event => {\n      this._saveAnnotationsOrder(this._reorderedPageElem);\n      this._dom.getOrderConfirm().hide();\n    });\n\n    this._dom.getCancelOrderButton().click(event => {\n      this._dom.getOrderConfirm().hide();\n    });\n\n    this._subscribe(this._miradorProxy, 'ANNOTATIONS_LIST_UPDATED', (event, params) => {\n      logger.debug('AnnotationWindow:SUB:ANNOTATIONS_LIST_UPDATED, params:', params);\n      if (params.windowId === this.getImageWindowId() && !this._shouldIgnoreEvent('ANNOTATIONS_LIST_UPDATED')) {\n        if (this.hasOpenEditor()) {\n          this._setDirty(true);\n        } else {\n          this.reload();\n        }\n      }\n    });\n\n    this._subscribe(jQuery, 'ANNOWIN_ANNOTATION_FOCUSED', async (event, params) => {\n      logger.debug('AnnotationWindow:SUB:ANNOWIN_ANNOTATION_FOCUSED annotation window id:', this._id,  'params:', params, 'layer:', this.getCurrentLayerId());\n      const $anno = Anno(params.annotation);\n      const listWidget = this._listWidget;\n      let targetElem = null;\n\n      if (params.annotationWindowId === this._id) {\n        // Only want to listen to evnets generated by another annotation window\n        return;\n      }\n      listWidget.clearHighlights();\n\n      const annotations = this._imageWindow.getAnnotationsList();\n      const layerId = this.getCurrentLayerId();\n      const tocSpec = getStateStore().getSetting('annotations', 'tocSpec');\n\n      if (tocSpec) {\n        const toc = await getApp().getAnnotationTocCache().getToc(params.canvasId);\n        const siblingElems = listWidget.getTocSiblingElems(params.annotation, annotations, layerId, toc);\n\n        listWidget.clearHighlights();\n        for (let elem of siblingElems) {\n          listWidget.highlightAnnotationElem(elem);\n        }\n\n        if (siblingElems.length > 0) {\n          await listWidget.goToPageByCanvas(params.canvasId);\n          listWidget.scrollToElem(siblingElems[0], -params.offset);\n        }\n        return;\n      }\n\n      await listWidget.goToPageByCanvas(params.canvasId);\n\n      const annoMap = {};\n      for (let anno of annotations) {\n        annoMap[anno['@id']] = anno;\n      }\n      let targeting = annoUtil.findTransitiveTargetingAnnotations(\n        params.annotation, annoMap);\n      targeting = targeting.filter(anno => anno.layerId === this.getCurrentLayerId());\n\n      if (targeting.length > 0) {\n        listWidget.highlightAnnotations(targeting, 'TARGETING');\n        targetElem = this._dom.findAnnoElemByAnnoId(targeting[0]['@id']);\n        listWidget.scrollToElem(targetElem, -params.offset);\n        return;\n      }\n\n      const targeted = annoUtil.findTransitiveTargetAnnotations(\n        params.annotation, annoMap)\n        .filter(anno => anno.layerId === this.getCurrentLayerId());\n\n      if (targeted.length > 0) {\n        listWidget.highlightAnnotations(targeted, 'TARGET');\n        targetElem = this._dom.findAnnoElemByAnnoId(targeted[0]['@id']);\n        listWidget.scrollToElem(targetElem, -params.offset);\n        return;\n      }\n    });\n\n    this._subscribe(jQuery, 'YM_ANNOTATION_TOC_TAGS_SELECTED', (evnet, windowId, canvasId, tags) => {\n      logger.debug('AnnotationWindow:SUB:YM_ANNOTATION_TOC_TAGS_SELECTED imageWindow:', windowId, 'canvasId:', canvasId, 'tags:', tags);\n      this._listWidget.goToPageByTags(tags);\n    });\n\n    this._subscribe(this._miradorProxy, 'YM_IMAGE_WINDOW_TOOLTIP_ANNO_CLICKED', async (event, windowId, annoId) => {\n      logger.debug('AnnotationWindow:SUB:YM_IMAGE_WINDOW_TOOLTIP_ANNO_CLICKED windowId:', windowId, 'annoId:', annoId, 'annoWin:', this.id);\n      const windowProxy = this._miradorProxy.getWindowProxyById(windowId);\n      const canvasId = windowProxy.getCurrentCanvasId();\n\n      if (this._continuousPages) {\n        const toc = await this._annotationTocCache.getToc(canvasId);\n        const annotation = toc.annotations.filter(anno => anno['@id'] === annoId)[0];\n\n        if (annotation) {\n          this._listWidget.goToPageByTags(annotation.tocTags);\n        }\n      } else {\n        this._listWidget.goToAnnotation(annoId, canvasId);\n      }\n    });\n  }\n\n  _subscribe(context, eventId, handler) {\n    let saved;\n\n    if (context === jQuery) {\n      saved = this._jQuerySubscribed;\n    } else if (context === this._miradorProxy) {\n      saved = this._miradorSubscribed;\n    } else {\n      const msg = 'AnnotationWindow#_subscribe invalid context ';\n      logger.error(msg, context);\n      throw msg + context;\n    }\n    if (!(saved[eventId] instanceof Array)) {\n      saved[eventId] = [];\n    }\n    saved[eventId].push(handler);\n    context.subscribe(eventId, handler);\n  }\n\n  _unsubscribeAll() {\n    for (let context of [jQuery, this._miradorProxy]) {\n      let saved = context === jQuery ? this._jQuerySubscribed : this._miradorSubscribed;\n\n      for (let [eventId, handlers] of Object.entries(saved)) {\n        for (let handler of handlers) {\n          console.log('UNSUB', eventId, handler);\n          context.unsubscribe(eventId, handler);\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/annotation-window.js","import AnnotationRenderer from './annotation-renderer';\nimport AnnotationTocRenderer from './annotation-toc-renderer';\nimport getLogger from '../../../util/logger';\nimport getStateStore from '../../../state-store';\n\nconst logger = getLogger();\n\nexport default class AnnotationPageRenderer {\n  constructor(options) {\n    this._annoWin = options.annotationWindow;\n    this._annoRenderer = options.annotationRenderer;\n    this._annoExplorer = options.annotationExplorer;\n    this._state = options.state;\n\n    if (!this._state) {\n      this._state = getStateStore();\n    }\n\n    if (!this._annoRenderer) {\n      this._annoRenderer = new AnnotationRenderer({\n        annotationWindow: this._annoWin,\n        state: this._state\n      });\n    }\n  }\n\n  /**\n   * options: {\n   *   layerId: <string>,\n   *   canvasId: <string>,\n   *   canvasLabel: <string>,\n   *   pageNum: <number> // for debugging\n   * }\n   *\n   * @param {object} options\n   */\n  createPageElement(options) {\n    const html = pageTemplate({pageNum: options.pageNum});\n    const pageElem = jQuery(html);\n\n    pageElem.data('canvasId', options.canvasId);\n    pageElem.data('layerId', options.layerId);\n\n    const pageHeader = pageElem.find('.page-header');\n    pageHeader.text(options.canvasLabel);\n\n    return pageElem;\n  }\n\n  /**\n   * options: {\n   *   annotations: <object[]>,\n   *   canvasId: <string>,\n   *   annotationToc: <object>,\n   *   isEditor: <bool>,\n   *   pageNum: <number> // for debugging\n   * }\n   *\n   * @param {object} pageElem\n   * @param {object} options\n   */\n  render(pageElem, options) {\n    if (options.annotationToc) {\n      this._renderToc(pageElem, options);\n    } else {\n      this._renderDefault(pageElem, options);\n    }\n  }\n\n  unload(pageElem) {\n    pageElem.find('.annowin_group_header, .annowin_anno').remove();\n  }\n\n  /**\n   * options: {\n   *   annotations: <object[]>,\n   *   canvasId: <string>,\n   *   isEditor: <bool>\n   * }\n   *\n   * @param {object} pageElem\n   * @param {object} options\n   */\n  _renderDefault(pageElem, options) {\n    logger.debug('AnnotationPageRenderer#_renderDefault options:', options);\n    const canvasId = pageElem.data('canvasId');\n    const layerId = pageElem.data('layerId');\n    let count = 0;\n\n    for (let annotation of options.annotations) {\n      try {\n        if (annotation.layerId === layerId) {\n          ++count;\n          const annoElem = this._annoRenderer\n            .createAnnoElem(annotation, {\n              pageElem: pageElem,\n              canvasId: canvasId,\n              isEditor: options.isEditor\n            });\n          pageElem.append(annoElem);\n        }\n      } catch (e) {\n        logger.error('ERROR AnnotationPageRenderer#_renderDefault', e);\n        throw e;\n      }\n    }\n    return count;\n  }\n\n  _renderToc(pageElem, options) {\n    logger.debug('AnnotationPageRenderer#_renderToc options:', options);\n    const renderer = new AnnotationTocRenderer({\n      container: pageElem,\n      canvasId: pageElem.data('canvasId'),\n      layerId: pageElem.data('layerId'),\n      toc: options.annotationToc,\n      annotationRenderer: this._annoRenderer\n    });\n    return renderer.render();\n  }\n}\n\nconst pageTemplate = Handlebars.compile([\n  '<div class=\"ym-annotation-page page-{{pageNum}}\">',\n  '  <div class=\"page-header\">{{text}}',\n  '  </div>',\n  '</div>'\n].join(''));\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/renderer/annotation-page-renderer.js","import {Anno, annoUtil} from '../../../import';\nimport AnnotationEditor from '../../annotation-editor';\nimport getLogger from '../../../util/logger';\nimport util from '../../../util/util';\n\nconst logger = getLogger();\n\nexport default class AnnotationRenderer {\n  constructor(options) {\n    this._annoWin = options.annotationWindow;\n    this._state = options.state;\n\n    this.layerIndexMap = this._state.getTransient('layerIndexMap');\n    this.hideTags = this._state.getSetting('ui', 'annotationWindow', 'hideTags');\n    this._miradorProxy = this._annoWin.getMiradorProxy();\n  }\n\n  /**\n   * options: {\n   *   pageElem: <object>,\n   *   canvasId: <string>,\n   *   isEditor: <bool>\n   * }\n   *\n   * @param {object} annotation\n   * @param {object} options\n   */\n  createAnnoElem(annotation, options) {\n    //logger.debug('AnnotationRenderer#createAnnoElem anno:', annotation);\n    const anno = Anno(annotation);\n    const content = anno.bodyText;\n    const tags = anno.tags;\n    const tagsHtml = this.getTagsHtml(tags);\n    const style = anno.bodyStyle;\n\n    const annoHtml = annotationTemplate({\n      content: content,\n      tags: tagsHtml,\n      isEditor: options.isEditor,\n      orderable: options.isEditor\n    });\n\n    const annoElem = jQuery(annoHtml);\n\n    const contentElem = annoElem.find('.content');\n    //util.setTextDirectionClass(contentElem, style);\n\n    const menuBar = annoElem.find('.menu_bar');\n\n    annoElem.data('annotationId', annotation['@id']);\n    annoElem.data('canvasId', options.canvasId);\n    annoElem.data('pageElem', options.pageElem);\n\n    const ddElem = annoElem.find('.ui.dropdown');\n\n    ddElem.dropdown({ direction: 'downward' });\n    ddElem.click(function(event) {\n      event.stopPropagation(); // prevent _FOCUSED event from being published by clicking on the dropdown\n    });\n\n    const layerIndex = this.layerIndexMap[annotation.layerId];\n    menuBar.addClass('layer_' + layerIndex % 10);\n\n    if (annotation.on['@type'] == 'oa:Annotation') { // annotation of annotation\n      menuBar.addClass('targeting_anno');\n    } else {\n      menuBar.removeClass('targeting_anno');\n    }\n\n    if (this.hideTags) {\n      annoElem.find('.tags').hide();\n    }\n\n    this.bindAnnotationItemEvents(annoElem, annotation, options);\n    return annoElem;\n  }\n\n  getTagsHtml(tags) {\n    let html = '';\n    jQuery.each(tags, function(index, value) {\n      html += '<span class=\"tag\">' + value + '</span>';\n    });\n    return html;\n  }\n\n  bindAnnotationItemEvents(annoElem, annotation, options) {\n    const _this = this;\n    const annoWin = this._annoWin;\n    const nav = annoWin.getAnnoListNav();\n\n    annoElem.data('annotation', annotation);\n\n    annoElem.click(function(event) {\n      annoWin.select(jQuery(this));\n    });\n\n    annoElem.find('.annotate').click(function (event) {\n      const imageWindow = annoWin.getImageWindowProxy();\n      const dialogElement = jQuery('#ym_annotation_dialog');\n      const editor = new AnnotationEditor({\n        parent: dialogElement,\n        windowId: annoWin.getImageWindowId(),\n        mode: 'create',\n        targetAnnotation: annotation,\n        endpoint: annoWin.endpoint,\n        saveCallback: annotation => {\n          try {\n            dialogElement.dialog('close');\n            imageWindow.getAnnotationsList().push(annotation);\n            _this._miradorProxy.publish('ANNOTATIONS_LIST_UPDATED',\n              { windowId: imageWindow.getWindowId(), annotationsList: imageWindow.getAnnotationsList() });\n          } catch(e) {\n            logger.error('AnnotationRenderer saving from \"annotate\" failed:', e);\n            annoWin.reloadIfDirty();\n          }\n        },\n        cancelCallback: () => {\n          dialogElement.dialog('close');\n          annoWind.reloadIfDirty();\n        }\n      });\n\n      dialogElement.dialog({ // jQuery-UI dialog\n        title: 'Create annotation',\n        modal: true,\n        draggable: true,\n        dialogClass: 'no_close',\n        width: 400\n      });\n      editor.show();\n    });\n\n    annoElem.find('.edit').click(function(event) {\n      const dom = _this._annoWin.getDomHelper();\n\n      const editor = new AnnotationEditor({\n        parent: annoElem,\n        windowId: annoWin.getImageWindowId(),\n        mode: 'update',\n        endpoint: annoWin.endpoint,\n        annotation: annotation,\n        saveCallback: (annotation, content) => {\n          if (annoWin.getCurrentLayerId() === annotation.layerId) {\n            const normalView = annoElem.find('.normal_view');\n            const contentElem = normalView.find('.content');\n            contentElem.html(content);\n            util.setTextDirectionClass(contentElem, Anno(annotation).bodyStyle);\n            normalView.show();\n            annoElem.data('editing', false);\n          } else {\n            annoElem.remove();\n          }\n          annoWin.reloadIfDirty();\n        },\n        cancelCallback: (event) => {\n          annoElem.find('.normal_view').show();\n          annoElem.data('editing', false);\n          annoWin.reloadIfDirty();\n        }\n      });\n\n      annoElem.data('editing', true);\n      annoElem.find('.normal_view').hide();\n      editor.show();\n    });\n\n    annoElem.find('.delete').click(function(event) {\n      if (window.confirm('Do you really want to delete the annotation?')) {\n        _this._miradorProxy.publish('annotationDeleted.' + annoWin.getImageWindowProxy().getWindowId(), [annotation['@id']]);\n      }\n    });\n\n    annoElem.find('.order-up').click(function(event) {\n      event.stopPropagation();\n      const sibling = annoElem.prev();\n\n      if (sibling.length > 0 && sibling.hasClass('annowin_anno')) {\n        annoWin.fadeDown(annoElem, function() {\n          annoElem.after(sibling);\n          annoWin.fadeUp(annoElem, function() {\n            annoWin.showSaveOrderConfirmation(annoElem.data('pageElem'));\n          });\n        });\n      }\n    });\n\n    annoElem.find('.order-down').click(function(event) {\n      event.stopPropagation();\n      const sibling = annoElem.next();\n\n      if (sibling.length > 0 && sibling.hasClass('annowin_anno')) {\n        annoWin.fadeUp(annoElem, function() {\n          annoElem.before(sibling);\n          annoWin.fadeDown(annoElem, function() {\n            annoWin.showSaveOrderConfirmation(annoElem.data('pageElem'));\n          });\n        });\n      }\n    });\n  }\n}\n\nconst annotationTemplate = Handlebars.compile([\n  '<div class=\"annowin_anno\" tabindex=\"-1\">',\n  '  <div class=\"normal_view\">',\n  '    {{#if isEditor}}',\n  '      <div class=\"menu_bar\">',\n  '        <div class=\"ui text menu\">',\n  '          <div class=\"ui dropdown item\">',\n  //'            Action<i class=\"dropdown icon\"></i>',\n  '            <i class=\"fa fa-bars fa-fw\"></i>',\n  '            <div class=\"menu\">',\n  '              <div class=\"annotate item\"><i class=\"fa fa-hand-o-left fa-fw\"></i> Annotate</div>',\n  '              <div class=\"edit item\"><i class=\"fa fa-edit fa-fw\"></i> {{t \"edit\"}}</div>',\n  '              <div class=\"delete item\"><i class=\"fa fa-times fa-fw\"></i> {{t \"delete\"}}</div>',\n  '            </div>',\n  '          </div>',\n  '          {{#if orderable}}',\n  '            <div class=\"right menu\">',\n  '              <i class=\"order-down caret down icon\"></i>',\n  '              <i class=\"order-up caret up icon\"></i>',\n  '            </div>',\n  '          {{/if}}',\n  '        </div>',\n  '      </div>',\n  '    {{/if}}',\n  '    <div class=\"content\">{{{content}}}</div>',\n  '    <div class=\"tags\">{{{tags}}}</div>',\n  '  </div>',\n  '</div>'\n].join(''));\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/renderer/annotation-renderer.js","import getLogger from '../../../util/logger';\nimport session from '../../../session';\n\nconst logger = getLogger();\n\n/**\n * Render annotations  when an annotation ToC structure is available.\n */\nexport default class AnnotationTocRenderer {\n  constructor(options) {\n    this.options = Object.assign({\n      container: null,\n      canvasId: null,\n      layerId: null,\n      toc: null,\n      annotationRenderer: null\n    }, options);\n\n    logger.debug('AnnotationTocRenderer#constructor options:', options);\n\n    this._isEditor = session.isEditor();\n  }\n\n  render() {\n    logger.debug('AnnotationTocRenderer#render');\n\n    this.options.toc.walk((node, level) => {\n      if (node.isRoot) {\n        return; // do nothing with root node\n      }\n      if (level < 2 && !node.isDummy) {\n        this.appendHeader(node);\n      }\n      this.appendAnnotations(node);\n    });\n    this.appendUnattachedAnnotations();\n  }\n\n  appendHeader(node) {\n    //logger.debug('AnnotationTocRenderer#appendHeader node:', node);\n    const layerId = this.options.layerId;\n\n    // We are distinguishing between leaf and non-leaf nodes to ensure\n    // only one header will show over any set of annotations.\n\n    if (nodeHasAnnotationsToShow(node, layerId)) {\n      const headerElem = this.createHeaderElem(node);\n      this.options.container.append(headerElem);\n    }\n  }\n\n  appendAnnotations(node) {\n    //logger.debug('AnnotationTocRenderer#appendAnnotations node:', node);\n    const renderer = this.options.annotationRenderer;\n    const pageElem = this.options.container;\n\n    for (let anno of node.annotations) {\n      if (anno.layerId === this.options.layerId) {\n        let annoElem = renderer.createAnnoElem(anno, {\n          pageElem: pageElem,\n          canvasId: pageElem.data('canvasId'),\n          isEditor: this._isEditor\n        });\n        pageElem.append(annoElem);\n      }\n    }\n  }\n\n  appendUnattachedAnnotations() {\n    //logger.debug('AnnotationTocRenderer#appendUnattachedAnnotations');\n    const renderer = this.options.annotationRenderer;\n\n    if (this.options.toc.numUnassigned() > 0) {\n      /*\n      const unassignedHeader = jQuery(headerTemplate({ text: 'Unassigned' }));\n      let count = 0;\n      this.options.container.append(unassignedHeader);\n      */\n      for (let annotation of this.options.toc.unassigned()) {\n        logger.error('AnnotationTocRenderer#appendUnattachedAnnotations unassigned:', annotation);\n        /*\n        let annoElem = renderer.createAnnoElem(annotation, {\n          annotations: this.options.annotations,\n          isEditor: this._isEditor\n        });\n        this.options.container.append(annoElem);\n        ++count;\n        */\n      }\n      /*\n      if (count === 0) {\n        unassignedHeader.hide();\n      }\n      */\n    }\n  }\n\n  createHeaderElem(node) {\n    const headerHtml = headerTemplate({ text: node.label });\n    const headerElem = jQuery(headerHtml)\n      .addClass('header-level-' + node.tags.length);\n\n    if (!(node.tags instanceof Array && node.tags.length > 0)) {\n      logger.error('AnnotationTocRenderer#createHeaderElem invalid tags for node:', node);\n    }\n    headerElem.data('tags', node.tags);\n    return headerElem;\n  }\n}\n\nconst headerTemplate = Handlebars.compile([\n  '<div class=\"annowin_group_header\">{{text}}',\n  '</div>'\n].join(''));\n\nfunction nodeHasAnnotationsToShow(node, layerId) {\n  for (let anno of node.annotations) {\n    if (anno.layerId === layerId) {\n      return true;\n    }\n  }\n  for (let childNode of Object.values(node.childNodes)) {\n    if (nodeHasAnnotationsToShow(childNode, layerId)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/renderer/annotation-toc-renderer.js","import domHelper from './dom-helper';\nimport getLogger from '../../util/logger';\n\nconst logger = getLogger();\n\nexport default class ScrollHelper {\n  constructor(options) {\n    this._listWidget = options.listWidget;\n    this._groupHeaderHeight = options.groupHeaderHeight;\n    this._continousPages = options.continuousPages;\n\n    this._rootElem = this._listWidget.getRootElement();\n    this._nav = this._listWidget.getNav();\n  }\n\n  /**\n   * The page element must have already been loaded for this function to work.\n   *\n   * @param {number} pageNum\n   */\n  scrollToPage(pageNum) {\n    const pageHeaderElem = this._nav.getPageElement(pageNum).find('.page-header');\n\n    this.unbindScrollEvent();\n\n    return new Promise((resolve, reject) => {\n      this._rootElem.scrollTo(pageHeaderElem, {\n        onAfter: () => {\n          this.bindScrollEvent();\n          resolve();\n        }\n      });\n    });\n  }\n\n  scrollToTags(targetTags) {\n    logger.debug('ScrollHelper#scrollToTags targetTags:', targetTags);\n    let targetHeaderElem = null;\n    let targetElem = null;\n\n    this._rootElem.find('.annowin_group_header').each((index, value) => {\n      const headerElem = jQuery(value);\n      let tags = headerElem.data('tags');\n\n      if (!(tags instanceof Array && tags.length > 0)) {\n        logger.error('ScrollHelper#scrollToTags invalid tags', tags, 'for header elem', headerElem[0].outerHTML);\n        tags = [];\n      }\n\n      if (targetTags.length === 1) {\n        if (tags[0] === targetTags[0]) {\n          targetHeaderElem = headerElem;\n          return false;\n        }\n      } else if (tags[0] === targetTags[0] && tags[1] === targetTags[1]) {\n        targetHeaderElem = headerElem;\n        return false;\n      }\n    });\n\n    logger.debug('ScrollHelper#scrollToTags targetHeaderElem:', targetHeaderElem);\n\n    if (targetHeaderElem) {\n      targetElem = this._getNextAnnoElem(targetHeaderElem);\n      if (targetElem) {\n        this._rootElem.scrollTo(targetElem, {\n          offset: { top: -this._groupHeaderHeight }\n        });\n      }\n    } else {\n      logger.warning('ScrollHelper#scrollToTags Header element not found for', targetTags);\n    }\n  }\n\n  _getNextAnnoElem(elem) {\n    let currentElem = elem;\n    while (currentElem.size() > 0 && !domHelper.isAnnotationCell(currentElem)) {\n      currentElem = currentElem.next();\n    }\n    return currentElem.size() > 0 ? currentElem : null;\n  }\n\n  scrollToElem(annoElem, yOffsetIn) {\n    const yOffset = this._calcOffset(annoElem, yOffsetIn);\n\n    this.unbindScrollEvent();\n\n    return new Promise((resolve, reject) => {\n      this._rootElem.scrollTo(annoElem, {\n        offset: {\n          top: yOffset\n        },\n        onAfter: () => {\n          this.bindScrollEvent();\n          resolve();\n        }\n      });\n    });\n  }\n\n  // Note to avoid confusion: yOffsetIn will typically have a negative value if defined\n  _calcOffset(annoElem, yOffsetIn) {\n    if (yOffsetIn === undefined) {\n      return -this._groupHeaderHeight;\n    }\n    const minOffset = annoElem.height() - this._rootElem.height();\n    const yOffset = yOffsetIn < minOffset ? minOffset : yOffsetIn;\n    return yOffset;\n  }\n\n  scrollToAnnotation(annotationId, yOffset) {\n    logger.debug('AnnotationListWidget#scrollToAnnotation annotationId:', annotationId, 'yOffset:', yOffset);\n    for (let annoElem of this._listWidget.getAnnotationElems()) {\n      const $annoElem = jQuery(annoElem);\n      if ($annoElem.data('annotationId') === annotationId) {\n        return this.scrollToElem($annoElem, yOffset);\n      }\n    }\n  }\n\n  scrollDown(delta) {\n    this._rootElem.scrollTo('+=' + delta);\n  }\n\n  scrollUp(delta) {\n    this._rootElem.scrollTo('-=' + delta);\n  }\n\n  _windBack() {\n    const rootElem = this._rootElem;\n    const scrollTop = rootElem.scrollTop();\n    const diff = rootElem[0].scrollHeight - rootElem.scrollTop() - rootElem.height();\n\n    if (diff === 0) {\n      logger.debug('Winding back');\n      this.unbindScrollEvent();\n      rootElem.scrollTop(scrollTop - 5);\n      this.bindScrollEvent();\n    }\n  }\n\n   _windForward() {\n    logger.debug('_windForward');\n    const rootElem = this._rootElem;\n    const scrollTop = rootElem.scrollTop();\n\n    if (scrollTop === 0) {\n      logger.debug('Winding forward');\n      this.unbindScrollEvent();\n      rootElem.scrollTop(scrollTop + 5);\n      this.bindScrollEvent();\n    }\n  }\n\n  bindScrollEvent() {\n    const _this = this;\n\n    if (this._continousPages) {\n      this._rootElem.scroll(async function(event) {\n        const listWidget = _this._listWidget;\n        const elem = jQuery(this);\n        const scrollTop = elem.scrollTop();\n        const currentPos = scrollTop + elem.height();\n        const contentHeight = this.scrollHeight;\n\n        //logger.debug('contentHeight:', contentHeight, 'scrollTop:', scrollTop, 'scroll bottom:', currentPos);\n\n        if (scrollTop < 20) {\n          await listWidget.loadPreviousPage();\n        }\n        if (contentHeight - currentPos < 20) {\n          await listWidget.loadNextPage();\n        }\n      });\n    }\n  }\n\n  unbindScrollEvent() {\n    if (this._continousPages) {\n      this._rootElem.off('scroll');\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/annotation-window/scroll-helper.js","export default function getErrorDialog() {\n  if (!instance) {\n    const id = 'ym_error_dialog';\n    let elem = jQuery('#' + id);\n    if (elem.length === 0) {\n      elem = jQuery('<div/>').attr('id', id)\n        .addClass('ui modal ym_modal')\n        .appendTo(jQuery('body'));\n    }\n    instance = new ErrorDialog(elem);\n  }\n  return instance;\n};\n\nclass ErrorDialog {\n  constructor(elem) {\n    this.elem = elem;\n    elem.modal({\n      onHidden: function() {\n        elem.modal('hide dimmer');\n      }\n    });\n    this.messageMap = {\n      layers: '<p>Sorry, there was a problem retrieving the annotation layers.</p>' + MSG_TRY_LATER,\n      annotations: '<p>Sorry, there was a problem retrieving the annotations.</p>' + MSG_TRY_LATER,\n      authz_create: '<p>Sorry, you are not authorized to create annotations.</p>',\n      authz_update: '<p>Sorry, you are not authorized to update data.</p>',\n      authz_delete: '<p>Sorry, you are not authorized to delete data.</p>'\n    };\n  }\n  \n  show(errorId) {\n    const message = this.messageMap[errorId] || 'Undefined error.';\n    this.elem.html(template({ message: message }));\n    this.elem.modal('show');\n  }\n  \n  hide() {\n    this.elem.modal('hide');\n  }\n}\n\nlet instance = null;\n\nconst template = Handlebars.compile([\n  '<div class=\"header\">Error</div>',\n  '<div class=\"content\">',\n  '  <div class=\"description\">',\n  '    {{{message}}}',\n  '  </div>',\n  '</div>',\n  '<div class=\"actions\">',\n  '  <div class=\"ui cancel button\">Dismiss</div>',\n  '</div>'\n].join(''));\n\nconst MSG_TRY_LATER = '<p>Please try again by reloading the page, or if problem persists, contact the site administrator.</p>';\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/error-dialog.js","import getLogger from '../util/logger';\nimport Selector from './selector';\nimport util from '../util/util';\n\nconst logger = getLogger();\n\nexport default class MenuTagSelector {\n  constructor(options) {\n    logger.debug('MenuTagSelector#constructor options:', options);\n    this.options = Object.assign({\n      selector: null,\n      parent: null,\n      tocSpec: null,\n      annotationExplorer: null,\n      changeCallback: null,\n      initialTags: null,\n      depth: 1\n    }, options);\n\n    this.init();\n  };\n\n  init() {\n    var _this = this;\n    if (this.options.initialTags) {\n      this.options.initialTags = this.options.initialTags.slice(0, this.options.depth);\n    }\n\n    this.options.selector = new Selector({\n      appendTo: this.options.parent,\n      changeCallback: function(value, text) {\n        logger.debug('MenuTagSelector select value:', value, 'text:', text);\n        if (typeof _this.options.changeCallback === 'function') {\n          _this.options.changeCallback(value, text);\n        }\n      }\n    });\n    return this.reload();\n  }\n\n  reload() {\n    //var toc = this.options.annotationExplorer.getAnnotationToc();\n    //var annoHierarchy = toc ? toc.annoHierarchy : null;\n    const tocSpec = this.options.tocSpec;\n\n    return new Promise((resolve, reject) => {\n      /*\n      if (!annoHierarchy) {\n        reject('Undefined annoHierarchy');\n        return;\n      }\n      */\n\n      this.options.selector.empty();\n\n      var layers = [];\n      //var menu = this.buildMenu(annoHierarchy, null, 0); //XXX\n      var menu = this.buildMenu(tocSpec, null, 0); //XXX\n      logger.debug('MenuTagSelector menu:', menu);\n\n      this.options.selector.setItems(menu);\n\n      const topGen = tocSpec.generator[0];\n      const firstValue = topGen.tag.prefix + '1';\n\n      setTimeout(() => {\n        const value = (this.options.initialTags && this.options.initialTags.length > 0) ?\n          this.options.initialTags.join('|') : firstValue;\n        logger.debug('MenuTagSelector#reload initially setting value to', value);\n        this.options.selector.val(value, true);\n        resolve();\n      }, 0);\n    });\n  }\n\n  val(value, skipNotify) {\n    logger.debug('MenuTagSelector#val value:', value, 'skipNotify:', skipNotify);\n    return this.options.selector.val(value, skipNotify);\n  }\n\n  buildMenu(tocSpec) {\n    const topGen = tocSpec.generator[0];\n    const menu = [];\n    for (let i = 1; i <= topGen.max; ++i) {\n      menu.push({\n        label: topGen.label.prefix + i,\n        value: topGen.tag.prefix + i,\n        children: []\n      });\n    }\n    return menu;\n  }\n\n  /**\n   * node: an annoHierarchy node\n   */\n  buildMenu_old(node, parentItem, currentDepth) {\n    logger.debug('MenuTagSelector#buildMenu node:', node, 'parentItem:', parentItem, 'currentDepth:', currentDepth);\n    if (currentDepth > this.options.depth) {\n      return null;\n    }\n    const _this = this;\n    const children = util.getValues(node.childNodes)\n      .sort(function(a, b) {\n        return a.weight - b.weight;\n      });\n\n    let item = { children: [] };\n\n    if (!node.isRoot) {\n      var label = parentItem ? parentItem.label + ', ' + node.spec.label : node.spec.label;\n      var value = parentItem ? parentItem.value + '|' + node.spec.tag : node.spec.tag;\n      item.label = label;\n      item.value = value;\n    }\n    if (children.length > 0) {\n      jQuery.each(children, function(key, childNode) {\n        const subMenu = _this.buildMenu(childNode, node.isRoot ? null : item, currentDepth + 1);\n        if (subMenu) {\n          item.children.push(subMenu);\n        }\n      });\n    }\n    if (node.isRoot) {\n      return [{ label: 'All', value: 'all', children: [] }].concat(item.children);\n    } else {\n      return item;\n    }\n  }\n\n  destroy() {\n    this.options.selector.destroy();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/widgets/menu-tag-selector.js","// joosugi v0.3.1-4-gfccd1e3 built Mon Oct 16 2017 10:48:15 GMT-0400 (EDT)\n\n\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = Anno;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction Anno(oaAnnotation) {\n  return new Annotation(oaAnnotation);\n}\n\nvar Annotation = function () {\n  function Annotation(oaAnnotation) {\n    _classCallCheck(this, Annotation);\n\n    this.oaAnnotation = oaAnnotation;\n  }\n\n  _createClass(Annotation, [{\n    key: 'addTag',\n    value: function addTag(tag) {\n      var resources = this._makeArray(this.oaAnnotation.resource);\n      resources.push(this._createTag(tag));\n      this.oaAnnotation.resource = resources;\n    }\n  }, {\n    key: 'addTarget',\n\n\n    /**\n     * Add target (\"on\" attribute) to annotation\n     */\n    value: function addTarget(target) {\n      var anno = this.oaAnnotation;\n\n      anno.on = this._makeArray(anno.on);\n      anno.on.push(target);\n    }\n  }, {\n    key: 'addInverseTarget',\n    value: function addInverseTarget(annotation) {\n      var anno = this.oaAnnotation;\n\n      anno.targetedBy = this._makeArray(anno.targetedBy);\n      anno.targetedBy.push(annotation);\n    }\n  }, {\n    key: '_makeArray',\n    value: function _makeArray(object) {\n      if (typeof object === 'null' || typeof object === 'undefined') {\n        return [];\n      }\n      if (object instanceof Array) {\n        return object;\n      }\n      return [object];\n    }\n  }, {\n    key: '_getTextResource',\n    value: function _getTextResource() {\n      var resources = this._makeArray(this.oaAnnotation.resource);\n\n      var items = resources.filter(function (item) {\n        return item['@type'] === 'dctypes:Text';\n      });\n      if (items.length > 0) {\n        if (items.length > 1) {\n          console.log('WARNING Annotation#_getTextResource too many text items:', items.length);\n        }\n        return items[0];\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: '_createTag',\n    value: function _createTag(tagString) {\n      return {\n        '@type': 'oa:Tag',\n        chars: tagString\n      };\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this.oaAnnotation['@id'];\n    }\n  }, {\n    key: 'layerId',\n    get: function get() {\n      return this.oaAnnotation.layerId;\n    }\n\n    /**\n     * @returns {Array} IDs of layers associated with the annotation\n     */\n\n  }, {\n    key: 'layers',\n    get: function get() {\n      return this.oaAnnotation.layers;\n    }\n\n    /**\n     * Returns content of first text (non-tag) resource it finds from the annotation.\n     */\n\n  }, {\n    key: 'bodyText',\n    get: function get() {\n      var textResource = this._getTextResource();\n      return textResource ? textResource.chars : null;\n    },\n    set: function set(s) {\n      var textResource = this._getTextResource();\n      if (textResource) {\n        textResource.chars = s;\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: 'bodyStyle',\n    get: function get() {\n      var textResource = this._getTextResource();\n      return textResource ? textResource.style : null;\n    }\n\n    /**\n     * Is Mirador implementation of tags IIIF non-conforming?\n     */\n\n  }, {\n    key: 'tags',\n    get: function get() {\n      var resources = this._makeArray(this.oaAnnotation.resource);\n      var tags = [];\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = resources[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n\n          if (item['@type'] === \"oa:Tag\") {\n            tags.push(item.chars);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return tags;\n    }\n  }, {\n    key: 'targets',\n    get: function get() {\n      return this._makeArray(this.oaAnnotation.on);\n    }\n  }, {\n    key: 'targetedBy',\n    get: function get() {\n      return this._makeArray(this.oaAnnotation.targetedBy);\n    }\n  }]);\n\n  return Annotation;\n}();\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _annotationWrapper = __webpack_require__(0);\n\nvar _annotationWrapper2 = _interopRequireDefault(_annotationWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n\n  logger: { debug: function debug() {}, info: function info() {}, warning: function warning() {}, error: function error() {} },\n\n  setLogger: function setLogger(logger) {\n    this.logger = logger;\n  },\n\n  /**\n   * @param {object} target \"on\" attribute of an annotation\n   * @returns {boolean} true if the target is a canvas fragment, not another annotation\n   */\n  targetIsAnnotationOnCanvas: function targetIsAnnotationOnCanvas(target) {\n    return target['@type'] !== 'oa:Annotation';\n  },\n\n  hasTargetOnCanvas: function hasTargetOnCanvas(annotation) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = (0, _annotationWrapper2.default)(annotation).targets[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var target = _step.value;\n\n        if (this.targetIsAnnotationOnCanvas(target)) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return false;\n  },\n\n  findAnnotationFromListById: function findAnnotationFromListById(annotationId, annotations) {\n    var matched = annotations.filter(function (anno) {\n      if (!anno || (typeof anno === 'undefined' ? 'undefined' : _typeof(anno)) !== 'object') {\n        logger.error('AnnotationUtil#findAnnotationFromListById invalid annotation', anno);\n        return false;\n      }\n      return anno['@id'] === annotationId;\n    });\n    if (matched.length > 1) {\n      logger.error('AnnotationUtil#findAnnotationFromListById duplicate IDs', matched);\n    }\n    return matched[0];\n  },\n\n\n  // For an annotation that targets other annotation(s), follow the\n  // \"on\" relations recursively until no more targets are found.\n  findTransitiveTargetAnnotations: function findTransitiveTargetAnnotations(annotation, annotationMap) {\n    //this.logger.debug('annoUtil.findTransitiveTargetAnnotations annotation:', annotation, 'annotationMap:', annotationMap);\n    var $anno = (0, _annotationWrapper2.default)(annotation);\n    var targetAnnos = $anno.targets.map(function (target) {\n      var annoId = target.full;\n      return annotationMap[annoId];\n    }).filter(function (anno) {\n      return anno !== undefined && anno !== null;\n    });\n\n    if (targetAnnos.length === 0) {\n      return [];\n    }\n\n    var result = targetAnnos;\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = targetAnnos[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var targetAnno = _step2.value;\n\n        var tempResult = this.findTransitiveTargetAnnotations(targetAnno, annotationMap);\n        result = result.concat(tempResult);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    return result;\n  },\n\n  // For an annotation that targets other annotation(s), follow the\n  // \"on\" relations recursively until no more targets are found.\n  findTransitiveTargetingAnnotations: function findTransitiveTargetingAnnotations(annotation, annotationMap) {\n    //this.logger.debug('annoUtil.findTransitiveTargetingAnnotations annotation:', annotation, 'annotationMap:', annotationMap);\n    var $anno = (0, _annotationWrapper2.default)(annotation);\n    var targetingAnnos = $anno.targetedBy;\n\n    targetingAnnos = targetingAnnos.filter(function (anno) {\n      var annoInMap = annotationMap[anno['@id']];\n      return annoInMap !== undefined && annoInMap !== null;\n    });\n\n    if (targetingAnnos.length === 0) {\n      return [];\n    }\n    var result = targetingAnnos;\n\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = targetingAnnos[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var targetingAnno = _step3.value;\n\n        var tempResult = this.findTransitiveTargetingAnnotations(targetingAnno, annotationMap);\n        result = result.concat(tempResult);\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n\n    return result;\n  },\n\n  findTargetAnnotationsOnCanvas: function findTargetAnnotationsOnCanvas(annotation, annotationMap) {\n    var _this = this;\n\n    //this.logger.debug('AnnotationUtil.findTargetAnnotationsOnCanvas anno:', annotation, 'annoMap:', annotationMap);\n    var allTargetAnnos = this.findTransitiveTargetAnnotations(annotation, annotationMap);\n    return allTargetAnnos.filter(function (anno) {\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = (0, _annotationWrapper2.default)(anno).targets[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var target = _step4.value;\n\n          if (_this.targetIsAnnotationOnCanvas(target)) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return false;\n    });\n  },\n\n  /**\n   * Find annotations from \"annotationsList\" that belong to the same TOC node\n   * and which belong to the layer with \"layerId\".\n   */\n  findTocSiblings: function findTocSiblings(annotation, annotationsList, layerId, toc) {\n    var node = toc.findNodeForAnnotation(annotation);\n    if (!node) {\n      return [];\n    }\n    return annotationsList.filter(function (currentAnno) {\n      return currentAnno.layerId === layerId && toc.findNodeForAnnotation(currentAnno) === node;\n    });\n  },\n\n  findAllAnnotationsForTocNode: function findAllAnnotationsForTocNode(tocNode) {\n    var result = [].concat(tocNode.annotations);\n\n    var _iteratorNormalCompletion5 = true;\n    var _didIteratorError5 = false;\n    var _iteratorError5 = undefined;\n\n    try {\n      for (var _iterator5 = Object.values(tocNode.childNodes)[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n        var node = _step5.value;\n\n        result = result.concat(this.findAllAnnotationsForTocNode(node));\n      }\n    } catch (err) {\n      _didIteratorError5 = true;\n      _iteratorError5 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion5 && _iterator5.return) {\n          _iterator5.return();\n        }\n      } finally {\n        if (_didIteratorError5) {\n          throw _iteratorError5;\n        }\n      }\n    }\n\n    return result;\n  },\n\n  /**\n   * XXX this version of mergeTargets will probably have to be removed\n   * because SVG to SVG merge will likely turn out to be illegal against\n   * the IIIF spec. The selector SVG of a target should always contains\n   * a single path and if multiple targets exist for an annotation,\n   * the \"on\" field should be an array of targets.\n   *\n   * Merge annotation's target (\"on\" attribute) with a new \"on\" attribute (sourceTarget).\n   */\n  mergeTargetsOld: function mergeTargetsOld(annotation, sourceTarget) {\n    var destTarget = annotation.on;\n    var destCanvasId = destTarget.full;\n    var sourceCanvasId = sourceTarget.full;\n\n    if (destTarget instanceof Array) {\n      // (destination) annotation has (possibly) multiple targets\n      var targetsWithSameCanvasId = destTarget.filter(function (on) {\n        return on.full === sourceCanvasId;\n      });\n      if (targetsWithSameCanvasId.length === 1) {\n        // there's a destination target on the same canvas as the source target\n        var target = targetsWithSameCanvasId[0];\n        target.selector.value = svgUtil.mergeSvgs(target.selector.value, sourceTarget.selector.value);\n      } else if (targetsWithSameCanvasId.length === 0) {\n        // there's no existing target on the same canvas\n        annotation.on.push(sourceTarget);\n      } else {\n        throw 'multiple targets on same canvas';\n      }\n    } else {\n      // (destination) annotation has a single target\n      var destTargetId = destTarget.full;\n      if (destCanvasId === sourceCanvasId) {\n        destTarget.selector.value = svgUtil.mergeSvgs(destTarget.selector.value, sourceTarget.selector.value);\n      } else {\n        annotation.on = [destTarget, sourceTarget];\n      }\n    }\n  }\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _annotationWrapper = __webpack_require__(0);\n\nvar _annotationWrapper2 = _interopRequireDefault(_annotationWrapper);\n\nvar _annotationUtil = __webpack_require__(1);\n\nvar _annotationUtil2 = _interopRequireDefault(_annotationUtil);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = { debug: function debug() {\n    return null;\n  }, info: function info() {\n    return null;\n  }, warning: function warning() {\n    return null;\n  }, error: function error() {\n    return null;\n  } };\n\n/**\n * A tag based table-of-contents structure for annotations.\n *\n * Builds a structure (annoHiercrchy) of annotations\n * so they can be accessed and manipulated\n * according to the pre-defined TOC tags hierarchy (spec).\n */\n\nvar AnnotationToc = function () {\n  function AnnotationToc(spec, annotations, options) {\n    _classCallCheck(this, AnnotationToc);\n\n    this.options = Object.assign({\n      logger: null\n    }, options || {});\n\n    if (this.options.logger) {\n      logger = this.options.logger;\n    }\n\n    this.spec = spec;\n    this.annotations = annotations;\n    this._annoMap = {};\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = annotations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var anno = _step.value;\n\n        this._annoMap[anno['@id']] = anno;\n      }\n\n      /**\n       * This can be considered the output of parse,\n       * while \"this.spec\" and \"annotations\" are the input.\n       *\n       * Each node is an object:\n       * {\n       *   annotations: [], // annotations that directly belong to this node\n       *   canvasAnnotations: [], // annotations that targets a canvas directly\n       *   tags: [], // tags for this node\n       *   childNodes: AN_OBJECT, // child TOC nodes as a hashmap on tags\n       *   isRoot: A_BOOL, // true if the node is the root\n       *   isDummy: A_BOOL  // true if the node is just a placeholder for reaching the next level of depth\n       * }\n       */\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    this._root = null;\n\n    /**\n     * Annotations that do not belong to the ToC structure.\n     */\n    this._unassigned = [];\n\n    this.annoToNodeMap = {}; // key: annotation ID, value: node in annoHierarchy;\n    this.init();\n  }\n\n  _createClass(AnnotationToc, [{\n    key: 'init',\n    value: function init(annotations) {\n      logger.debug('AnnotationToc#init spec: ', this.spec);\n      this._root = this._newNode(null, null); // root node\n      this.parse(this.annotations);\n    }\n\n    /**\n     * Find the node corresponding to the sequence of tags.\n     * @param {...string} tags\n     * @returns {object} a TOC node\n     */\n\n  }, {\n    key: 'getNode',\n    value: function getNode() {\n      var tags = Array.from(arguments);\n      var node = this._root;\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = tags[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var tag = _step2.value;\n\n          if (!node) {\n            break;\n          }\n          node = node.childNodes[tag];\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return node === this._root ? null : node;\n    }\n  }, {\n    key: 'findNodeForAnnotation',\n    value: function findNodeForAnnotation(annotation) {\n      return this.getNode.apply(this, annotation.tocTags);\n    }\n  }, {\n    key: 'getNodeFromTags',\n    value: function getNodeFromTags(tags) {\n      return this.getNode.apply(this, tags);\n    }\n\n    /**\n     * Return an array of tags for the node to which the annotation belongs\n     * @param {string} annotationId\n     */\n\n  }, {\n    key: 'getTagsFromAnnotationId',\n    value: function getTagsFromAnnotationId(annotationId) {\n      var tags = [];\n\n      this.walk(function (node) {\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = node.annotations[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var anno = _step3.value;\n\n            if (anno['@id'] === annotationId) {\n              tags = node.tags;\n              return true;\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      });\n      return tags;\n    }\n\n    /**\n     * @param {object} annotation\n     * @param {string[]} tags\n     */\n\n  }, {\n    key: 'matchHierarchy',\n    value: function matchHierarchy(annotation, tags) {\n      var node = this.getNodeFromTags(tags);\n      return node ? this.matchNode(annotation, node) : false;\n    }\n  }, {\n    key: 'matchNode',\n    value: function matchNode(annotation, node) {\n      var matched = false;\n\n      var annos = node.canvasAnnotations.filter(function (anno) {\n        return anno['@id'] === annotation['@id'];\n      });\n      if (annos.length > 0) {\n        return true;\n      }\n\n      annos = node.annotations.filter(function (anno) {\n        return anno['@id'] === annotation['@id'];\n      });\n      if (annos.length > 0) {\n        return true;\n      }\n\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = Object.values(node.childNodes)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var childNode = _step4.value;\n\n          if (this.matchNode(annotation, childNode)) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: 'unassigned',\n    value: function unassigned() {\n      return this._unassigned;\n    }\n  }, {\n    key: 'numUnassigned',\n    value: function numUnassigned() {\n      return this._unassigned.length;\n    }\n\n    /**\n     * Traverses the Toc structure and calls visitCallback() for each node.\n     * @param {function} visitCallback\n     */\n\n  }, {\n    key: 'walk',\n    value: function walk(visitCallback) {\n      this._visit(this._root, visitCallback, 0);\n    }\n  }, {\n    key: '_visit',\n    value: function _visit(node, callback, level) {\n      var sortedNodes = Object.values(node.childNodes).sort(function (n0, n1) {\n        return n0.weight - n1.weight;\n      });\n\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = sortedNodes[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var childNode = _step5.value;\n\n          var stop = callback(childNode, level);\n          if (!stop) {\n            this._visit(childNode, callback, level + 1);\n          }\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'parse',\n    value: function parse() {\n      this._buildTocTree(this.annotations);\n      this._setNodeOrders(this._root);\n    }\n\n    // Assign weights to child nodes, recursively\n\n  }, {\n    key: '_setNodeOrders',\n    value: function _setNodeOrders(node) {\n      if (node.childNodes.length === 0) {\n        return;\n      }\n\n      var pattern = /\\d+$/;\n      var sortedKeys = Object.keys(node.childNodes).sort(function (tag0, tag1) {\n        var num0 = Number(tag0.substring(tag0.match(pattern).index));\n        var num1 = Number(tag1.substring(tag1.match(pattern).index));\n        return num0 - num1;\n      });\n\n      for (var i = 0; i < sortedKeys.length; ++i) {\n        var key = sortedKeys[i];\n        var childNode = node.childNodes[key];\n\n        childNode.weight = i;\n        this._setNodeOrders(childNode);\n      }\n    }\n\n    /**\n     * Build a TOC structure\n     * @return An array of annotations that are NOT assigned to a TOC node.\n     */\n\n  }, {\n    key: '_buildTocTree',\n    value: function _buildTocTree(annotations) {\n      var remainder = [];\n\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = annotations[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var annotation = _step6.value;\n\n          var $anno = (0, _annotationWrapper2.default)(annotation);\n          var tags = $anno.tags;\n          var success = this._buildChildNodes(annotation, tags, 0, this._root);\n\n          if (!success) {\n            this._unassigned.push(annotation);\n          }\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n    }\n\n    /**\n     * Recursively builds the TOC structure.\n     * @param {object} annotation Annotation to be assigned to the parent node\n     * @param {string[]} tags\n     * @param {number} rowIndex Index of this._root\n     * @param {object} parent Parent node\n     * @return {boolean} true if the annotation was set to be a TOC node, false if not.\n     */\n\n  }, {\n    key: '_buildChildNodes',\n    value: function _buildChildNodes(annotation, tags, rowIndex, parent) {\n      //logger.debug('AnnotationToc#_buildChildNodes anno:', annotation, 'tags:', tags, 'depth:', rowIndex, 'parent:', parent);\n      var currentNode = null;\n\n      if (rowIndex >= this.spec.generator.length) {\n        // all tags matched with no more levels to explore in the TOC structure\n        if (parent.isRoot) {\n          // Note: the root is not a TOC node\n          return false; // generator has no depth\n        } else {\n          // Assign the annotation to parent (a TOC node)\n          annotation.tocTags = parent.tags;\n          if (_annotationUtil2.default.hasTargetOnCanvas(annotation)) {\n            parent.canvasAnnotations.push(annotation);\n          }\n          parent.annotations.push(annotation);\n          this.annoToNodeMap[annotation['@id']] = parent;\n          return true;\n        }\n      }\n\n      var _getTagForLevel2 = this._getTagForLevel(tags, rowIndex),\n          _getTagForLevel3 = _slicedToArray(_getTagForLevel2, 2),\n          tag = _getTagForLevel3[0],\n          isDummy = _getTagForLevel3[1];\n\n      if (tag) {\n        // one of the tags belongs to the corresponding level of tag hierarchy\n        if (!parent.childNodes[tag]) {\n          parent.childNodes[tag] = this._newNode(tag, parent, isDummy);\n        }\n        currentNode = parent.childNodes[tag];\n\n        if (parent.isRoot) {\n          currentNode.label = this._extractTagNumber(tag);\n        } else {\n          currentNode.label = parent.label + '.' + this._extractTagNumber(tag);\n        }\n        return this._buildChildNodes(annotation, tags, rowIndex + 1, currentNode);\n      } else {\n        // no more match before reaching a leaf node\n        if (parent.isRoot) {\n          return false;\n        } else {\n          annotation.tocTags = parent.tags;\n          if (_annotationUtil2.default.hasTargetOnCanvas(annotation)) {\n            parent.canvasAnnotations.push(annotation);\n          }\n          parent.annotations.push(annotation);\n          this.annoToNodeMap[annotation['@id']] = parent;\n          return true;\n        }\n      }\n    }\n  }, {\n    key: '_getTagForLevel',\n    value: function _getTagForLevel(tags, level) {\n      //logger.debug('AnnotationToc#_getTagForLevel tags:', tags, 'level:', level);\n      var prefix = this.spec.generator[level].tag.prefix;\n\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = tags[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var tag = _step7.value;\n\n          var match = tag.match('^' + prefix + '(\\\\d+)$');\n          if (match) {\n            var isDummy = match[1] === '0';\n            return [tag, isDummy];\n          }\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7.return) {\n            _iterator7.return();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      return [null, null];\n    }\n  }, {\n    key: '_extractTagNumber',\n    value: function _extractTagNumber(tag) {\n      return tag.match(/\\d+$/)[0];\n    }\n\n    /**\n     *\n     * @param {string} tag\n     * @param {object} parent parent node\n     * @param {boolean} isDummy true if a placeholder node\n     */\n\n  }, {\n    key: '_newNode',\n    value: function _newNode(tag, parent, isDummy) {\n      if (!parent) {\n        // root node\n        return {\n          isRoot: true,\n          childNodes: {}\n        };\n      } else {\n        var tags = parent.isRoot ? [tag] : parent.tags.concat([tag]);\n\n        return {\n          annotations: [],\n          canvasAnnotations: [],\n          tags: tags,\n          label: '',\n          childNodes: {},\n          weight: 0, // to define order among nodes at the same level\n          isDummy: isDummy\n        };\n      }\n    }\n\n    // For debugging\n\n  }, {\n    key: 'print',\n    value: function print() {\n      var pad = function pad(level) {\n        var s = '';\n        for (var i = 0; i < level; ++i) {\n          s += '  ';\n        }\n        return s;\n      };\n\n      var trim = function trim(s, maxLen, trimFromRight) {\n        if (s.length > maxLen) {\n          if (trimFromRight) {\n            s = '... ' + s.substring(s.length - maxLen + 4);\n          } else {\n            s = s.substring(0, maxLen - 4) + ' ...';\n          }\n        }\n        return s;\n      };\n\n      var t = '';\n\n      this.walk(function (node, level) {\n        t += pad(level) + '- [n] ';\n        t += String(node.tags);\n        t += '\\n';\n        var _iteratorNormalCompletion8 = true;\n        var _didIteratorError8 = false;\n        var _iteratorError8 = undefined;\n\n        try {\n          for (var _iterator8 = node.annotations[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n            var anno = _step8.value;\n\n            t += pad(level + 1) + '- [a] ';\n            var bodyText = (0, _annotationWrapper2.default)(anno).bodyText || '';\n            t += trim(bodyText, 60) + '\\n';\n            var layerId = anno.layerId || '';\n            t += pad(level + 1) + '      ' + trim(layerId, 60, true) + '\\n';\n          }\n        } catch (err) {\n          _didIteratorError8 = true;\n          _iteratorError8 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion8 && _iterator8.return) {\n              _iterator8.return();\n            }\n          } finally {\n            if (_didIteratorError8) {\n              throw _iteratorError8;\n            }\n          }\n        }\n      });\n\n      console.log('TOC:\\n' + t);\n    }\n  }]);\n\n  return AnnotationToc;\n}();\n\nexports.default = AnnotationToc;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _annotationWrapper = __webpack_require__(0);\n\nvar _annotationWrapper2 = _interopRequireDefault(_annotationWrapper);\n\nvar _annotationExplorer = __webpack_require__(4);\n\nvar _annotationExplorer2 = _interopRequireDefault(_annotationExplorer);\n\nvar _annotationToc = __webpack_require__(2);\n\nvar _annotationToc2 = _interopRequireDefault(_annotationToc);\n\nvar _annotationUtil = __webpack_require__(1);\n\nvar _annotationUtil2 = _interopRequireDefault(_annotationUtil);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.joosugi = {\n  AnnotationExplorer: _annotationExplorer2.default,\n  AnnotationToc: _annotationToc2.default,\n  AnnotationWrapper: _annotationWrapper2.default,\n  annotationUtil: _annotationUtil2.default\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _annotationWrapper = __webpack_require__(0);\n\nvar _annotationWrapper2 = _interopRequireDefault(_annotationWrapper);\n\nvar _annotationToc = __webpack_require__(2);\n\nvar _annotationToc2 = _interopRequireDefault(_annotationToc);\n\nvar _annotationUtil = __webpack_require__(1);\n\nvar _annotationUtil2 = _interopRequireDefault(_annotationUtil);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = null;\n\nvar AnnotationExplorer = function () {\n  function AnnotationExplorer(options) {\n    _classCallCheck(this, AnnotationExplorer);\n\n    this.options = jQuery.extend({\n      dataSource: null,\n      tocSpec: null,\n      logger: { debug: function debug() {\n          return null;\n        }, info: function info() {\n          return null;\n        }, error: function error() {\n          return null;\n        } }\n    }, options);\n    logger = this.options.logger;\n    logger.debug('AnnotationExplorer#constructor options:', options);\n    this.AnnotationToc = null;\n  }\n\n  _createClass(AnnotationExplorer, [{\n    key: 'getLayers',\n    value: function getLayers() {\n      return this.options.dataSource.getLayers();\n    }\n\n    /**\n     * Options: {\n     *   canvasId: <string>, // required\n     *   layerId: <string> // optional\n     * }\n     *\n     * @param {object} options\n     */\n\n  }, {\n    key: 'getAnnotations',\n    value: function getAnnotations(options) {\n      var _this = this;\n\n      //logger.debug('AnnotationExplorer#getAnnotations options:', options);\n\n      if (!options.canvasId) {\n        logger.error('AnnotationExplorer#getAnnotations missing options.canvasId');\n        return Promise.resolve([]);\n      }\n\n      return this.options.dataSource.getAnnotations(options).catch(function (reason) {\n        throw 'ERROR AnnotationExplorer#getAnnotations dataSource.getAnnotations failed: ' + reason;\n      }).then(function (annotations) {\n        logger.debug('AnnotationExplorer#getAnnotations annotations:', annotations);\n        _this._generateInverseTargets(annotations);\n        return annotations;\n      });\n    }\n  }, {\n    key: 'createAnnotation',\n    value: function createAnnotation(annotation) {\n      return this.options.dataSource.createAnnotation(annotation);\n    }\n  }, {\n    key: 'updateAnnotation',\n    value: function updateAnnotation(annotation) {\n      return this.options.dataSource.updateAnnotation(annotation);\n    }\n  }, {\n    key: 'deleteAnnotation',\n    value: function deleteAnnotation(annotationId) {\n      logger.debug('AnnotationExplorer#deleteAnnotation annotationId:', annotationId);\n      var promise = this.options.dataSource.deleteAnnotation(annotationId);\n      return promise;\n    }\n  }, {\n    key: 'updateAnnotationListOrder',\n    value: function updateAnnotationListOrder(canvasId, layerId, annoIds) {\n      logger.debug('AnnotationExplorer#updateAnnotationListOrder');\n      return this.options.dataSource.updateAnnotationListOrder(canvasId, layerId, annoIds);\n    }\n  }, {\n    key: 'getAnnotationToc',\n    value: function getAnnotationToc() {\n      return this.annotationToc;\n    }\n  }, {\n    key: 'reloadAnnotationToc',\n    value: function reloadAnnotationToc(spec, annotations) {\n      this.annotationToc = new _annotationToc2.default(spec, annotations);\n      logger.debug('AnnotationExplorer#reloadAnnotationToc toc:', this.annotationToc.annoHierarchy);\n    }\n  }, {\n    key: '_generateInverseTargets',\n    value: function _generateInverseTargets(annotations) {\n      var annoMap = {};\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = annotations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var anno = _step.value;\n\n          annoMap[anno['@id']] = (0, _annotationWrapper2.default)(anno);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = annotations[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _anno = _step2.value;\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = (0, _annotationWrapper2.default)(_anno).targets[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var target = _step3.value;\n\n              var targetId = target.full;\n              if (annoMap[targetId]) {\n                annoMap[targetId].addInverseTarget(_anno);\n              }\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }]);\n\n  return AnnotationExplorer;\n}();\n\nexports.default = AnnotationExplorer;\n\n/***/ })\n/******/ ]);\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = joosugi;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/exports-loader?joosugi!../joosugi/dist/joosugi.js\n// module id = 53\n// module chunks = 0","// joosugi-semantic-ui v0.1.1-3-gbf770d5 built Thu Jul 20 2017 17:48:05 GMT-0400 (EDT)\n\n\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 14);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _annotationExplorerDialog = __webpack_require__(8);\n\nvar _annotationExplorerDialog2 = _interopRequireDefault(_annotationExplorerDialog);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n__webpack_require__(13);\n\nwindow.joosugiUI = {\n  AnnotationExplorerDialog: _annotationExplorerDialog2.default\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n}\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction placeHoldersCount(b64) {\n  var len = b64.length;\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n}\n\nfunction byteLength(b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return b64.length * 3 / 4 - placeHoldersCount(b64);\n}\n\nfunction toByteArray(b64) {\n  var i, j, l, tmp, placeHolders, arr;\n  var len = b64.length;\n  placeHolders = placeHoldersCount(b64);\n\n  arr = new Arr(len * 3 / 4 - placeHolders);\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len;\n\n  var L = 0;\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[L++] = tmp >> 16 & 0xFF;\n    arr[L++] = tmp >> 8 & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  if (placeHolders === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[L++] = tmp & 0xFF;\n  } else if (placeHolders === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[L++] = tmp >> 8 & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var output = '';\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    output += lookup[tmp >> 2];\n    output += lookup[tmp << 4 & 0x3F];\n    output += '==';\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    output += lookup[tmp >> 10];\n    output += lookup[tmp >> 4 & 0x3F];\n    output += lookup[tmp << 2 & 0x3F];\n    output += '=';\n  }\n\n  parts.push(output);\n\n  return parts.join('');\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(1);\nvar ieee754 = __webpack_require__(4);\nvar isArray = __webpack_require__(5);\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function foo() {\n        return 42;\n      } };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n    that.length = length;\n  }\n\n  return that;\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n    return allocUnsafe(this, arg);\n  }\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n  return createBuffer(that, size);\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n  return that;\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n  if (length === undefined) {\n    length = 0;\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0;\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n      case 'hex':\n        return len >>> 1;\n      case 'base64':\n        return base64ToBytes(string).length;\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false;\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0;\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n\n  if (this === target) return 0;\n\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1;\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n  byteOffset = +byteOffset; // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n  if (dir) {\n    var foundIndex = -1;\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n    if (length > remaining) {\n      length = remaining;\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0;\n    // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0;\n    // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    }\n    // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n\n  var i = start;\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n          break;\n        case 2:\n          secondByte = buf[i + 1];\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break;\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break;\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = '';\n  var i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n\n  var out = '';\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n\n  var newBuf;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n};\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start;\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0;\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n  // Are we oob?\n  if (end > this.length) end = this.length;\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n};\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n      if (code < 256) {\n        val = code;\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n\n  if (!val) val = 0;\n\n  var i;\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n};\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return '';\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        }\n\n        // valid lead\n        leadSurrogate = codePoint;\n\n        continue;\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null;\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7)))\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif (item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function (modules, mediaQuery) {\n\t\tif (typeof modules === \"string\") modules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif (typeof id === \"number\") alreadyImportedModules[id] = true;\n\t\t}\n\t\tfor (i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif (typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif (mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if (mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap) {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\tvar base64 = new Buffer(JSON.stringify(sourceMap)).toString('base64');\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2).Buffer))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n\t// get current location\n\tvar location = typeof window !== \"undefined\" && window.location;\n\n\tif (!location) {\n\t\tthrow new Error(\"fixUrls requires window.location\");\n\t}\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t\treturn css;\n\t}\n\n\tvar baseUrl = location.protocol + \"//\" + location.host;\n\tvar currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n This regular expression is just a way to recursively match brackets within\n a string.\n \t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n    (  = Start a capturing group\n      (?:  = Start a non-capturing group\n          [^)(]  = Match anything that isn't a parentheses\n          |  = OR\n          \\(  = Match a start parentheses\n              (?:  = Start another non-capturing groups\n                  [^)(]+  = Match anything that isn't a parentheses\n                  |  = OR\n                  \\(  = Match a start parentheses\n                      [^)(]*  = Match anything that isn't a parentheses\n                  \\)  = Match a end parentheses\n              )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n  \\)  = Match a close parens\n \t /gi  = Get all matches, not the first.  Be case insensitive.\n  */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function (fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl.trim().replace(/^\"(.*)\"$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t}).replace(/^'(.*)'$/, function (o, $1) {\n\t\t\treturn $1;\n\t\t});\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t\treturn fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t\t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _facetSelector = __webpack_require__(10);\n\nvar _facetSelector2 = _interopRequireDefault(_facetSelector);\n\nvar _annotationPanel = __webpack_require__(9);\n\nvar _annotationPanel2 = _interopRequireDefault(_annotationPanel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = null;\n\nvar AnnotationExplorerDialog = function () {\n\n  /**\n   * @param {object} elem a jQuery element\n   */\n  function AnnotationExplorerDialog(options) {\n    var _this2 = this;\n\n    _classCallCheck(this, AnnotationExplorerDialog);\n\n    this.options = Object.assign({\n      appendTo: null,\n      annotationExplorer: null,\n      canvases: [], // canvas IDs or ranges\n      defaultCanvasId: null, // ID of default canvas to select\n      layers: [],\n      defaultLayerId: null, // ID of default layer to select\n      onSelect: null,\n      logger: { debug: function debug() {\n          return null;\n        }, info: function info() {\n          return null;\n        }, error: function error() {\n          return null;\n        } }\n    }, options);\n\n    logger = this.options.logger;\n    logger.debug('AnnotationExplorerDialog#constructor this.options:', this.options);\n\n    this.id = 'joosugi_anno_explorer_dialog';\n    this.elem = this.createElem(this.id);\n\n    this.annosPanel = new _annotationPanel2.default({\n      appendTo: this.elem.find('.column.annos'),\n      onChange: function onChange(annotation) {\n        _this2.selectedAnnotation = annotation;\n        _this2.okButton.removeClass('disabled');\n      }\n    });\n\n    this.okButton = this.elem.find('.ok');\n    this.cancelButton = this.elem.find('.cancel');\n\n    this.elem.modal({\n      observeChanges: true,\n      onApprove: function onApprove(elem) {\n        _this2.options.onSelect(_this2.selectedAnnotation);\n      },\n      onDeny: function onDeny(elem) {},\n      onHidden: function onHidden(elem) {}\n    });\n\n    this.canvasSelector = this.setupCanvasSelector();\n    this.layerSelector = this.setupLayerSelector();\n\n    var canvasId = this.options.defaultCanvasId || this.options.canvases[0]['@id'];\n    this.canvasSelector.setValue(canvasId);\n\n    setTimeout(function () {\n      _this2.canvasSelector.scrollToValue(canvasId);\n      console.log(7);\n    }, 0);\n\n    var layerId = this.options.defaultLayerId || this.options.layers[0]['@id'];\n    this.layerSelector.setValue(layerId);\n    this.layerSelector.scrollToValue(layerId);\n\n    this.setupActions();\n  }\n\n  _createClass(AnnotationExplorerDialog, [{\n    key: 'open',\n    value: function open() {\n      this.elem.modal('show');\n    }\n  }, {\n    key: 'createElem',\n    value: function createElem(id) {\n      var oldElem = jQuery('#' + id);\n      if (oldElem.length > 0) {\n        oldElem.remove();\n      }\n      return jQuery('<div/>').addClass('ui modal').attr('id', id).html(template()).appendTo(this.options.appendTo);\n    }\n  }, {\n    key: 'setupCanvasSelector',\n    value: function setupCanvasSelector() {\n      var _this3 = this;\n\n      var selector = new _facetSelector2.default({\n        appendTo: this.elem.find('#facets'),\n        title: 'Canvas',\n        items: this.options.canvases,\n        parseItem: function parseItem(item) {\n          return { label: item['label'], value: item['@id'] };\n        },\n        isLeaf: function isLeaf(item) {\n          return item['@type'] !== 'sc:Range';\n        },\n        getChildren: function getChildren(item) {\n          return (item.canvases instanceof Array ? item.canvases : []).concat(item.members instanceof Array ? item.members : []);\n        },\n        onChange: function onChange(selectedValue) {\n          logger.debug('AnnotationExplorerDialog canvas selected:', selectedValue);\n          _this3.refresh();\n        },\n        logger: logger\n      });\n      return selector;\n    }\n  }, {\n    key: 'setupLayerSelector',\n    value: function setupLayerSelector() {\n      var _this4 = this;\n\n      return new _facetSelector2.default({\n        appendTo: this.elem.find('#facets'),\n        title: 'Layer',\n        items: this.options.layers,\n        parseItem: function parseItem(item) {\n          return { label: item.label, value: item['@id'] };\n        },\n        onChange: function onChange(selectedValue) {\n          logger.debug('AnnotationExplorerDialog layer selected:', selectedValue);\n          _this4.refresh();\n        },\n        logger: logger\n      });\n    }\n  }, {\n    key: 'refresh',\n    value: function () {\n      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n        var canvasId, layerId, annotations;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                canvasId = this.canvasSelector.value();\n                layerId = this.layerSelector.value();\n\n                logger.debug('AnnotationExplorerDialog#refresh', canvasId, layerId);\n\n                if (!(!canvasId || !layerId)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                logger.debug('AnnotationExplorerDialog#refresh skipping...');\n                return _context.abrupt('return');\n\n              case 6:\n\n                this.annosPanel.showPlaceHolderText('Retrieving annotations...');\n                _context.next = 9;\n                return this.options.annotationExplorer.getAnnotations({\n                  canvasId: canvasId,\n                  layerId: layerId\n                });\n\n              case 9:\n                annotations = _context.sent;\n\n                this.annosPanel.reload(annotations);\n\n              case 11:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function refresh() {\n        return _ref.apply(this, arguments);\n      }\n\n      return refresh;\n    }()\n  }, {\n    key: 'setDimensions',\n    value: function setDimensions() {\n      var winHeight = jQuery(window).height();\n      var rest = 180; // estimate height of dialog minus height of content div\n      var maxContentHeight = (winHeight - rest) * 0.82;\n\n      this.elem.css('margin-top', -(winHeight * 0.45));\n      this.contentGrid.css('height', maxContentHeight);\n      this.canvasesPanel.css('height', maxContentHeight * 0.46);\n      this.layersPanel.css('height', maxContentHeight * 0.46);\n    }\n  }, {\n    key: 'scrollToCurrentCanvas',\n    value: function scrollToCurrentCanvas() {\n      var _this = this;\n      var canvasElems = this.canvasesPanel.find('.canvas');\n      var scrollTo = null;\n\n      logger.debug('AnnotationExplorerDialog scrollToCurrentCanvas', canvasElems.length);\n\n      canvasElems.each(function (index, canvasElem) {\n        var elem = $(canvasElem);\n\n        if (elem.data('canvasId') === _this.currentCanvasId) {\n          scrollTo = elem;\n          return false;\n        }\n      });\n\n      if (scrollTo) {\n        this.canvasesPanel.scrollTop(scrollTo.position().top + this.canvasesPanel.scrollTop() - 18);\n      }\n    }\n  }, {\n    key: 'setupActions',\n    value: function setupActions() {\n      var _this = this;\n      this.okButton.addClass('disabled');\n      this.okButton.click(function () {});\n      this.cancelButton.click(function () {\n        _this.elem.modal('hide');\n      });\n    }\n  }]);\n\n  return AnnotationExplorerDialog;\n}();\n\nexports.default = AnnotationExplorerDialog;\n\n\nvar template = Handlebars.compile(['<div class=\"header\">Find Annotation', '</div>', '<div class=\"content\">', '  <div class=\"ui grid\">', '    <div id=\"facets\" class=\"six wide column facets\">', '    </div>', '    <div class=\"ten wide column annos\">', '    </div>', '  </div>', '</div>', '<div class=\"actions\">', '  <div class=\"ui ok button\">Select</div>', '  <div class=\"ui cancel button\">Cancel</div>', '</div>'].join(''));\n\nvar canvasLinkTemplate = Handlebars.compile(['<a href=\"#\">{{label}}</a>'].join(''));\n\nvar layerLinkTemplate = Handlebars.compile(['<a href=\"#\">{{label}}</a>'].join(''));\n\nvar annotationTemplate = Handlebars.compile(['<div>{{{content}}}</div>'].join(''));\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//import importPackage from './import';\n//const util = importPackage('joosugi').annotationUtil;\n\nvar util = joosugi.annotationUtil;\nvar logger = null;\n\nvar AnnotationPanel = function () {\n  function AnnotationPanel(options) {\n    _classCallCheck(this, AnnotationPanel);\n\n    this.options = Object.assign({\n      appendTo: null,\n      onChange: null,\n      logger: { debug: function debug() {\n          return null;\n        }, info: function info() {\n          return null;\n        }, error: function error() {\n          return null;\n        } }\n    }, options);\n\n    logger = this.options.logger;\n    this.elem = jQuery('<div/>').addClass('joosugi_anno_panel').html(template()).appendTo(this.options.appendTo);\n    this.placeHolder = this.elem.find('.place-holder');\n    this.content = this.elem.find('.content');\n  }\n\n  _createClass(AnnotationPanel, [{\n    key: 'value',\n    value: function value() {\n      return this._value;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      if (this.findItemByValue(value)) {\n        if (this._value !== value) {\n          this._value = value;\n          this.refresh();\n          this.options.onChange(value);\n        }\n      } else {\n        console.log('AnnotationPanel#setValue failed for value: ' + value);\n      }\n    }\n  }, {\n    key: 'findItemByValue',\n    value: function findItemByValue(value) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.content.find('.item')[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n\n          console.log('00: ' + value['@id']);\n          console.log('01: ' + jQuery(item).data('item')['@id']);\n\n          if (jQuery(item).data('item') === value) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: 'showPlaceHolderText',\n    value: function showPlaceHolderText(text) {\n      this.placeHolder.text(text);\n      this.placeHolder.show();\n    }\n  }, {\n    key: 'hidePlaceHolderText',\n    value: function hidePlaceHolderText() {\n      this.placeHolder.hide();\n    }\n  }, {\n    key: 'reload',\n    value: function reload(annotations) {\n      logger.debug('AnnotationPanel#reload', annotations);\n      this.content.empty();\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = annotations[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var anno = _step2.value;\n\n          this.content.append(this.createItem(anno));\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      if (annotations.length > 0) {\n        this.hidePlaceHolderText();\n      } else {\n        this.showPlaceHolderText('No annotations found');\n      }\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.content.find('.item')[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var item = _step3.value;\n\n          var $item = jQuery(item);\n          if ($item.data('item')['@id'] === this._value['@id']) {\n            $item.addClass('selected');\n          } else {\n            $item.removeClass('selected');\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'createItem',\n    value: function createItem(annotation) {\n      var _this = this;\n      var elem = jQuery('<div/>').addClass('item').html(util.getText(annotation));\n      elem.data('item', annotation);\n      elem.click(function () {\n        _this.setValue(annotation);\n      });\n      return elem;\n    }\n  }]);\n\n  return AnnotationPanel;\n}();\n\nexports.default = AnnotationPanel;\n\n\nvar template = Handlebars.compile(['<span class=\"place-holder\"></span>', '<div class=\"content\"></div>'].join(''));\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar logger = null;\n\nvar FacetSelector = function () {\n  function FacetSelector(options) {\n    _classCallCheck(this, FacetSelector);\n\n    this.options = Object.assign({\n      appendTo: null,\n      title: null,\n      items: [],\n\n      // function that returns on object\n      // { label: _LABEL_, value: _VALUE_ }\n      parseItem: null,\n\n      isLeaf: function isLeaf() {\n        return true;\n      },\n      getChildren: null,\n      onChange: function onChange() {\n        return null;\n      },\n      logger: { debug: function debug() {\n          return null;\n        }, info: function info() {\n          return null;\n        }, error: function error() {\n          return null;\n        } }\n    }, options);\n\n    logger = this.options.logger;\n\n    this.elem = jQuery('<div/>').addClass('ui accordion').html(template).appendTo(this.options.appendTo);\n    this.elem.find('.title').text(this.options.title);\n\n    this.content = this.elem.find('.content');\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = this.options.items[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var item = _step.value;\n\n        this.addItem(item, this.content);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    this.elem.accordion({\n      collapsible: false,\n      animateChildren: false,\n      duration: 0,\n      on: 'none'\n    });\n\n    this.elem.accordion('open', 0);\n    this._value = null; // value of selected item\n  }\n\n  _createClass(FacetSelector, [{\n    key: 'value',\n    value: function value() {\n      return this._value;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      logger.debug('FacetSelector#setValue', value);\n      if (this.findItemByValue(value)) {\n        if (this._value !== value) {\n          this._value = value;\n          this.refresh();\n          this.options.onChange(value);\n        }\n      } else {\n        logger.error('FacetSelector#setValue failed for value', value);\n      }\n    }\n  }, {\n    key: 'findItemByValue',\n    value: function findItemByValue(value) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.content.find('.item')[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          if (jQuery(item).data('item').value === value) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.content.find('.item')[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var item = _step3.value;\n\n          var $item = jQuery(item);\n          if ($item.data('item').value === this._value) {\n            $item.addClass('selected');\n          } else {\n            $item.removeClass('selected');\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'addLeaf',\n    value: function addLeaf(rawItem, appendTo) {\n      //logger.debugg('FacetSelector#addLeaf item:', rawItem);\n      var _this = this;\n      var item = this.options.parseItem ? this.options.parseItem(rawItem) : rawItem;\n      var elem = jQuery('<div/>').addClass('item').html(itemTemplate({ label: item.label }));\n\n      elem.data('item', item);\n      elem.click(function () {\n        var item = jQuery(this).data('item');\n        if (item.value !== _this.value) {\n          _this.setValue(item.value);\n        }\n      });\n      appendTo.append(elem);\n    }\n  }, {\n    key: 'addItem',\n    value: function addItem(item, appendTo) {\n      if (this.options.isLeaf(item)) {\n        this.addLeaf(item, appendTo);\n      } else {\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = this.options.getChildren(item)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var child = _step4.value;\n\n            this.addItem(child, appendTo);\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'scrollToValue',\n    value: function scrollToValue(value) {\n      logger.debug('FacetSelector scrollToValue', value);\n      var items = this.content.find('.item');\n      var scrollTo = null;\n\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = items[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var item = _step5.value;\n\n          var elem = jQuery(item);\n          if (elem.data('item').value === value) {\n            scrollTo = elem;\n            break;\n          }\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      if (scrollTo) {\n        console.log('SCROLL TO', scrollTo[0].outerHTML);\n        scrollTo[0].scrollIntoView();\n      }\n    }\n  }]);\n\n  return FacetSelector;\n}();\n\nexports.default = FacetSelector;\n\n\nvar template = Handlebars.compile(['<div class=\"title\"></div>', '<div class=\"content\">', '</div>'].join(''));\n\nvar itemTemplate = Handlebars.compile(['<a href=\"#\">{{label}}</a>'].join(''));\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(3)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"#joosugi_anno_explorer_dialog {\\n  height: 80%;\\n}\\n#joosugi_anno_explorer_dialog .content {\\n  height: 72%;\\n}\\n#joosugi_anno_explorer_dialog .content .grid {\\n  height: 100%;\\n}\\n#joosugi_anno_explorer_dialog .column.facets {\\n  height: 100%;\\n  overflow-y: scroll;\\n}\\n#joosugi_anno_explorer_dialog .item.selected {\\n  background-color: orange;\\n}\\n#joosugi_anno_explorer_dialog .item {\\n  padding: 5px;\\n  background-color: #eee;\\n  border-radius: 5px;\\n  margin: 2px;\\n}\\n#joosugi_anno_explorer_dialog .ui.accordion .content {\\n  height: 120px;\\n  overflow-y: scroll;\\n}\\n.joosugi_anno_panel {\\n  height: 100%;\\n  overflow-y: scroll;\\n  border: solid 1px #bbb;\\n  border-radius: 5px;\\n  padding: 5px;\\n  text-align: center;\\n}\\n.joosugi_anno_panel .place-holder {\\n  display: inline-block;\\n  vertical-align: middle;\\n}\\n.joosugi_anno_panel .item {\\n  text-align: left;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\t// Test for IE <= 9 as proposed by Browserhacks\n\t\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t\t// Tests for existence of standard globals is to allow style-loader \n\t\t// to operate correctly into non-standard environments\n\t\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\t\treturn window && document && document.all && !window.atob;\n\t}),\n\tgetElement = (function(fn) {\n\t\tvar memo = {};\n\t\treturn function(selector) {\n\t\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t\t}\n\t\t\treturn memo[selector]\n\t\t};\n\t})(function (styleTarget) {\n\t\treturn document.querySelector(styleTarget)\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [],\n\tfixUrls = __webpack_require__(6);\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (typeof options.insertInto === \"undefined\") options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar styleTarget = getElement(options.insertInto)\n\tif (!styleTarget) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\tstyleTarget.insertBefore(styleElement, styleTarget.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\tstyleTarget.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\tstyleTarget.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\tstyleTarget.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\toptions.attrs.type = \"text/css\";\n\n\tattachTagAttrs(styleElement, options.attrs);\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\tattachTagAttrs(linkElement, options.attrs);\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction attachTagAttrs(element, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\telement.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement, options);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/* If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls){\n\t\tcss = fixUrls(css);\n\t}\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(11);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(12)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/index.js!./main.less\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/index.js!./main.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(0);\n\n\n/***/ })\n/******/ ]);\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = joosugiUI;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/exports-loader?joosugiUI!../joosugi-semantic-ui/dist/joosugi-semantic-ui.js\n// module id = 54\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/main.less\n// module id = 55\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 56\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 57\n// module chunks = 0"],"sourceRoot":""}